##Bop
SPA_bop_move_to_republic_minor_effect = {
	add_power_balance_value = {
		id = SPA_the_country_problem_bop
		value = -0.04
		tooltip_side = SPA_the_republic_bop
	}
}

SPA_bop_move_to_republic_medium_effect = {
	add_power_balance_value = {
		id = SPA_the_country_problem_bop
		value = -0.08
		tooltip_side = SPA_the_republic_bop
	}
}

SPA_bop_move_to_republic_large_effect = {
	add_power_balance_value = {
		id = SPA_the_country_problem_bop
		value = -0.12
		tooltip_side = SPA_the_republic_bop
	}
}

SPA_bop_move_to_monarchy_minor_effect = {
	add_power_balance_value = {
		id = SPA_the_country_problem_bop
		value = 0.04
		tooltip_side = SPA_the_monarchy_bop
	}
}

SPA_bop_move_to_monarchy_medium_effect = {
	add_power_balance_value = {
		id = SPA_the_country_problem_bop
		value = 0.08
		tooltip_side = SPA_the_monarchy_bop
	}
}

SPA_bop_move_to_monarchy_large_effect = {
	add_power_balance_value = {
		id = SPA_the_country_problem_bop
		value = 0.12
		tooltip_side = SPA_the_monarchy_bop
	}
}

##Show tooltip
SPA_reduce_socialist_influence_effect = {
	custom_effect_tooltip = SPA_reduce_socialist_influence_tt
	if = {
		limit = {
			has_country_flag = SPA_psoe_join_election_flag
		}
		add_popularity = {
			ideology = communism
			popularity = -0.015
		}
		add_popularity = {
			ideology = democratic
			popularity = -0.015
		}
	}
	else = {
		add_popularity = {
			ideology = communism
			popularity = -0.03
		}
	}
	add_to_variable = {
		var = SPA_psoe_influcence
		value = -3
	}
}

SPA_strength_socialist_influence_effect = {
	custom_effect_tooltip = SPA_strength_socialist_influence_tt
	if = {
		limit = {
			has_country_flag = SPA_psoe_join_election_flag
		}
		add_popularity = {
			ideology = communism
			popularity = 0.015
		}
		add_popularity = {
			ideology = democratic
			popularity = 0.015
		}
	}
	else = {
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
	}
	add_to_variable = {
		var = SPA_psoe_influcence
		value = 3
	}
}

SPA_reduce_falangist_influence_effect = {
	custom_effect_tooltip = SPA_reduce_falangist_influence_tt
	add_popularity = {
		ideology = fascism
		popularity = -0.03
	}
	add_to_variable = {
		var = SPA_falangist_influence
		value = -3
	}
}

SPA_strength_falangist_influence_effect = {
	custom_effect_tooltip = SPA_strength_falangist_influence_tt
	add_popularity = {
		ideology = fascism
		popularity = 0.03
	}
	add_to_variable = {
		var = SPA_falangist_influence
		value = 3
	}
}

SPA_strength_carlist_influence_effect = {
	custom_effect_tooltip = SPA_strength_carlist_influence_tt
	add_popularity = {
		ideology = fascism
		popularity = 0.015
	}
	add_popularity = {
		ideology = neutrality
		popularity = 0.015
	}
	add_to_variable = {
		var = SPA_carlist_influence
		value = 3
	}
}

SPA_reduce_carlist_influence_effect = {
	custom_effect_tooltip = SPA_reduce_carlist_influence_tt
	add_popularity = {
		ideology = fascism
		popularity = -0.015
	}
	add_popularity = {
		ideology = neutrality
		popularity = -0.015
	}
	add_to_variable = {
		var = SPA_carlist_influence
		value = -3
	}
}

SPA_reduce_military_influence_effect = {
	custom_effect_tooltip = SPA_reduce_military_influence_tt
	add_popularity = {
		ideology = neutrality
		popularity = -0.03
	}
	add_war_support = -0.05
	add_to_variable = {
		var = SPA_military_influence
		value = -3
	}
}

SPA_strength_military_influence_effect = {
	custom_effect_tooltip = SPA_strength_military_influence_tt
	add_popularity = {
		ideology = neutrality
		popularity = 0.03
	}
	add_war_support = 0.05
	add_to_variable = {
		var = SPA_military_influence
		value = 3
	}
}

SPA_strength_ceda_influence_effect = {
	custom_effect_tooltip = SPA_strength_ceda_influence_tt
	if = {
		limit = {
			OR = {
				has_country_leader = {
					character = SPA_irene_glenfarlo
					ruling_only = yes
				}
				has_country_leader = {
					character = SPA_andreana_timoteo
					ruling_only = yes
				}
			}
		}
		add_stability = 0.03
	}
	add_popularity = {
		ideology = democratic
		popularity = 0.03
	}
	add_to_variable = {
		var = SPA_ceda_influence
		value = 3
	}
}

SPA_reduce_ceda_influence_effect = {
	custom_effect_tooltip = SPA_reduce_ceda_influence_tt
	add_popularity = {
		ideology = democratic
		popularity = -0.03
	}
	add_to_variable = {
		var = SPA_ceda_influence
		value = -3
	}
}

SPA_strength_liberal_influence_effect = {
	custom_effect_tooltip = SPA_strength_liberal_influence_tt
	add_popularity = {
		ideology = democratic
		popularity = 0.03
	}
	add_to_variable = {
		var = SPA_liberal_influence
		value = 3
	}
}

SPA_reduce_liberal_influence_effect = {
	custom_effect_tooltip = SPA_reduce_liberal_influence_tt
	add_popularity = {
		ideology = democratic
		popularity = -0.03
	}
	add_to_variable = {
		var = SPA_liberal_influence
		value = -3
	}
}

##
SPA_concession_strike_effect = {
	if = {
		limit = {
			has_idea = SPA_national_strikes1_idea
		}
		swap_ideas = {
			remove_idea = SPA_national_strikes1_idea
			add_idea = SPA_national_strikes2_idea
		}
	}
	else_if = {
		limit = {
			has_idea = SPA_national_strikes2_idea
		}
		swap_ideas = {
			remove_idea = SPA_national_strikes2_idea
			add_idea = SPA_national_strikes3_idea
		}
	}
	else_if = {
		limit = {
			has_idea = SPA_national_strikes3_idea
		}
		swap_ideas = {
			remove_idea = SPA_national_strikes3_idea
			add_idea = SPA_national_strikes4_idea
		}
	}
	else_if = {
		limit = {
			has_idea = SPA_national_strikes4_idea
		}
		swap_ideas = {
			remove_idea = SPA_national_strikes4_idea
			add_idea = SPA_national_strikes5_idea
		}
	}
	else = {
		add_political_power = -50
		add_stability = 0.05
	}
}

SPA_supress_strike_effect = {
	if = {
		limit = {
			has_idea = SPA_national_strikes2_idea
		}
		swap_ideas = {
			remove_idea = SPA_national_strikes2_idea
			add_idea = SPA_national_strikes1_idea
		}
	}
	else_if = {
		limit = {
			has_idea = SPA_national_strikes3_idea
		}
		swap_ideas = {
			remove_idea = SPA_national_strikes3_idea
			add_idea = SPA_national_strikes2_idea
		}
	}
	else_if = {
		limit = {
			has_idea = SPA_national_strikes4_idea
		}
		swap_ideas = {
			remove_idea = SPA_national_strikes4_idea
			add_idea = SPA_national_strikes3_idea
		}
	}
	else_if = {
		limit = {
			has_idea = SPA_national_strikes5_idea
		}
		swap_ideas = {
			remove_idea = SPA_national_strikes5_idea
			add_idea = SPA_national_strikes4_idea
		}
	}
	else = {
		add_political_power = 50
		add_stability = -0.05
	}
}

##Civil War
SPA_naval_variants = {
	create_equipment_variant = {
		name = "D Class"		# purchased from Italy
		type = ship_hull_submarine_2
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_1
			fixed_ship_engine_slot = sub_ship_engine_2
			rear_1_custom_slot = ship_torpedo_sub_1
		}
	}
	create_equipment_variant = {
		name = "C Class"
		type = ship_hull_submarine_2
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_1
			fixed_ship_engine_slot = sub_ship_engine_2
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "B Class"
		type = ship_hull_submarine_1
		modules = {
			fixed_ship_torpedo_slot = ship_torpedo_sub_1
			fixed_ship_engine_slot = sub_ship_engine_1
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Almirante Antequera Class"
		type = ship_hull_light_2
		modules = {
			fixed_ship_battery_slot = ship_light_battery_2
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_2
			fixed_ship_torpedo_slot = ship_torpedo_2
			mid_1_custom_slot = ship_light_battery_2
			rear_1_custom_slot = ship_depth_charge_1
		}
	}
	create_equipment_variant = {
		name = "Churruca Class"
		type = ship_hull_light_1
		modules = {
			fixed_ship_battery_slot = ship_light_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_2
			fixed_ship_torpedo_slot = ship_torpedo_1
			mid_1_custom_slot = empty
			rear_1_custom_slot = ship_depth_charge_1
		}
	}
	create_equipment_variant = {
		name = "Alsedo Class"
		type = ship_hull_light_1
		modules = {
			fixed_ship_battery_slot = ship_light_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = light_ship_engine_1
			fixed_ship_torpedo_slot = ship_torpedo_1
			mid_1_custom_slot = ship_mine_layer_1
			rear_1_custom_slot = ship_depth_charge_1
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Espa√±a Class"
		type = ship_hull_heavy_1
		modules = {
			fixed_ship_battery_slot = ship_heavy_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = heavy_ship_engine_1
			fixed_ship_secondaries_slot = ship_secondaries_1
			fixed_ship_armor_slot = ship_armor_bb_1
			front_1_custom_slot = ship_heavy_battery_1
			mid_1_custom_slot = ship_secondaries_1
			mid_2_custom_slot = ship_secondaries_1
			rear_1_custom_slot = empty
		}
	}
	create_equipment_variant = {
		name = "Reina Victoria Eugenia Class"
		type = ship_hull_cruiser_1
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_1
			mid_1_custom_slot = ship_torpedo_1
			mid_2_custom_slot = ship_light_medium_battery_1
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Blas de Lezo Class"
		type = ship_hull_cruiser_1
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_1
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_1
			fixed_ship_armor_slot = ship_armor_cruiser_1
			mid_1_custom_slot = ship_torpedo_1
			mid_2_custom_slot = ship_torpedo_1
			rear_1_custom_slot = empty
		}
		obsolete = yes
	}
	create_equipment_variant = {
		name = "Almirante Cervera Class"
		type = ship_hull_cruiser_2
		modules = {
			fixed_ship_battery_slot = ship_light_medium_battery_2
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_radar_slot = empty
			fixed_ship_engine_slot = cruiser_ship_engine_2
			fixed_ship_armor_slot = ship_armor_cruiser_2
			front_1_custom_slot = empty
			mid_1_custom_slot = ship_torpedo_1
			mid_2_custom_slot = ship_torpedo_1
			rear_1_custom_slot = ship_light_medium_battery_2
		}
	}
}

SPA_create_templates = {
	division_template = {
		name = "Divisi√≥n de Infanter√≠a"
		division_names_group = SPA_INF_01
		regiments = {
			infantry = {
				x = 0
				y = 0
			}
			infantry = {
				x = 0
				y = 1
			}
			infantry = {
				x = 0
				y = 2
			}
			infantry = {
				x = 0
				y = 3
			}
			infantry = {
				x = 1
				y = 0
			}
			infantry = {
				x = 1
				y = 1
			}
			infantry = {
				x = 1
				y = 2
			}
			infantry = {
				x = 1
				y = 3
			}
		}
		support = {
			artillery = {
				x = 0
				y = 0
			}
			engineer = {
				x = 0
				y = 1
			}
		}
	}
	division_template = {
		name = "Divisi√≥n de Caballer√≠a"
		division_names_group = SPA_CAV_01
		regiments = {
			cavalry = {
				x = 0
				y = 0
			}
			cavalry = {
				x = 0
				y = 1
			}
			cavalry = {
				x = 0
				y = 2
			}
			cavalry = {
				x = 0
				y = 3
			}
			cavalry = {
				x = 1
				y = 0
			}
			cavalry = {
				x = 1
				y = 1
			}
			cavalry = {
				x = 1
				y = 2
			}
			cavalry = {
				x = 1
				y = 3
			}
			cavalry = {
				x = 2
				y = 0
			}
			cavalry = {
				x = 2
				y = 1
			}
			cavalry = {
				x = 2
				y = 2
			}
			cavalry = {
				x = 2
				y = 3
			}
		}
		support = {
			recon = {
				x = 0
				y = 0
			}
		}
	}
	division_template = {
		name = "Divisi√≥n de Monta√±a"
		division_names_group = SPA_MNT_01
		regiments = {
			mountaineers = {
				x = 0
				y = 0
			}
			mountaineers = {
				x = 0
				y = 1
			}
			mountaineers = {
				x = 1
				y = 0
			}
			mountaineers = {
				x = 1
				y = 1
			}
		}
		support = {
			artillery = {
				x = 0
				y = 0
			}
		}
		priority = 2
	}
	division_template = {
		name = "Divisi√≥n de Guarnici√≥n"
		division_names_group = SPA_GAR_01
		regiments = {
			infantry = {
				x = 0
				y = 0
			}
			infantry = {
				x = 0
				y = 1
			}
			infantry = {
				x = 1
				y = 0
			}
			infantry = {
				x = 1
				y = 1
			}
		}
		support = {
			engineer = {
				x = 0
				y = 0
			}
		}
		priority = 0
		template_counter = 6
	}
}

SPA_create_infantry_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Divisi√≥n de Infanter√≠a"
			}
		}
		division_template = {
			name = "Divisi√≥n de Infanter√≠a"
			division_names_group = SPA_INF_01
			regiments = {
				infantry = {
					x = 0
					y = 0
				}
				infantry = {
					x = 0
					y = 1
				}
				infantry = {
					x = 0
					y = 2
				}
				infantry = {
					x = 0
					y = 3
				}
				infantry = {
					x = 1
					y = 0
				}
				infantry = {
					x = 1
					y = 1
				}
				infantry = {
					x = 1
					y = 2
				}
				infantry = {
					x = 1
					y = 3
				}
			}
			support = {
				artillery = {
					x = 0
					y = 0
				}
				engineer = {
					x = 0
					y = 1
				}
			}
		}
	}
}

SPA_create_cavalry_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Divisi√≥n de Caballer√≠a"
			}
		}
		division_template = {
			name = "Divisi√≥n de Caballer√≠a"
			division_names_group = SPA_CAV_01
			regiments = {
				cavalry = {
					x = 0
					y = 0
				}
				cavalry = {
					x = 0
					y = 1
				}
				cavalry = {
					x = 0
					y = 2
				}
				cavalry = {
					x = 0
					y = 3
				}
				cavalry = {
					x = 1
					y = 0
				}
				cavalry = {
					x = 1
					y = 1
				}
				cavalry = {
					x = 1
					y = 2
				}
				cavalry = {
					x = 1
					y = 3
				}
				cavalry = {
					x = 2
					y = 0
				}
				cavalry = {
					x = 2
					y = 1
				}
				cavalry = {
					x = 2
					y = 2
				}
				cavalry = {
					x = 2
					y = 3
				}
			}
			support = {
				recon = {
					x = 0
					y = 0
				}
			}
		}
	}
}

SPA_create_mountaineer_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Divisi√≥n de Monta√±a"
			}
		}
		division_template = {
			name = "Divisi√≥n de Monta√±a"
			division_names_group = SPA_MNT_01
			regiments = {
				mountaineers = {
					x = 0
					y = 0
				}
				mountaineers = {
					x = 0
					y = 1
				}
				mountaineers = {
					x = 1
					y = 0
				}
				mountaineers = {
					x = 1
					y = 1
				}
			}
			support = {
				artillery = {
					x = 0
					y = 0
				}
			}
			priority = 2
		}
	}
}

SPA_create_garrison_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Divisi√≥n de Guarnici√≥n"
			}
		}
		division_template = {
			name = "Divisi√≥n de Guarnici√≥n"
			division_names_group = SPA_GAR_01
			regiments = {
				infantry = {
					x = 0
					y = 0
				}
				infantry = {
					x = 0
					y = 1
				}
				infantry = {
					x = 1
					y = 0
				}
				infantry = {
					x = 1
					y = 1
				}
			}
			support = {
				engineer = {
					x = 0
					y = 0
				}
			}
			priority = 0
			template_counter = 6
		}
	}
}

SPA_create_carlist_requete_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Carlist Requet√©"
			}
		}
		division_template = {
			name = "Carlist Requet√©"
			division_names_group = SPA_INF_02
			regiments = {
				militia = {
					x = 0
					y = 0
				}
				militia = {
					x = 0
					y = 1
				}
				militia = {
					x = 0
					y = 2
				}
				militia = {
					x = 0
					y = 3
				}
				militia = {
					x = 0
					y = 4
				}
			}
			priority = 0
		}
	}
}

SPA_create_falangist_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Brigada de Juventudes Sindicales"
			}
		}
		division_template = {
			name = "Brigada de Juventudes Sindicales"
			division_names_group = SPA_INF_02
			regiments = {
				militia = {
					x = 0
					y = 0
				}
				militia = {
					x = 0
					y = 1
				}
				militia = {
					x = 0
					y = 2
				}
				militia = {
					x = 0
					y = 3
				}
				militia = {
					x = 0
					y = 4
				}
			}
			priority = 0
		}
	}
}

SPA_create_anarchist_militia_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Milicia Anarquista"
			}
		}
		division_template = {
			name = "Milicia Anarquista"
			division_names_group = SPA_INF_04
			regiments = {
				militia = {
					x = 0
					y = 0
				}
				militia = {
					x = 0
					y = 1
				}
				militia = {
					x = 0
					y = 2
				}
				militia = {
					x = 0
					y = 3
				}
			}
			priority = 0
		}
	}
}

SPA_create_anarchist_brigade_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Brigada Anarquista"
			}
		}
		division_template = {
			name = "Brigada Anarquista"
			division_names_group = SPA_INF_03
			regiments = {
				militia = {
					x = 0
					y = 0
				}
				militia = {
					x = 0
					y = 1
				}
				militia = {
					x = 0
					y = 2
				}
				militia = {
					x = 0
					y = 3
				}
				militia = {
					x = 1
					y = 0
				}
				militia = {
					x = 1
					y = 1
				}
				militia = {
					x = 1
					y = 2
				}
				militia = {
					x = 1
					y = 3
				}
			}
			support = {
				artillery = {
					x = 0
					y = 0
				}
				engineer = {
					x = 0
					y = 1
				}
			}
		}
	}
}

SPA_start_civil_war_effect = {
	hidden_effect = {
		if = {
			limit = {
				has_country_flag = SPA_carlist_will_oppose_us_flag
				has_country_flag = SPA_the_nationalist_will_oppose_us
			}
			if = {
				limit = {
					has_country_flag = SPA_carlist_will_oppose_us_flag
				}
				SPA = {
					every_character = {
						limit = {
							has_character_flag = SPA_is_carlist_character_flag
						}
						set_nationality = {
							target_country = SPB
							character = THIS
						}
					}
				}
				SPB = {
					promote_character = {
						character = SPA_laurentienne_specter
						ideology = stratocracy
					}
				}
			}
			if = {
				limit = {
					has_country_flag = SPA_the_nationalist_will_oppose_us
				}
				SPA = {
					every_character = {
						limit = {
							has_character_flag = SPA_is_falangist_character_flag
						}
						set_nationality = {
							target_country = SPB
							character = THIS
						}
					}
				}
				SPB = {
					promote_character = {
						character = SPA_skadi_agor
						ideology = falangism
					}
				}
			}
			SPB = {
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				add_popularity = {
					ideology = ROOT
					popularity = 0.4
				}
			}
			SPA_start_civil_war_all_effect = yes
		}
		else = {
			SPA_start_civil_war_only_SPC_effect = yes
			every_state = {
				limit = {
					OR = {
						is_claimed_by = SPB
						is_core_of = SPB
					}
				}
				remove_claim_by = SPB
				remove_core_of = SPB
			}
		}
		SPA = {
			add_war_support = 0.3
			add_stability = 0.3
			SPA_pre_civil_negative_clear_all_effect = yes
			increase_economic_mobilisation = yes
			increase_economic_mobilisation = yes
			increase_conscription = yes
			increase_conscription = yes
			if = {
				limit = {
					has_completed_focus = SPA_the_army_of_africa
				}
				SPA_army_of_africa_template = yes
			}
			if = {
				limit = {
					is_ai = yes
				}
				increase_economic_mobilisation = yes
				increase_conscription = yes
			}
			if = {
				limit = {
					has_political_power < 0
				}
				set_political_power = 0
			}
			set_temp_variable = {
				SPA_militia = 10
			}
			for_loop_effect = {
				start = 1
				end = SPA_militia
				compare = less_than_or_equals
				random_owned_controlled_state = {
					limit = {
						valid_state_for_spawning_friendly_unit = yes
					}
					create_unit = {
						division = "division_template = \"Divisi√≥n de Guarnici√≥n\" start_experience_factor = 0.1"
						owner = PREV
					}
				}
			}
			country_lock_all_division_template = no
			SPA_spawn_reinforcement_effect = yes
			add_to_temp_array = {
				SPA_kingdom_states = 41.id
			}
			add_to_temp_array = {
				SPA_kingdom_states = 173.id
			}
			add_to_temp_array = {
				SPA_kingdom_states = 175.id
			}
			add_to_temp_array = {
				SPA_kingdom_states = 795.id
			}
			add_to_temp_array = {
				SPA_kingdom_states = 951.id
			}
			add_to_temp_array = {
				SPA_kingdom_states = 1082.id
			}
			every_owned_state = {
				teleport_armies = {
					to_state_array = SPA_kingdom_states
				}
			}
		}
		SPB = {
			increase_economic_mobilisation = yes
			increase_economic_mobilisation = yes
			increase_conscription = yes
			increase_conscription = yes
		}
		SPC = {
			increase_economic_mobilisation = yes
			increase_economic_mobilisation = yes
			increase_conscription = yes
			increase_conscription = yes
		}
	}
}

SPA_start_civil_war_all_effect = {
	add_named_threat = {
		threat = 5
		name = SPA_civil_war_threat
	}
	hidden_effect = {
		SPA = {
			every_core_state = {
				add_core_of = SPB
				add_core_of = SPC
			}
			every_owned_state = {
				limit = {
					is_claimed_by = ROOT
				}
				add_claim_by = SPB
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					OR = {
						state = 165						#Catalonia
						state = 167						#Valencia
						state = 166						#Upper Aragon
						state = 168						#Murcia
						state = 940						#Huesca
					}
				}
				transfer_state_to = SPC
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					OR = {
						state = 171
						state = 174
						state = 1081
						state = 176
						state = 172
					}
				}
				transfer_state_to = SPB
			}
			declare_war_on = {
				target = SPB
				type = civil_war
			}
			declare_war_on = {
				target = SPC
				type = civil_war
			}
		}
		SPB = {
			inherit_technology = SPA
			SPA_create_infantry_template = yes
			SPA_create_cavalry_template = yes
			SPA_create_garrison_template = yes
			SPA_create_mountaineer_template = yes
			SPA_create_carlist_requete_template = yes
			SPA_create_falangist_template = yes
			set_temp_variable = {
				SPR_militia = 7
			}
			set_temp_variable = {
				SPR_infantry = 14
			}
			for_loop_effect = {
				start = 1
				end = SPR_militia
				compare = less_than_or_equals
				random_owned_controlled_state = {
					limit = {
						valid_state_for_spawning_friendly_unit = yes
					}
					create_unit = {
						division = "division_template = \"Brigada de Juventudes Sindicales\" start_experience_factor = 0.1"
						owner = PREV
					}
				}
			}
			for_loop_effect = {
				start = 1
				end = SPR_infantry
				compare = less_than_or_equals
				random_owned_controlled_state = {
					limit = {
						valid_state_for_spawning_friendly_unit = yes
					}
					create_unit = {
						division = "division_template = \"Divisi√≥n de Infanter√≠a\" start_experience_factor = 0.1"
						owner = PREV
					}
				}
			}
			if = {
				limit = {
					owns_state = 176
				}
				set_capital = {
					state = 176
				}
			}
			declare_war_on = {
				target = SPA
				type = civil_war
			}
			declare_war_on = {
				target = SPC
				type = civil_war
			}
			add_civil_war_target = SPA
			add_civil_war_target = SPC
			add_equipment_production = {
				equipment = {
					type = infantry_equipment_1
					creator = "SPA"
				}
				requested_factories = 3
				progress = 0.42
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = artillery_equipment_1
					creator = "SPA"
				}
				requested_factories = 1
				progress = 0.24
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = support_equipment_1
					creator = "SPA"
				}
				requested_factories = 1
				progress = 0.24
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = convoy_1
				}
				requested_factories = 2
				progress = 0.2
				efficiency = 100
			}
		}
		SPC = {
			inherit_technology = SPA
			set_technology = {
				militia_tech = 1
			}
			SPA_create_infantry_template = yes
			SPA_create_cavalry_template = yes
			SPA_create_garrison_template = yes
			SPA_create_mountaineer_template = yes
			SPA_create_anarchist_militia_template = yes
			SPA_create_anarchist_brigade_template = yes
			SPA_SPC_spawn_reinforcement_effect = yes
			set_temp_variable = {
				SWF_militia = 13
			}
			set_temp_variable = {
				SWF_infantry = 8
			}
			add_offsite_building = {
				type = arms_factory
				level = 1
			}
			for_loop_effect = {
				start = 1
				end = SWF_militia
				compare = less_than_or_equals
				random_owned_controlled_state = {
					limit = {
						valid_state_for_spawning_friendly_unit = yes
					}
					create_unit = {
						division = "division_template = \"Milicia Anarquista\" start_experience_factor = 0.1"
						owner = PREV
					}
				}
			}
			for_loop_effect = {
				start = 1
				end = SWF_infantry
				compare = less_than_or_equals
				random_owned_controlled_state = {
					limit = {
						valid_state_for_spawning_friendly_unit = yes
					}
					create_unit = {
						division = "division_template = \"Brigada Anarquista\" start_experience_factor = 0.1"
						owner = PREV
					}
				}
			}
			if = {
				limit = {
					owns_state = 165
				}
				set_capital = {
					state = 165
				}
			}
			add_equipment_production = {
				equipment = {
					type = infantry_equipment_1
					creator = "SPA"
				}
				requested_factories = 3
				progress = 0.42
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = artillery_equipment_1
					creator = "SPA"
				}
				requested_factories = 1
				progress = 0.24
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = support_equipment_1
					creator = "SPA"
				}
				requested_factories = 1
				progress = 0.24
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = convoy_1
				}
				requested_factories = 2
				progress = 0.2
				efficiency = 100
			}
		}
		send_equipment_fraction = {
			target = SPC
			value = 0.33
		}
		send_equipment_fraction = {
			target = SPB
			value = 0.5
		}
		#50% of the remaining 66% = 33%
		declare_war_on = {
			target = SPA
			type = civil_war
		}
		declare_war_on = {
			target = SPB
			type = civil_war
		}
		add_civil_war_target = SPA
		add_civil_war_target = SPB
	}
	effect_tooltip = {
		declare_war_on = {
			target = SPB
			type = civil_war
		}
		declare_war_on = {
			target = SPC
			type = civil_war
		}
	}
}

SPA_start_civil_war_only_SPC_effect = {
	add_named_threat = {
		threat = 5
		name = SPA_civil_war_threat
	}
	hidden_effect = {
		every_core_state = {
			add_core_of = SPC
		}
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				OR = {
					state = 165					#Catalonia
					state = 167					#Valencia
					state = 166					#Upper Aragon
					state = 168					#Murcia
					state = 940					#Huesca
					state = 1082
					state = 175
					state = 795
					state = 173
				}
			}
			transfer_state_to = SPC
		}
		SPC = {
			inherit_technology = SPA
			set_technology = {
				militia_tech = 1
			}
			SPA_create_infantry_template = yes
			SPA_create_cavalry_template = yes
			SPA_create_garrison_template = yes
			SPA_create_mountaineer_template = yes
			SPA_create_anarchist_militia_template = yes
			SPA_create_anarchist_brigade_template = yes
			SPA_SPC_spawn_reinforcement_effect = yes
			set_temp_variable = {
				SWF_militia = 24
			}
			set_temp_variable = {
				SWF_infantry = 13
			}
			add_offsite_building = {
				type = arms_factory
				level = 1
			}
			for_loop_effect = {
				start = 1
				end = SWF_militia
				compare = less_than_or_equals
				random_owned_controlled_state = {
					limit = {
						valid_state_for_spawning_friendly_unit = yes
					}
					create_unit = {
						division = "division_template = \"Milicia Anarquista\" start_experience_factor = 0.1"
						owner = PREV
					}
				}
			}
			for_loop_effect = {
				start = 1
				end = SWF_infantry
				compare = less_than_or_equals
				random_owned_controlled_state = {
					limit = {
						valid_state_for_spawning_friendly_unit = yes
					}
					create_unit = {
						division = "division_template = \"Brigada Anarquista\" start_experience_factor = 0.1"
						owner = PREV
					}
				}
			}
			if = {
				limit = {
					owns_state = 165
				}
				set_capital = {
					state = 165
				}
			}
			add_equipment_production = {
				equipment = {
					type = infantry_equipment_1
					creator = "SPA"
				}
				requested_factories = 3
				progress = 0.42
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = artillery_equipment_1
					creator = "SPA"
				}
				requested_factories = 1
				progress = 0.24
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = support_equipment_1
					creator = "SPA"
				}
				requested_factories = 1
				progress = 0.24
				efficiency = 100
			}
			add_equipment_production = {
				equipment = {
					type = convoy_1
				}
				requested_factories = 2
				progress = 0.2
				efficiency = 100
			}
		}
		send_equipment_fraction = {
			target = SPC
			value = 0.4
		}
		declare_war_on = {
			target = SPC
			type = civil_war
		}
		add_civil_war_target = SPC
	}
	effect_tooltip = {
		declare_war_on = {
			target = SPC
			type = civil_war
		}
	}
}

SPA_spawn_reinforcement_effect = {
	hidden_effect = {
		if = {
			limit = {
				NOT = {
					has_template = "Guardias de Reserva"
				}
			}
			division_template = {
				name = "Guardias de Reserva"
				division_names_group = SPA_INF_01
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
					infantry = {
						x = 0
						y = 2
					}
					infantry = {
						x = 1
						y = 0
					}
					infantry = {
						x = 1
						y = 1
					}
					infantry = {
						x = 1
						y = 2
					}
					infantry = {
						x = 2
						y = 0
					}
					infantry = {
						x = 2
						y = 1
					}
					infantry = {
						x = 2
						y = 2
					}
				}
				support = {
					artillery = {
						x = 0
						y = 0
					}
				}
				template_counter = 24
			}
		}
		#Guardias De Reserva
		1082 = {
			create_unit = {
				division = "name = \"1a Guardias de Reserva\" division_template = \"Guardias de Reserva\" start_experience_factor = 0 start_equipment_factor = 1.0"
				owner = SPA
				allow_spawning_on_enemy_provs = yes
				prioritize_location = 3945
			}
		}
		951 = {
			create_unit = {
				division = "name = \"2a Guardias de Reserva\" division_template = \"Guardias de Reserva\" start_experience_factor = 0 start_equipment_factor = 1.0"
				owner = SPA
				prioritize_location = 3874
			}
		}
		#Divisi√≥n de Guarnici√≥n
		41 = {
			create_unit = {
				division = "division_template = \"Divisi√≥n de Guarnici√≥n\" start_experience_factor = 0 start_equipment_factor = 1.0"
				owner = SPA
				prioritize_location = 3938
			}
		}
		173 = {
			create_unit = {
				division = "division_template = \"Divisi√≥n de Guarnici√≥n\" start_experience_factor = 0 start_equipment_factor = 1.0"
				owner = SPA
				prioritize_location = 12038
				allow_spawning_on_enemy_provs = yes
			}
		}
	}
}

SPA_SPC_spawn_reinforcement_effect = {
	hidden_effect = {
		167 = {
			create_unit = {
				division = "division_template = \"Brigada Anarquista\" start_experience_factor = 0.1"
				owner = SPC
				prioritize_location = 6906
			}
		}
		166 = {
			create_unit = {
				division = "division_template = \"Milicia Anarquista\" start_experience_factor = 0.1"
				owner = SPC
				prioritize_location = 3816
			}
		}
	}
}

##ÈùûÊ¥≤ÂÜõÂõ¢
SPA_army_of_africa_template = {
	if = {
		limit = {
			NOT = {
				has_template = "Ej√©rcito de √Åfrica"
			}
		}
		division_template = {
			name = "Ej√©rcito de √Åfrica"
			is_locked = no
			division_names_group = SPA_INF_05
			regiments = {
				infantry = {
					x = 0
					y = 0
				}
				infantry = {
					x = 0
					y = 1
				}
				infantry = {
					x = 0
					y = 2
				}
				infantry = {
					x = 1
					y = 0
				}
				infantry = {
					x = 1
					y = 1
				}
				infantry = {
					x = 1
					y = 2
				}
				infantry = {
					x = 2
					y = 0
				}
				infantry = {
					x = 2
					y = 1
				}
				infantry = {
					x = 2
					y = 2
				}
				artillery_brigade = {
					x = 3
					y = 0
				}
			}
			support = {
				artillery = {
					x = 0
					y = 0
				}
				engineer = {
					x = 0
					y = 1
				}
				recon = {
					x = 0
					y = 2
				}
			}
			template_counter = 3
			priority = 2
		}
	}
	169 = {
		create_unit = {
			division = "division_template = \"Ej√©rcito de √Åfrica\" start_experience_factor = 3 start_equipment_factor = 1.0"
			owner = SPA
			prioritize_location = 7183
		}
		create_unit = {
			division = "division_template = \"Ej√©rcito de √Åfrica\" start_experience_factor = 3 start_equipment_factor = 1.0"
			owner = SPA
			prioritize_location = 7183
		}
	}
}

SPA_german_light_tank_template = {
	hidden_effect = {
		if = {
			limit = {
				has_dlc_nsb = yes
			}
			create_equipment_variant = {
				name = "St.Pzw. II"
				type = light_tank_chassis_0
				parent_version = 0
				modules = {
					main_armament_slot = tank_heavy_machine_gun
					turret_type_slot = tank_light_one_man_tank_turret
					suspension_type_slot = tank_bogie_suspension
					armor_type_slot = tank_riveted_armor
					engine_type_slot = tank_gasoline_engine
					special_type_slot_1 = tank_radio_1
					special_type_slot_2 = secondary_turret_hmg
				}
				upgrades = {
					tank_nsb_engine_upgrade = 2
					tank_nsb_armor_upgrade = 2
				}
			}
		}
		if = {
			limit = {
				NOT = {
					has_template = "Divisi√≥n Blindada"
				}
			}
			division_template = {
				name = "Divisi√≥n Blindada"
				is_locked = yes
				division_names_group = SPA_ARM_01
				regiments = {
					light_armor = {
						x = 0
						y = 0
					}
					light_armor = {
						x = 0
						y = 1
					}
					light_armor = {
						x = 0
						y = 2
					}
					light_armor = {
						x = 0
						y = 3
					}
					cavalry = {
						x = 1
						y = 0
					}
					cavalry = {
						x = 1
						y = 1
					}
					cavalry = {
						x = 1
						y = 2
					}
					cavalry = {
						x = 1
						y = 3
					}
					light_armor = {
						x = 2
						y = 0
					}
				}
				support = {
					recon = {
						x = 0
						y = 0
					}
					engineer = {
						x = 0
						y = 1
					}
					artillery = {
						x = 0
						y = 2
					}
				}
				priority = 2
			}
		}
		169 = {
			create_unit = {
				division = "name = \"1a Divisi√≥n Blindada 'Alhucemas'\" division_template = \"Divisi√≥n Blindada\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
				owner = SPA
				prioritize_location = 7183
			}
		}
	}
}

##
SPA_pre_civil_negative_clear_all_effect = {
	remove_ideas = SPA_economic_crisis_idea
	remove_ideas = SPA_economic_crisis_worsen_idea
	remove_ideas = SPA_fragmented_society_1_idea
	remove_ideas = SPA_fragmented_society_2_idea
	remove_ideas = SPA_national_strikes1_idea
	remove_ideas = SPA_national_strikes2_idea
	remove_ideas = SPA_national_strikes3_idea
	remove_ideas = SPA_national_strikes4_idea
	remove_ideas = SPA_national_strikes5_idea
}
