EGY_find_major_democracy_effect = {
	if = {
		limit = {
			ITA = {
				is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = yes
			}
		}
		set_variable = {
			EGY.EGY_best_major_democracy_ally = ITA
		}
	}
	else_if = {
		limit = {
			ENG = {
				is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = yes
			}
		}
		set_variable = {
			EGY.EGY_best_major_democracy_ally = ENG
		}
	}
	else_if = {
		limit = {
			USA = {
				is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = yes
			}
		}
		set_variable = {
			EGY.EGY_best_major_democracy_ally = USA
		}
	}
	else_if = {
		limit = {
			FRA = {
				is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = yes
			}
		}
		set_variable = {
			EGY.EGY_best_major_democracy_ally = FRA
		}
	}
	else_if = {
		limit = {
			RUS = {
				is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = yes
			}
		}
		set_variable = {
			EGY.EGY_best_major_democracy_ally = RUS
		}
	}
	else_if = {
		limit = {
			SWE = {
				is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = yes
			}
		}
		set_variable = {
			EGY.EGY_best_major_democracy_ally = SWE
		}
	}
	else_if = {
		limit = {
			JAP = {
				has_idea = JAP_liberals_idea
				is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = yes
			}
		}
		set_variable = {
			EGY.EGY_best_major_democracy_ally = JAP
		}
	}
	else_if = {
		limit = {
			any_other_country = {
				is_major = yes
				is_faction_leader = yes
				is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = yes
			}
		}
		random_other_country = {
			set_variable = {
				EGY.EGY_best_major_democracy_ally = PREV
			}
		}
	}
	var:EGY_best_major_democracy_ally = {
		country_event = {
			id = generic_events.10
			hours = 1
		}
	}
}

EGY_guardian_of_africa_effect = {
	every_country = {
		limit = {
			THIS.capital_scope = {
				is_on_continent = africa
			}
			has_capitulated = no
			is_samefaction_and_exist_and_peace_off_ROOT = yes
		}
		add_opinion_modifier = {
			target = THIS
			modifier = generic_friendly_opinion
		}
	}
}

##Swap ideas
EGY_upgrade_atlas_cooperation_effect = {
	if = {
		limit = {
			NOT = {
				has_idea = EGY_cooperation_with_atlas1_idea
			}
		}
		add_ideas = EGY_cooperation_with_atlas1_idea
	}
	else_if = {
		limit = {
			has_idea = EGY_cooperation_with_atlas1_idea
		}
		swap_ideas = {
			remove_idea = EGY_cooperation_with_atlas1_idea
			add_idea = EGY_cooperation_with_atlas2_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_cooperation_with_atlas2_idea
		}
		swap_ideas = {
			remove_idea = EGY_cooperation_with_atlas2_idea
			add_idea = EGY_cooperation_with_atlas3_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_cooperation_with_atlas3_idea
		}
		swap_ideas = {
			remove_idea = EGY_cooperation_with_atlas3_idea
			add_idea = EGY_cooperation_with_atlas4_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_cooperation_with_atlas4_idea
		}
		swap_ideas = {
			remove_idea = EGY_cooperation_with_atlas4_idea
			add_idea = EGY_cooperation_with_atlas5_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_cooperation_with_atlas5_idea
		}
		swap_ideas = {
			remove_idea = EGY_cooperation_with_atlas5_idea
			add_idea = EGY_cooperation_with_atlas6_idea
		}
	}
}

EGY_upgrade_backward_economy_effect = {
	if = {
		limit = {
			has_idea = EGY_backwards_economy1_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy1_idea
			add_idea = EGY_backwards_economy2_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy2_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy2_idea
			add_idea = EGY_backwards_economy3_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy3_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy3_idea
			add_idea = EGY_backwards_economy4_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy4_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy4_idea
			add_idea = EGY_backwards_economy5_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy5_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy5_idea
			add_idea = EGY_backwards_economy6_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy6_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy6_idea
			add_idea = EGY_backwards_economy7_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy7_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy7_idea
			add_idea = EGY_backwards_economy8_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy8_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy8_idea
			add_idea = EGY_backwards_economy9_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy9_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy9_idea
			add_idea = EGY_backwards_economy10_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_backwards_economy10_idea
		}
		swap_ideas = {
			remove_idea = EGY_backwards_economy10_idea
			add_idea = EGY_industrial_modernization_idea
		}
	}
	else = {
		add_stability = 0.05
		add_political_power = 30
	}
}

EGY_down_economic_depression_effect = {
	if = {
		limit = {
			has_idea = EGY_economic_depression_idea
		}
		modify_timed_idea = {
			idea = EGY_economic_depression_idea
			days = -100
		}
	}
}

EGY_upgrade_divided_country_effect = {
	if = {
		limit = {
			has_idea = EGY_divided_country1_idea
		}
		swap_ideas = {
			remove_idea = EGY_divided_country1_idea
			add_idea = EGY_divided_country2_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_divided_country2_idea
		}
		swap_ideas = {
			remove_idea = EGY_divided_country2_idea
			add_idea = EGY_divided_country3_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_divided_country3_idea
		}
		swap_ideas = {
			remove_idea = EGY_divided_country3_idea
			add_idea = EGY_divided_country4_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_divided_country4_idea
		}
		swap_ideas = {
			remove_idea = EGY_divided_country4_idea
			add_idea = EGY_divided_country5_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_divided_country5_idea
		}
		swap_ideas = {
			remove_idea = EGY_divided_country5_idea
			add_idea = EGY_divided_country6_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_divided_country6_idea
		}
		remove_ideas = EGY_divided_country6_idea
	}
	else = {
		add_stability = 0.06
	}
}

EGY_upgrade_illiterate_populace_effect = {
	if = {
		limit = {
			has_idea = EGY_illiterate_populace1_idea
		}
		swap_ideas = {
			remove_idea = EGY_illiterate_populace1_idea
			add_idea = EGY_illiterate_populace2_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_illiterate_populace2_idea
		}
		swap_ideas = {
			remove_idea = EGY_illiterate_populace2_idea
			add_idea = EGY_illiterate_populace3_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_illiterate_populace3_idea
		}
		swap_ideas = {
			remove_idea = EGY_illiterate_populace3_idea
			add_idea = EGY_illiterate_populace4_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_illiterate_populace4_idea
		}
		swap_ideas = {
			remove_idea = EGY_illiterate_populace4_idea
			add_idea = EGY_illiterate_populace5_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_illiterate_populace5_idea
		}
		swap_ideas = {
			remove_idea = EGY_illiterate_populace5_idea
			add_idea = EGY_improved_education_idea
		}
	}
	else = {
		add_political_power = 60
	}
}

EGY_upgrade_egyptian_army_effect = {
	if = {
		limit = {
			has_idea = EGY_new_egyptian_army1_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army1_idea
			add_idea = EGY_new_egyptian_army2_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army2_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army2_idea
			add_idea = EGY_new_egyptian_army3_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army3_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army3_idea
			add_idea = EGY_new_egyptian_army4_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army4_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army4_idea
			add_idea = EGY_new_egyptian_army5_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army5_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army5_idea
			add_idea = EGY_new_egyptian_army6_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army6_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army6_idea
			add_idea = EGY_new_egyptian_army7_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army7_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army7_idea
			add_idea = EGY_new_egyptian_army8_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army8_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army8_idea
			add_idea = EGY_new_egyptian_army9_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army9_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army9_idea
			add_idea = EGY_new_egyptian_army10_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army10_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army10_idea
			add_idea = EGY_new_egyptian_army11_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_new_egyptian_army11_idea
		}
		swap_ideas = {
			remove_idea = EGY_new_egyptian_army11_idea
			add_idea = EGY_new_egyptian_army12_idea
		}
	}
	else = {
		add_one_cost_land_doctrine_reduction = yes
	}
}

EGY_upgrade_political_situation_effect = {
	if = {
		limit = {
			has_idea = EGY_political_reform1_idea
		}
		swap_ideas = {
			remove_idea = EGY_political_reform1_idea
			add_idea = EGY_political_reform2_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_political_reform2_idea
		}
		swap_ideas = {
			remove_idea = EGY_political_reform2_idea
			add_idea = EGY_political_reform3_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_political_reform3_idea
		}
		swap_ideas = {
			remove_idea = EGY_political_reform3_idea
			add_idea = EGY_political_reform4_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_political_reform4_idea
		}
		swap_ideas = {
			remove_idea = EGY_political_reform4_idea
			add_idea = EGY_political_reform5_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_political_reform5_idea
		}
		swap_ideas = {
			remove_idea = EGY_political_reform5_idea
			add_idea = EGY_political_reform6_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_political_reform6_idea
		}
		swap_ideas = {
			remove_idea = EGY_political_reform6_idea
			add_idea = EGY_political_reform7_idea
		}
	}
	else_if = {
		limit = {
			has_idea = EGY_political_reform7_idea
		}
		swap_ideas = {
			remove_idea = EGY_political_reform7_idea
			add_idea = EGY_political_reform8_idea
		}
	}
	else = {
		add_political_power = 50
		add_stability = 0.03
	}
}

EGY_modify_the_egyptian_army_modifier_off_military_leader_cost_factor_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_military_leader_cost_factor
		value = var:temp_variable
		tooltip = military_leader_cost_factor_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_land_doctrine_cost_factor_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_land_doctrine_cost_factor
		value = var:temp_variable
		tooltip = land_doctrine_cost_factor_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_army_org_factor_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_army_org_factor
		value = var:temp_variable
		tooltip = army_org_factor_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_army_attack_factor_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_army_attack_factor
		value = var:temp_variable
		tooltip = army_attack_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_army_max_dig_in_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_army_max_dig_in
		value = var:temp_variable
		tooltip = max_dig_in_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_command_power_gain_mult_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_command_power_gain_mult
		value = var:temp_variable
		tooltip = command_power_gain_mult_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_production_speed_bunker_factor_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_production_speed_bunker_factor
		value = var:temp_variable
		tooltip = bunker_construction_speed_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_mobilization_laws_cost_factor_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_mobilization_laws_cost_factor
		value = var:temp_variable
		tooltip = mobilization_laws_cost_factor_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_non_core_manpower_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_non_core_manpower
		value = var:temp_variable
		tooltip = non_core_manpower_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_conscription_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_conscription
		value = var:temp_variable
		tooltip = conscription_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_cas_damage_reduction_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_cas_damage_reduction
		value = var:temp_variable
		tooltip = cas_damage_reduction_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_heat_attrition_factor_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_heat_attrition_factor
		value = var:temp_variable
		tooltip = heat_attrition_factor_tooltip
	}
}

EGY_modify_the_egyptian_army_modifier_off_army_speed_factor_effect = {
	custom_effect_tooltip = EGY_modify_the_egyptian_army_modifier_tooltip
	add_to_variable = {
		var = EGY_the_egyptian_army_modifier_army_speed_factor
		value = var:temp_variable
		tooltip = army_speed_factor_tooltip
	}
}

