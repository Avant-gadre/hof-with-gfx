JAP_create_democratic_leaders = {
	add_corps_commander_role = {
		# 两仪式
		character = JAP_ryougi_shiki
		traits = {
			brilliant_strategist
			infantry_leader
			commando
			trickster
			urban_assault_specialist
			trait_engineer
		}
		skill = 4
		attack_skill = 6
		defense_skill = 3
		planning_skill = 3
		logistics_skill = 2
	}
	add_corps_commander_role = {
		# 坂本龙马
		character = JAP_sakamoto_ryoma
		traits = {
			brilliant_strategist
			cavalry_officer
			cavalry_leader
			combined_arms_expert
			politically_connected
		}
		skill = 5
		attack_skill = 4
		defense_skill = 4
		planning_skill = 4
		logistics_skill = 4
	}
	add_corps_commander_role = {
		# 浅上藤乃
		character = JAP_asagami_fujino
		traits = {
			trait_cautious
			commando
			urban_assault_specialist
		}
		skill = 3
		attack_skill = 5
		defense_skill = 2
		planning_skill = 2
		logistics_skill = 1
	}
	add_corps_commander_role = {
		# 静希草十郎
		character = JAP_sizuki_sojyuro
		traits = {
			trait_cautious
			urban_assault_specialist
		}
		skill = 3
		attack_skill = 3
		defense_skill = 3
		planning_skill = 2
		logistics_skill = 2
	}
	add_corps_commander_role = {
		# 雾雨魔理沙
		character = JAP_kirisame_marisa
		traits = {
			trait_reckless
			urban_assault_specialist
			bearer_of_artillery
			organizer
			trickster
		}
		skill = 5
		attack_skill = 7
		defense_skill = 3
		planning_skill = 3
		logistics_skill = 3
	}
	add_corps_commander_role = {
		# 博丽灵梦
		character = JAP_hakurei_reimu
		traits = {
			career_officer
			trait_reckless
			harsh_leader
			organizer
			trickster
			brilliant_strategist
		}
		skill = 5
		attack_skill = 5
		defense_skill = 5
		planning_skill = 4
		logistics_skill = 2
	}
}

JAP_lock_all_initial_templates = {
	hidden_effect = {
		set_division_template_lock = {
			division_template = "Hohei Shidan"
			is_locked = yes
		}
		set_division_template_lock = {
			division_template = "Dokuritsu Konsei Ryodan"
			is_locked = yes
		}
		set_division_template_lock = {
			division_template = "Kihei Shidan"
			is_locked = yes
		}
		set_division_template_lock = {
			division_template = "Jidousha Shidan"
			is_locked = yes
		}
		set_division_template_lock = {
			division_template = "Rikusentai"
			is_locked = yes
		}
		set_division_template_lock = {
			division_template = "Chuton-chi Shidan"
			is_locked = yes
		}
	}
}

JAP_unlock_all_initial_templates = {
	hidden_effect = {
		set_division_template_lock = {
			division_template = "Hohei Shidan"
			is_locked = no
		}
		set_division_template_lock = {
			division_template = "Dokuritsu Konsei Ryodan"
			is_locked = no
		}
		set_division_template_lock = {
			division_template = "Kihei Shidan"
			is_locked = no
		}
		set_division_template_lock = {
			division_template = "Jidousha Shidan"
			is_locked = no
		}
		set_division_template_lock = {
			division_template = "Rikusentai"
			is_locked = no
		}
		set_division_template_lock = {
			division_template = "Chuton-chi Shidan"
			is_locked = no
		}
	}
}

JAP_military_government_clear_all = {
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_idea
		}
		remove_ideas = {
			JAP_army_goverment_conflict_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_2_idea
		}
		remove_ideas = {
			JAP_army_goverment_conflict_2_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_relaxed_idea
		}
		remove_ideas = {
			JAP_army_goverment_conflict_relaxed_idea
		}
	}
	JAP_unlock_all_initial_templates = yes
}

JAP_democracy_destroyed = {
	if = {
		limit = {
			has_idea = JAP_corrupt_democracy_idea
		}
		remove_ideas = {
			JAP_corrupt_democracy_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_corrupt_managed_idea
		}
		remove_ideas = {
			JAP_corrupt_managed_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_corrupt_democracy_2_idea
		}
		remove_ideas = {
			JAP_corrupt_democracy_2_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_rebirthed_democracy_idea
		}
		remove_ideas = {
			JAP_rebirthed_democracy_idea
		}
	}
}

JAP_empress_abdicate = {
	if = {
		limit = {
			has_idea = JAP_tamamo_empress_idea
		}
		remove_ideas = {
			JAP_tamamo_empress_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_miko_empress_idea
		}
		remove_ideas = {
			JAP_miko_empress_idea
		}
	}
}

JAP_kizuko_disbanded = {
	hidden_effect = {
		if = {
			limit = {
				has_character = JAP_yakumo_yukari
			}
			deactivate_advisor = JAP_yakumo_yukari
		}
		if = {
			limit = {
				has_character = JAP_matara_okina
			}
			deactivate_advisor = JAP_matara_okina
		}
		if = {
			limit = {
				has_character = JAP_ibaraki_kasen
			}
			deactivate_advisor = JAP_ibaraki_kasens
		}
	}
}

JAP_military_government_conflicts_relaxed = {
	hidden_effect = {
		JAP_unlock_all_initial_templates = yes
	}
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_idea
		}
		swap_ideas = {
			remove_idea = JAP_army_goverment_conflict_idea
			add_idea = JAP_army_goverment_conflict_relaxed_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_2_idea
		}
		swap_ideas = {
			remove_idea = JAP_army_goverment_conflict_2_idea
			add_idea = JAP_army_goverment_conflict_relaxed_idea
		}
	}
}

JAP_military_government_conflicts_intensified = {
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_idea
		}
		swap_ideas = {
			remove_idea = JAP_army_goverment_conflict_idea
			add_idea = JAP_army_goverment_conflict_2_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_relaxed_idea
		}
		swap_ideas = {
			remove_idea = JAP_army_goverment_conflict_relaxed_idea
			add_idea = JAP_army_goverment_conflict_2_idea
		}
	}
}

JAP_military_government_conflicts_ends = {
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_relaxed_idea
		}
		remove_ideas = {
			JAP_army_goverment_conflict_relaxed_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_idea
		}
		remove_ideas = {
			JAP_army_goverment_conflict_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_army_goverment_conflict_2_idea
		}
		remove_ideas = {
			JAP_army_goverment_conflict_2_idea
		}
	}
	hidden_effect = {
		JAP_unlock_all_initial_templates = yes
	}
}

JAP_set_party_name_reorganized = {
	## Classical Liberal
	if = {
		limit = {
			OR = {
				has_country_leader = {
					character = JAP_tohsaka_rin
					ruling_only = yes
				}
				has_country_leader = {
					character = JAP_ryougi_shiki
					ruling_only = yes
				}
				has_country_leader = {
					character = JAP_aozaki_touko
					ruling_only = yes
				}
				has_country_leader = {
					character = JAP_adashino_hishiri
					ruling_only = yes
				}
				has_country_leader = {
					character = JAP_syokuhou_misaki
					ruling_only = yes
				}
				has_country_leader = {
					name = "Kongou Mitsuko"
					ruling_only = yes
				}
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = JAP_democratic_party_Jiyutou
			name = JAP_democratic_party_Jiyutou
		}
	}
	## Social Liberal
	if = {
		limit = {
			OR = {
				has_country_leader = {
					name = "Kirisame Marisa"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Syameimaru Aya"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Aozaki Aoko"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Touno Akiha"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Sajyou Ayaka"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Sakamoto Ryoma"
					ruling_only = yes
				}
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = JAP_democratic_party_Shinpotou
			name = JAP_democratic_party_Shinpotou
		}
	}
	## Conservatives
	if = {
		limit = {
			OR = {
				has_country_leader = {
					name = "Tohsaka Tokiomi"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Yakumo Ran"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Shikieiki Yamaxanadu"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Kuonji Alice"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Moriya Suwako"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Saigyouji Yuyuko"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Shoukaku"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Zuikaku"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Sajyou Manaka"
					ruling_only = yes
				}
				AND = {
					has_country_leader = {
						name = "Hakurei Reimu"
						ruling_only = yes
					}
					JAP_is_conservatives_trigger = yes
				}
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = JAP_democratic_party_Kyodoutou
			name = JAP_democratic_party_Kyodoutou
		}
	}
	if = {
		limit = {
			OR = {
				has_country_leader = {
					character = JAP_hijiri_byakuren
					ruling_only = yes
				}
				has_country_leader = {
					name = "Emiya Shiro"
					ruling_only = yes
				}
				AND = {
					JAP_is_liberals_trigger = yes
					has_country_leader = {
						name = "Hakurei Reimu"
						ruling_only = yes
					}
				}
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = JAP_democratic_party_Shakai_Seigitou
			name = JAP_democratic_party_Shakai_Seigitou
		}
	}
}

JAP_set_party_name = {
	## Classical Liberal
	if = {
		limit = {
			OR = {
				has_country_leader = {
					name = "Ryougi Shiki"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Aozaki Touko"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Adashino Hishiri"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Syokuhou Misaki"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Kongou Mitsuko"
					ruling_only = yes
				}
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = JAP_democratic_party_Rikken_Minseitou
			name = JAP_democratic_party_Rikken_Minseitou
		}
	}
	## Social Liberal
	if = {
		limit = {
			OR = {
				has_country_leader = {
					name = "Kirisame Marisa"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Syameimaru Aya"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Aozaki Aoko"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Touno Akiha"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Sajyou Ayaka"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Sakamoto Ryoma"
					ruling_only = yes
				}
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = JAP_democratic_party_Rikken_Minseitou
			name = JAP_democratic_party_Rikken_Minseitou
		}
	}
	## Conservatives
	if = {
		limit = {
			OR = {
				has_country_leader = {
					name = "Tohsaka Rin"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Tohsaka Tokiomi"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Yakumo Ran"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Shikieiki Yamaxanadu"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Kuonji Alice"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Yakumo Ran"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Moriya Suwako"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Saigyouji Yuyuko"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Shoukaku"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Zuikaku"
					ruling_only = yes
				}
				has_country_leader = {
					name = "Sajyou Manaka"
					ruling_only = yes
				}
				AND = {
					has_country_leader = {
						name = "Hakurei Reimu"
						ruling_only = yes
					}
					JAP_is_conservatives_trigger = yes
				}
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = JAP_democratic_party_Rikken_Seiyukai
			name = JAP_democratic_party_Rikken_Seiyukai
		}
	}
	if = {
		limit = {
			OR = {
				has_country_leader = {
					character = JAP_hijiri_byakuren
					ruling_only = yes
				}
				has_country_leader = {
					character = JAP_emiya_shiro
					ruling_only = yes
				}
				AND = {
					JAP_is_liberals_trigger = yes
					has_country_leader = {
						character = JAP_hakurei_reimu
						ruling_only = yes
					}
				}
			}
		}
		set_party_name = {
			ideology = democratic
			long_name = JAP_democratic_party_Shakai_Taishutou
			name = JAP_democratic_party_Shakai_Taishutou
		}
	}
}

### Rename the party when election or leader changes!
JAP_set_party_name_global = {
	if = {
		limit = {
			has_completed_focus = JAP_reorganize_parties
		}
		JAP_set_party_name_reorganized = yes
	}
	if = {
		limit = {
			NOT = {
				has_completed_focus = JAP_reorganize_parties
			}
		}
		JAP_set_party_name = yes
	}
}

JAP_democracy_ends = {
	if = {
		limit = {
			has_idea = JAP_corrupt_democracy_idea
		}
		remove_ideas = {
			JAP_corrupt_democracy_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_corrupt_managed_idea
		}
		remove_ideas = {
			JAP_corrupt_managed_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_corrupt_democracy_2_idea
		}
		remove_ideas = {
			JAP_corrupt_democracy_2_idea
		}
	}
	if = {
		limit = {
			has_idea = JAP_rebirthed_democracy_idea
		}
		remove_ideas = {
			JAP_rebirthed_democracy_idea
		}
	}
	custom_effect_tooltip = JAP_democracy_ends_tt
}

JAP_civil_war_start = {
	hidden_effect = {
		set_country_flag = jap_civil_war_started
	}
	add_timed_idea = {
		idea = JAP_political_instability
		days = 400
	}
	JAP_military_government_conflicts_ends = yes
	if = {
		limit = {
			check_variable = {
				ROOT.liberals_army_influence < 50
			}
			is_ai = no
		}
		start_civil_war = {
			ruling_party = democratic
			ideology = neutrality
			size = 0.6
			keep_all_characters = yes
		}
	}
	if = {
		limit = {
			check_variable = {
				ROOT.liberals_army_influence > 49
			}
			check_variable = {
				ROOT.liberals_army_influence < 70
			}
			is_ai = no
		}
		start_civil_war = {
			ruling_party = democratic
			ideology = neutrality
			size = 0.4
		}
	}
	if = {
		limit = {
			check_variable = {
				ROOT.liberals_army_influence > 69
			}
			check_variable = {
				ROOT.liberals_army_influence < 85
			}
			is_ai = no
		}
		start_civil_war = {
			ruling_party = democratic
			ideology = neutrality
			size = 0.3
		}
	}
	if = {
		limit = {
			OR = {
				AND = {
					check_variable = {
						ROOT.liberals_army_influence > 84
					}
				}
				is_ai = yes
			}
		}
		start_civil_war = {
			ruling_party = democratic
			ideology = neutrality
			size = 0.2
		}
	}
	JAP_create_democratic_leaders = yes
	hidden_effect = {
		random_other_country = {
			limit = {
				original_tag = JAP
				has_government = neutrality
			}
			save_event_target_as = jap_civil_war
			set_popularities = {
				neutrality = 70
				fascism = 20
				communism = 10
			}
			every_character = {
				limit = {
					is_country_leader = no
				}
				set_nationality = JAP
			}
		}
	}
	BEY = {
		transfer_state = 716
		transfer_state = 717
		transfer_state = 328
	}
	hidden_effect = {
		JAP = {
			set_popularities = {
				democratic = 85
				neutrality = 5
				communism = 10
			}
			every_character = {
				limit = {
					OR = {
						is_character = JAP_oda_nobunaga
						is_character = JAP_hijikato_toshizo
						is_character = JAP_okita_souji
						is_character = JAP_azai_chacha
						is_character = JAP_yakumo_ran
						is_character = JAP_fuma_kotaro
						is_character = JAP_kiyohime
						is_character = JAP_kato_danzo
						is_character = JAP_musahibo_benkei
						is_character = JAP_beni_enma
						is_character = JAP_yakumo_yukari
					}
				}
				set_nationality = event_target:jap_civil_war
			}
			set_country_flag = jap_oda_nobunaga_disabled
			set_country_flag = jap_hijikato_toshizo_disabled
			set_country_flag = jap_okita_souji_disabled
			set_country_flag = jap_matara_okina_disabled
			set_country_flag = jap_yukari_yakumo_disabled
		}
		JAP = {
			if = {
				limit = {
					NOT = {
						has_country_flag = persuade_tomoe_gozen
					}
					is_ai = no
				}
				every_character = {
					limit = {
						OR = {
							is_character = JAP_tomoe_gozen
						}
					}
					set_nationality = event_target:jap_civil_war
				}
				set_country_flag = jap_tomoe_gozen_disabled
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = persuade_yogyu_munenori
					}
					is_ai = no
				}
				every_character = {
					limit = {
						OR = {
							is_character = JAP_yogyu_munenori
						}
					}
					set_nationality = event_target:jap_civil_war
				}
				set_country_flag = jap_yogyu_munenori_disabled
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = persuade_miyamoto_musashi
					}
					is_ai = no
				}
				every_character = {
					limit = {
						OR = {
							is_character = JAP_miyamoto_musashi
						}
					}
					set_nationality = event_target:jap_civil_war
				}
				set_country_flag = jap_miyamoto_musashi_disabled
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = persuade_fujiwara_no_mokou
					}
					is_ai = no
				}
				every_character = {
					limit = {
						OR = {
							is_character = JAP_fujiwara_no_mokou
							is_character = JAP_minamoto_no_raiko
							is_character = JAP_sakata_kintoki
							is_character = JAP_minamoto_no_yoshitsune
							is_character = JAP_fujiwara_chika
						}
					}
					set_nationality = event_target:jap_civil_war
				}
				set_country_flag = jap_fujiwara_no_mokou_disabled
				set_country_flag = jap_ushiwakamaru_disabled
				set_country_flag = jap_sakata_kintoki_disabled
				set_country_flag = jap_minamoto_no_raiko_disabled
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = persuade_ysaka_kanako
					}
					is_ai = no
				}
				every_character = {
					limit = {
						OR = {
							is_character = JAP_yasaka_kanako
							is_character = JAP_moriya_suwako
						}
					}
					set_nationality = event_target:jap_civil_war
				}
				set_country_flag = jap_yasaka_kanako_disabled
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = persuade_hinanawi_tenshi
					}
					is_ai = no
				}
				every_character = {
					limit = {
						OR = {
							is_character = JAP_hinanawi_tenshi
						}
					}
					set_nationality = event_target:jap_civil_war
				}
				set_country_flag = jap_hinanawi_tenshi_disabled
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = persuade_saigyouji_yuyuko
					}
					is_ai = no
				}
				every_character = {
					limit = {
						OR = {
							is_character = JAP_saigyouji_yuyuko
							is_character = JAP_konpaku_youmu
						}
					}
					set_nationality = event_target:jap_civil_war
				}
			}
			activate_advisor = JAP_nagao_kagetora
			activate_advisor = JAP_hijiri_byakuren
		}
	}
}

JAP_switch_to_liberals = {
	if = {
		limit = {
			is_faction_leader = yes
		}
		set_faction_name = JAP_west_pacific_treaty_organization
	}
	if = {
		limit = {
			JAP_is_conservatives_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_conservatives_idea
			add_idea = JAP_liberals_idea
		}
	}
	if = {
		limit = {
			JAP_is_reformist_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_reformists_idea
			add_idea = JAP_liberals_idea
		}
	}
	if = {
		limit = {
			JAP_is_toseiha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_toseiha_idea
			add_idea = JAP_liberals_idea
		}
	}
	if = {
		limit = {
			JAP_is_kodoha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_kodoha_idea
			add_idea = JAP_liberals_idea
		}
	}
	if = {
		limit = {
			JAP_is_revolutionaries_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_revolutionaries_idea
			add_idea = JAP_liberals_idea
		}
	}
	if = {
		limit = {
			JAP_is_nobu_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_nobu_idea
			add_idea = JAP_liberals_idea
		}
	}
}

JAP_switch_to_conservatives = {
	if = {
		limit = {
			JAP_is_liberals_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_liberals_idea
			add_idea = JAP_conservatives_idea
		}
	}
	if = {
		limit = {
			JAP_is_reformist_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_reformists_idea
			add_idea = JAP_conservatives_idea
		}
	}
	if = {
		limit = {
			JAP_is_toseiha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_toseiha_idea
			add_idea = JAP_conservatives_idea
		}
	}
	if = {
		limit = {
			JAP_is_kodoha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_kodoha_idea
			add_idea = JAP_conservatives_idea
		}
	}
	if = {
		limit = {
			JAP_is_revolutionaries_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_revolutionaries_idea
			add_idea = JAP_conservatives_idea
		}
	}
	if = {
		limit = {
			JAP_is_nobu_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_nobu_idea
			add_idea = JAP_conservatives_idea
		}
	}
}

JAP_switch_to_reformist = {
	if = {
		limit = {
			JAP_is_liberals_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_liberals_idea
			add_idea = JAP_reformists_idea
		}
	}
	if = {
		limit = {
			JAP_is_conservatives_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_conservatives_idea
			add_idea = JAP_reformists_idea
		}
	}
	if = {
		limit = {
			JAP_is_toseiha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_toseiha_idea
			add_idea = JAP_reformists_idea
		}
	}
	if = {
		limit = {
			JAP_is_kodoha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_kodoha_idea
			add_idea = JAP_reformists_idea
		}
	}
	if = {
		limit = {
			JAP_is_revolutionaries_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_revolutionaries_idea
			add_idea = JAP_reformists_idea
		}
	}
	if = {
		limit = {
			JAP_is_nobu_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_nobu_idea
			add_idea = JAP_reformists_idea
		}
	}
}

JAP_switch_to_toseiha = {
	set_party_name = {
		ideology = neutrality
		long_name = JAP_neutrality_party_youkusan
		name = JAP_neutrality_party_youkusan
	}
	JAP_military_government_conflicts_ends = yes
	add_country_leader_role = {
		character = JAP_yakumo_yukari
		promote_leader = yes
		country_leader = {
			ideology = stratocracy
			traits = {
				yukari_master
				imperial_connections
			}
		}
	}
	JAP_democracy_ends = yes
	set_politics = {
		ruling_party = neutrality
		elections_allowed = no
	}
	if = {
		limit = {
			JAP_is_liberals_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_liberals_idea
			add_idea = JAP_toseiha_idea
		}
	}
	if = {
		limit = {
			JAP_is_conservatives_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_conservatives_idea
			add_idea = JAP_toseiha_idea
		}
	}
	if = {
		limit = {
			JAP_is_reformist_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_reformists_idea
			add_idea = JAP_toseiha_idea
		}
	}
	if = {
		limit = {
			JAP_is_kodoha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_kodoha_idea
			add_idea = JAP_toseiha_idea
		}
	}
	if = {
		limit = {
			JAP_is_revolutionaries_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_revolutionaries_idea
			add_idea = JAP_toseiha_idea
		}
	}
	if = {
		limit = {
			JAP_is_nobu_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_nobu_idea
			add_idea = JAP_toseiha_idea
		}
	}
}

JAP_switch_to_kodoha = {
	set_party_name = {
		ideology = fascism
		long_name = JAP_fascism_party_kodaha
		name = JAP_fascism_party_kodaha
	}
	JAP_democracy_ends = yes
	JAP_military_government_conflicts_ends = yes
	set_politics = {
		ruling_party = fascism
		elections_allowed = no
	}
	## Cosmetic Tag
	add_country_leader_role = {
		character = JAP_matara_okina
		promote_leader = yes
		country_leader = {
			ideology = rexism
			traits = {
				imperial_connections
			}
		}
	}
	if = {
		limit = {
			JAP_is_liberals_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_liberals_idea
			add_idea = JAP_kodoha_idea
		}
	}
	if = {
		limit = {
			JAP_is_conservatives_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_conservatives_idea
			add_idea = JAP_kodoha_idea
		}
	}
	if = {
		limit = {
			JAP_is_reformist_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_reformists_idea
			add_idea = JAP_kodoha_idea
		}
	}
	if = {
		limit = {
			JAP_is_toseiha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_toseiha_idea
			add_idea = JAP_kodoha_idea
		}
	}
	if = {
		limit = {
			JAP_is_revolutionaries_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_revolutionaries_idea
			add_idea = JAP_kodoha_idea
		}
	}
	if = {
		limit = {
			JAP_is_nobu_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_nobu_idea
			add_idea = JAP_kodoha_idea
		}
	}
}

JAP_switch_to_revolutionaries = {
	set_party_name = {
		ideology = fascism
		long_name = JAP_fascism_party_revolution
		name = JAP_fascism_party_revolution
	}
	## Cosmetic Tag
	JAP_democracy_ends = yes
	JAP_military_government_conflicts_ends = yes
	set_politics = {
		ruling_party = fascism
		elections_allowed = no
	}
	add_country_leader_role = {
		character = JAP_okita_souji_alter
		promote_leader = yes
		country_leader = {
			ideology = valkism
			traits = {
				Boundlessness
			}
			desc = POLITICS_OKITA_ALTER_DESC
		}
	}
	if = {
		limit = {
			JAP_is_liberals_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_liberals_idea
			add_idea = JAP_revolutionaries_idea
		}
	}
	if = {
		limit = {
			JAP_is_conservatives_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_conservatives_idea
			add_idea = JAP_revolutionaries_idea
		}
	}
	if = {
		limit = {
			JAP_is_reformist_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_reformists_idea
			add_idea = JAP_revolutionaries_idea
		}
	}
	if = {
		limit = {
			JAP_is_toseiha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_toseiha_idea
			add_idea = JAP_revolutionaries_idea
		}
	}
	if = {
		limit = {
			JAP_is_kodoha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_kodoha_idea
			add_idea = JAP_revolutionaries_idea
		}
	}
	if = {
		limit = {
			JAP_is_nobu_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_nobu_idea
			add_idea = JAP_revolutionaries_idea
		}
	}
}

JAP_switch_to_nobu = {
	set_party_name = {
		ideology = neutrality
		long_name = JAP_neutrality_party_oda
		name = JAP_neutrality_party_oda
	}
	set_party_name = {
		ideology = fascism
		long_name = JAP_neutrality_party_oda
		name = JAP_neutrality_party_oda
	}
	set_cosmetic_tag = JAP_Nobu
	JAP_democracy_ends = yes
	JAP_military_government_conflicts_ends = yes
	if = {
		limit = {
			JAP_is_liberals_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_liberals_idea
			add_idea = JAP_nobu_idea
		}
	}
	if = {
		limit = {
			JAP_is_conservatives_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_conservatives_idea
			add_idea = JAP_nobu_idea
		}
	}
	if = {
		limit = {
			JAP_is_reformist_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_reformists_idea
			add_idea = JAP_nobu_idea
		}
	}
	if = {
		limit = {
			JAP_is_toseiha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_toseiha_idea
			add_idea = JAP_nobu_idea
		}
	}
	if = {
		limit = {
			JAP_is_kodoha_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_kodoha_idea
			add_idea = JAP_nobu_idea
		}
	}
	if = {
		limit = {
			JAP_is_revolutionaries_trigger = yes
		}
		swap_ideas = {
			remove_idea = JAP_revolutionaries_idea
			add_idea = JAP_nobu_idea
		}
	}
}

JAP_skip_next_election = {
	custom_effect_tooltip = JAP_net_election_skip_tt
	hidden_effect = {
		if = {
			limit = {
				date < 1936.3.1
			}
			set_country_flag = JAP_skip_1936_election
		}
		if = {
			limit = {
				date < 1939.3.1
				date > 1936.3.1
			}
			set_country_flag = JAP_skip_1939_election
		}
		if = {
			limit = {
				date < 1942.3.1
				date > 1939.3.1
			}
			set_country_flag = JAP_skip_1942_election
		}
		if = {
			limit = {
				date < 1945.3.1
				date > 1942.3.1
			}
			set_country_flag = JAP_skip_1945_election
		}
		if = {
			limit = {
				date < 1948.3.1
				date > 1945.3.1
			}
			set_country_flag = JAP_skip_1948_election
		}
	}
}

JAP_man_railway_reestablished = {
	if = {
		limit = {
			MAN = {
				is_subject_of = JAP
			}
			MAN = {
				OR = {
					NOT = {
						has_idea = idea_man_railway
					}
					has_idea = idea_man_railway_destoryed
				}
			}
		}
		if = {
			limit = {
				MAN = {
					has_idea = idea_man_railway_destoryed
				}
			}
			MAN = {
				remove_ideas = {
					idea_man_railway_destoryed
				}
			}
		}
		MAN = {
			add_ideas = {
				idea_man_railway
			}
		}
	}
	if = {
		limit = {
			JAP = {
				has_idea = idea_man_railway_end
			}
		}
		JAP = {
			remove_ideas = idea_man_railway_end
		}
	}
	if = {
		limit = {
			JAP = {
				NOT = {
					has_idea = idea_man_railway_benefit
				}
			}
		}
		JAP = {
			add_ideas = {
				idea_man_railway_benefit
			}
		}
	}
}

JAP_man_railway_destroyed = {
	if = {
		limit = {
			MAN = {
				has_idea = idea_man_railway
			}
		}
		MAN = {
			remove_ideas = idea_man_railway
			add_timed_idea = {
				idea = idea_man_railway_destoryed
				days = 180
			}
		}
	}
	if = {
		limit = {
			CHI = {
				has_idea = idea_man_railway
			}
		}
		CHI = {
			remove_ideas = idea_man_railway
			add_timed_idea = {
				idea = idea_man_railway_destoryed
				days = 180
			}
		}
	}
	if = {
		limit = {
			JAP = {
				has_idea = idea_man_railway_benefit
			}
		}
		JAP = {
			remove_ideas = idea_man_railway_benefit
			add_timed_idea = {
				idea = idea_man_railway_end
				days = 180
			}
		}
	}
}

JAP_interservice_switch_to_army_dominant = {
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_strengthened
			add_idea = JAP_interservice_rivalry_army_dominant
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_balanced
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_balanced
			add_idea = JAP_interservice_rivalry_army_dominant
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_strengthened
			add_idea = JAP_interservice_rivalry_army_dominant
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_dominant
			add_idea = JAP_interservice_rivalry_army_dominant
		}
	}
}

JAP_interservice_switch_to_army_strengthened = {
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_dominant
			add_idea = JAP_interservice_rivalry_army_strengthened
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_balanced
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_balanced
			add_idea = JAP_interservice_rivalry_army_strengthened
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_strengthened
			add_idea = JAP_interservice_rivalry_army_strengthened
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_dominant
			add_idea = JAP_interservice_rivalry_army_strengthened
		}
	}
}

JAP_interservice_switch_to_balanced = {
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_dominant
			add_idea = JAP_interservice_rivalry_balanced
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_strengthened
			add_idea = JAP_interservice_rivalry_balanced
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_strengthened
			add_idea = JAP_interservice_rivalry_balanced
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_dominant
			add_idea = JAP_interservice_rivalry_balanced
		}
	}
}

JAP_interservice_switch_to_navy_strengthened = {
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_dominant
			add_idea = JAP_interservice_rivalry_navy_strengthened
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_strengthened
			add_idea = JAP_interservice_rivalry_navy_strengthened
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_balanced
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_balanced
			add_idea = JAP_interservice_rivalry_navy_strengthened
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_dominant
			add_idea = JAP_interservice_rivalry_navy_strengthened
		}
	}
}

JAP_interservice_switch_to_navy_dominant = {
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_dominant
			add_idea = JAP_interservice_rivalry_navy_dominant
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_strengthened
			add_idea = JAP_interservice_rivalry_navy_dominant
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_balanced
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_balanced
			add_idea = JAP_interservice_rivalry_navy_dominant
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_strengthened
			add_idea = JAP_interservice_rivalry_navy_dominant
		}
	}
}

JAP_army_focus_activated = {
	custom_effect_tooltip = JAP_army_influence_increase_slightly
	hidden_effect = {
		add_to_variable = {
			ROOT.IJA_influence = 1
		}
	}
	custom_effect_tooltip = JAP_navy_influence_decrease_slightly
	hidden_effect = {
		subtract_from_variable = {
			ROOT.IJN_influence = 1
		}
	}
}

JAP_navy_focus_activated = {
	custom_effect_tooltip = JAP_army_influence_decrease_slightly
	hidden_effect = {
		add_to_variable = {
			ROOT.IJN_influence = 1
		}
	}
	custom_effect_tooltip = JAP_navy_influence_increase_slightly
	hidden_effect = {
		subtract_from_variable = {
			ROOT.IJA_influence = 1
		}
	}
}

JAP_navy_increase_1 = {
	custom_effect_tooltip = JAP_navy_influence_increase_slightly
	hidden_effect = {
		add_to_variable = {
			ROOT.IJN_influence = 1
		}
	}
}

JAP_navy_decrease_2 = {
	custom_effect_tooltip = JAP_navy_influence_decrease_2
	hidden_effect = {
		subtract_from_variable = {
			ROOT.IJN_influence = 2
		}
	}
}

JAP_interDiff_calculation = {
	set_variable = {
		ROOT.InterDiff = ROOT.IJA_influence
	}
	subtract_from_variable = {
		ROOT.InterDiff = ROOT.IJN_influence
	}
	clamp_variable = {
		var = ROOT.IJA_influence
		min = 0
		max = 20
	}
	clamp_variable = {
		var = ROOT.IJN_influence
		min = 0
		max = 20
	}
}

JAP_interservice_swap = {
	if = {
		limit = {
			check_variable = {
				ROOT.InterDiff > 4
			}
			NOT = {
				has_idea = JAP_interservice_rivalry_army_dominant
			}
			NOT = {
				has_country_flag = JAP_interservice_triggered
			}
		}
		country_event = jap_elective.22
	}
	if = {
		limit = {
			check_variable = {
				ROOT.InterDiff < 5
			}
			check_variable = {
				ROOT.InterDiff > 2
			}
			NOT = {
				has_idea = JAP_interservice_rivalry_army_strengthened
			}
			NOT = {
				has_country_flag = JAP_interservice_triggered
			}
		}
		country_event = {
			id = jap_elective.23
		}
	}
	if = {
		limit = {
			check_variable = {
				ROOT.InterDiff < 3
			}
			check_variable = {
				ROOT.InterDiff > -3
			}
			NOT = {
				has_idea = JAP_interservice_rivalry_balanced
			}
			NOT = {
				has_country_flag = JAP_interservice_triggered
			}
		}
		country_event = {
			id = jap_elective.24
		}
	}
	if = {
		limit = {
			check_variable = {
				ROOT.InterDiff < -2
			}
			check_variable = {
				ROOT.InterDiff > -5
			}
			NOT = {
				has_idea = JAP_interservice_rivalry_navy_strengthened
			}
			NOT = {
				has_country_flag = JAP_interservice_triggered
			}
		}
		country_event = {
			id = jap_elective.25
		}
	}
	if = {
		limit = {
			check_variable = {
				ROOT.InterDiff < -4
			}
			NOT = {
				has_idea = JAP_interservice_rivalry_navy_dominant
			}
			NOT = {
				has_country_flag = JAP_interservice_triggered
			}
		}
		country_event = {
			id = jap_elective.26
		}
	}
}

CHI_message_to_warlords_about_greater_asian_alliance = {
	if = {
		limit = {
			YUN = {
				NOT = {
					is_in_faction_with = JAP
				}
				NOT = {
					is_subject_of = JAP
				}
				NOT = {
					has_non_aggression_pact_with = JAP
				}
			}
		}
		YUN = {
			country_event = {
				id = jap_diplo.12
				hours = 10
			}
		}
	}
	if = {
		limit = {
			XSM = {
				NOT = {
					is_in_faction_with = JAP
				}
				NOT = {
					is_subject_of = JAP
				}
				NOT = {
					has_non_aggression_pact_with = JAP
				}
			}
		}
		XSM = {
			country_event = {
				id = jap_diplo.12
				hours = 10
			}
		}
	}
	if = {
		limit = {
			SIK = {
				NOT = {
					is_in_faction_with = JAP
				}
				NOT = {
					is_subject_of = JAP
				}
				NOT = {
					has_non_aggression_pact_with = JAP
				}
			}
		}
		SIK = {
			country_event = {
				id = jap_diplo.12
				hours = 10
			}
		}
	}
	if = {
		limit = {
			GXC = {
				NOT = {
					is_in_faction_with = JAP
				}
				NOT = {
					is_subject_of = JAP
				}
				NOT = {
					has_non_aggression_pact_with = JAP
				}
			}
		}
		GXC = {
			country_event = {
				id = jap_diplo.12
				hours = 10
			}
		}
	}
}

JAP_interservice_rivalry_towards_army = {
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_strengthened
			add_idea = JAP_interservice_rivalry_army_dominant
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_balanced
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_balanced
			add_idea = JAP_interservice_rivalry_army_strengthened
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_strengthened
			add_idea = JAP_interservice_rivalry_balanced
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_dominant
			add_idea = JAP_interservice_rivalry_navy_strengthened
		}
	}
}

JAP_interservice_rivalry_towards_navy = {
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_navy_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_navy_strengthened
			add_idea = JAP_interservice_rivalry_navy_dominant
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_balanced
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_balanced
			add_idea = JAP_interservice_rivalry_navy_strengthened
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_strengthened
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_strengthened
			add_idea = JAP_interservice_rivalry_balanced
		}
	}
	if = {
		limit = {
			has_idea = JAP_interservice_rivalry_army_dominant
		}
		swap_ideas = {
			remove_idea = JAP_interservice_rivalry_army_dominant
			add_idea = JAP_interservice_rivalry_army_strengthened
		}
	}
}

JAP_intervene_in_china_war = {
	if = {
		limit = {
			CHI = {
				is_exist_and_peace_and_not_ally_off_ROOT = yes
			}
		}
		declare_war_on = {
			type = annex_everything
			target = CHI
		}
	}
	if = {
		limit = {
			BEY = {
				is_exist_and_peace_and_not_ally_off_ROOT = yes
			}
		}
		declare_war_on = {
			type = annex_everything
			target = BEY
		}
	}
	if = {
		limit = {
			GXC = {
				is_exist_and_peace_and_not_ally_off_ROOT = yes
			}
		}
		declare_war_on = {
			type = annex_everything
			target = GXC
		}
	}
	if = {
		limit = {
			XSM = {
				is_exist_and_peace_and_not_ally_off_ROOT = yes
			}
		}
		declare_war_on = {
			type = annex_everything
			target = XSM
		}
	}
	if = {
		limit = {
			GDC = {
				is_exist_and_peace_and_not_ally_off_ROOT = yes
			}
		}
		declare_war_on = {
			type = annex_everything
			target = GDC
		}
	}
	if = {
		limit = {
			SIK = {
				is_exist_and_peace_and_not_ally_off_ROOT = yes
			}
			NOT = {
				SIK = {
					is_guaranteed_by = SOV
				}
			}
		}
		declare_war_on = {
			type = annex_everything
			target = SIK
		}
	}
}

JAP_new_navy_estimates_effect = {
	if = {
		limit = {
			NOT = {
				has_tech = improved_ship_hull_carrier
			}
		}
		hidden_effect = {
			set_technology = {
				improved_ship_hull_carrier = 1
			}
		}
	}
	if = {
		limit = {
			is_ai = no
		}
		create_equipment_variant = {
			name = "Shokaku Class"
			type = ship_hull_carrier_2
			name_group = JAP_CV_HISTORICAL
			parent_version = 0
			modules = {
				fixed_ship_deck_slot_1 = ship_deck_space
				fixed_ship_deck_slot_2 = ship_deck_space
				fixed_ship_anti_air_slot = ship_anti_air_2
				fixed_ship_radar_slot = ship_radar_1
				fixed_ship_engine_slot = carrier_ship_engine_3
				fixed_ship_secondaries_slot = ship_secondaries_2
				front_1_custom_slot = ship_deck_space
				mid_1_custom_slot = ship_deck_space
			}
		}
	}
	if = {
		limit = {
			is_ai = yes
		}
		create_equipment_variant = {
			name = "Shokaku Class"
			type = ship_hull_carrier_2
			name_group = JAP_CV_HISTORICAL
			parent_version = 0
			modules = {
				fixed_ship_deck_slot_1 = ship_deck_space
				fixed_ship_deck_slot_2 = ship_deck_space
				fixed_ship_anti_air_slot = ship_anti_air_3
				fixed_ship_radar_slot = ship_radar_2
				fixed_ship_engine_slot = carrier_ship_engine_3
				fixed_ship_secondaries_slot = dp_ship_secondaries_3
				front_1_custom_slot = ship_deck_space
				mid_1_custom_slot = ship_deck_space
				mid_2_custom_slot = ship_deck_space
			}
		}
	}
	if = {
		limit = {
			is_ai = no
		}
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_2
				creator = "JAP"
				version_name = "Shokaku Class"
			}
			name = "Shokaku"
			requested_factories = 1
			progress = 0.5
			amount = 1
		}
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_2
				creator = "JAP"
				version_name = "Shokaku Class"
			}
			name = "Zuikaku"
			requested_factories = 1
			progress = 0.5
			amount = 1
		}
	}
	if = {
		limit = {
			is_ai = yes
		}
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_2
				creator = "JAP"
				version_name = "Shokaku Class"
			}
			name = "Shokaku"
			requested_factories = 1
			progress = 0.95
			amount = 1
		}
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_2
				creator = "JAP"
				version_name = "Shokaku Class"
			}
			name = "Zuikaku"
			requested_factories = 1
			progress = 0.95
			amount = 1
		}
	}
}

###Setup Puppets
##Indochina
JAP_establish_indochina_alliance_effect = {
	INA = {
		every_state = {
			limit = {
				OR = {
					is_core_of = VIN
					is_core_of = LAO
					is_core_of = CAM
				}
			}
			remove_claim_and_add_core_and_transfer_of_PREV = yes
		}
	}
	##
	if = {
		limit = {
			SIA = {
				is_ally_with = JAP
			}
		}
		SIA = {
			882 = {
				remove_claim_and_add_core_and_transfer_of_PREV = yes
			}
			825 = {
				remove_claim_and_add_core_and_transfer_of_PREV = yes
			}
		}
	}
	JAP = {
		puppet = INA
	}
	INA = {
		##TODO
		create_country_leader = {
			name = "Haniyasushin Keiki"
			picture = "gfx/leaders/INA/Portrait_Haniyasushin_Keiki.png"
			ideology = classical_fascism
		}
		create_country_leader = {
			name = "Haniyasushin Keiki"
			picture = "gfx/leaders/INA/Portrait_Haniyasushin_Keiki.png"
			ideology = authoritarianism
		}
		create_country_leader = {
			name = "Haniyasushin Keiki"
			picture = "gfx/leaders/INA/Portrait_Haniyasushin_Keiki.png"
			ideology = social_democracy
		}
		create_country_leader = {
			name = "Haniyasushin Keiki"
			picture = "gfx/leaders/INA/Portrait_Haniyasushin_Keiki.png"
			ideology = syndicalism
		}
	}
	INA = {
		set_popularities = {
			neutrality = 40
			fascism = 19
			communism = 1
			democratic = 40
		}
		set_politics = {
			ruling_party = neutrality
			last_election = "1933.3.1"
			election_frequency = 36
			elections_allowed = no
		}
	}
}

##Shadong
JAP_establish_shangqing_effect = {
	every_state = {
		if = {
			limit = {
				is_shangqing_states = yes
			}
			transfer_state_to = SDC
		}
	}
	JAP = {
		puppet = SDC
	}
	SDC = {
		set_cosmetic_tag = SDC_TEN
	}
	SDC = {
		set_popularities = {
			neutrality = 1
			fascism = 98
			communism = 1
			democratic = 0
		}
		set_politics = {
			ruling_party = fascism
			last_election = "1933.3.1"
			election_frequency = 36
			elections_allowed = no
		}
	}
}

##Indonesia
JAP_establish_independent_indonesia_effect = {
	INI = {
		every_state = {
			limit = {
				is_great_indonesia_states = yes
			}
			remove_claim_and_add_core_and_transfer_of_PREV = yes
		}
	}
	JAP = {
		336 = {
			remove_claim_and_add_core_and_transfer_of_PREV = yes
		}
		##Singapore
		puppet = INI
	}
	INI = {
		set_popularities = {
			neutrality = 40
			fascism = 58
			communism = 1
			democratic = 1
		}
		set_politics = {
			ruling_party = fascism
			last_election = "1933.3.1"
			election_frequency = 36
			elections_allowed = no
		}
	}
	if = {
		limit = {
			is_ally_with = PHI
		}
		PHI = {
			828 = {
				remove_claim_and_add_core_and_transfer_of_PREV = yes
			}
			##Sabah
		}
	}
	if = {
		limit = {
			is_ally_with = SIA
		}
		SIA = {
			751 = {
				remove_claim_and_add_core_and_transfer_of_PREV = yes
			}
			##Kelantan
			999 = {
				remove_claim_and_add_core_and_transfer_of_PREV = yes
			}
			##Kedah
		}
	}
	721 = {
		add_core_of = INI
	}
}

##Manchuria
JAP_establish_manchukuo_effect = {
	every_state = {
		if = {
			limit = {
				is_manchuria_states = yes
			}
			transfer_state_to = MAN
		}
	}
	MAN = {
		set_cosmetic_tag = MAN_Manchukuo
	}
	if = {
		limit = {
			has_country_leader = {
				character = JAP_oda_nobunaga
				ruling_only = yes
			}
		}
		##Dummy
		MAN = {
			create_country_leader = {
				name = JAP_oda_nobukatsu
				picture = GFX_Portrait_JAP_Oda_Nobukatsu
				ideology = national_populism
			}
			create_country_leader = {
				name = JAP_oda_nobukatsu
				picture = GFX_Portrait_JAP_Oda_Nobukatsu
				ideology = stratocracy
			}
		}
		else = {
			##Dummy
			MAN = {
				create_country_leader = {
					name = JAP_mitsurugi_meiya
					picture = GFX_Portrait_JAP_Mitsurugi_Meiya
					ideology = national_populism
				}
				create_country_leader = {
					name = JAP_mitsurugi_meiya
					picture = GFX_Portrait_JAP_Mitsurugi_Meiya
					ideology = stratocracy
				}
				create_country_leader = {
					name = JAP_mitsurugi_meiya
					picture = GFX_Portrait_JAP_Mitsurugi_Meiya
					ideology = conservatism
				}
			}
		}
	}
}
