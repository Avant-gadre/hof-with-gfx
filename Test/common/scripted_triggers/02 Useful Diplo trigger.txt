is_exist_and_peace_and_not_ally_off_ROOT = {
	exists = yes
	NOT = {
		has_war_with = ROOT
		is_ally_with = ROOT
	}
}

##弱约束
is_samefaction_and_exist_and_peace_off_ROOT = {
	is_in_faction = yes
	is_in_faction_with = ROOT
	exists = yes
	NOT = {
		has_war_with = ROOT
	}
	NOT = {
		any_other_country = {
			is_in_faction_with = THIS
			has_war_with = ROOT
		}
	}
}

is_independent_and_infaction_and_exist_and_peace_and_not_ally_off_ROOT = {
	is_subject = no
	is_in_faction = yes
	exists = yes
	NOT = {
		has_war_with = ROOT
	}
	NOT = {
		is_ally_with = ROOT
	}
	NOT = {
		any_other_country = {
			is_in_faction_with = THIS
			has_war_with = ROOT
		}
	}
}

##强约束
##完全独立-有阵营-存在-和平
is_independent_and_infaction_and_exist_and_peace_off_ROOT = {
	is_subject = no
	is_in_faction = yes
	exists = yes
	NOT = {
		has_war_with = ROOT
	}
	NOT = {
		any_other_country = {
			is_in_faction_with = THIS
			has_war_with = ROOT
		}
	}
}

##强约束
##完全独立-有阵营-存在-和平-民主
is_independent_and_infaction_and_exist_and_peace_and_democratic_off_ROOT = {
	is_subject = no
	is_in_faction = yes
	exists = yes
	has_government = democratic
	NOT = {
		has_war_with = ROOT
	}
	NOT = {
		any_other_country = {
			is_in_faction_with = THIS
			has_war_with = ROOT
		}
	}
}

##强约束
##完全独立-同阵营-存在-和平
is_independent_and_samefaction_and_exist_and_peace_off_ROOT = {
	is_subject = no
	is_in_faction = yes
	is_in_faction_with = ROOT
	exists = yes
	NOT = {
		has_war_with = ROOT
	}
	NOT = {
		any_other_country = {
			is_in_faction_with = THIS
			has_war_with = ROOT
		}
	}
}

##弱约束
##存在-和平
is_exist_and_peace_off_ROOT = {
	exists = yes
	NOT = {
		has_war_with = ROOT
	}
	NOT = {
		any_other_country = {
			is_in_faction_with = THIS
			has_war_with = ROOT
		}
	}
}

can_join_faction_gen = {
	is_independent_and_nofaction_and_exist_and_peace_and_not_ally_off_ROOT = yes
}

can_declare_war = {
	exists = yes
	NOT = {
		is_ally_with = ROOT
		has_war_with = ROOT
	}
}

has_ally_ties = {
	whiteline_t = yes
	ROOT = {
		NOT = {
			has_war_with = PREV
		}
	}
	THIS = {
		exists = yes
	}
	THIS = {
		is_subject = no
	}
	THIS = {
		is_in_faction_with = ROOT
	}
}

is_independent_and_nofaction_and_exist_and_peace_and_not_ally_off_ROOT = {
	is_subject = no
	is_in_faction = no
	exists = yes
	NOT = {
		has_war_with = ROOT
		is_ally_with = ROOT
		any_other_country = {
			is_in_faction_with = THIS
			has_war_with = ROOT
		}
	}
}

valid_state_for_spawning_friendly_unit = {
	is_in_home_area = yes
	impassable = no
}

is_valid_peace_target = {
	is_subject = no
	OR = {
		is_in_faction = no
		is_faction_leader = yes
	}
}

is_owned_by_ROOT_or_ally = {
	owner = {
		is_ally_with = ROOT
	}
}

all_enemy_country_workaround_trigger = {
	NOT = {
		any_enemy_country = {
			NOT = {
				has_war_with = THIS
			}
		}
	}
}

any_enemy_has_war_with_THIS = {
	##任意敌人和他交战
	NOT = {
		any_enemy_country = {
			NOT = {
				has_war_with = THIS
			}
		}
	}
}

can_invite_join_faction = {
	exists = yes
	has_capitulated = no
	is_subject = no
	NOT = {
		has_war_with = ROOT
	}
	OR = {
		AND = {
			is_faction_leader = yes
			NOT = {
				any_other_country = {
					is_in_faction_with = PREV
				}
			}
		}
		is_in_faction = no
	}
	ROOT = {
		NOT = {
			any_enemy_country = {
				NOT = {
					has_war_with = PREV
				}
			}
		}
	}
}

can_release_FROM = {
	OR = {
		exists = no
		is_subject_of = ROOT
	}
	any_core_state = {
		is_controlled_by_ROOT_or_ally = yes
	}
}
