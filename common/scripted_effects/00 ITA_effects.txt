ITA_tyrant_level_down = {
	if = {
		limit = {
			has_idea = ITA_tyrant_1
		}
		swap_ideas = {
			remove_idea = ITA_tyrant_1
			add_idea = ITA_tyrant_2
		}
	}
	else_if = {
		limit = {
			has_idea = ITA_tyrant_2
		}
		swap_ideas = {
			remove_idea = ITA_tyrant_2
			add_idea = ITA_tyrant_3
		}
	}
	else_if = {
		limit = {
			has_idea = ITA_tyrant_3
		}
		swap_ideas = {
			remove_idea = ITA_tyrant_3
			add_idea = ITA_tyrant_4
		}
	}
	else_if = {
		limit = {
			has_idea = ITA_tyrant_4
		}
		swap_ideas = {
			remove_idea = ITA_tyrant_4
			add_idea = ITA_tyrant_5
		}
	}
	else_if = {
		limit = {
			has_idea = ITA_tyrant_5
		}
		remove_ideas = {
			ITA_tyrant_5
		}
	}
}

ITA_tyrant_level_clear_all = {
	if = {
		limit = {
			has_idea = ITA_tyrant_1
		}
		remove_ideas = {
			ITA_tyrant_1
		}
	}
	else_if = {
		limit = {
			has_idea = ITA_tyrant_2
		}
		remove_ideas = {
			ITA_tyrant_2
		}
	}
	else_if = {
		limit = {
			has_idea = ITA_tyrant_3
		}
		remove_ideas = {
			ITA_tyrant_3
		}
	}
	else_if = {
		limit = {
			has_idea = ITA_tyrant_4
		}
		remove_ideas = {
			ITA_tyrant_4
		}
	}
	else_if = {
		limit = {
			has_idea = ITA_tyrant_5
		}
		remove_ideas = {
			ITA_tyrant_5
		}
	}
}

HOF_ITA_end_the_italo_ethiopian_war = {
	clr_global_flag = HOF_second_italo_ethiopian_war_flag
	if = {
		limit = {
			any_country = {
				OR = {
					original_tag = ITA
					is_subject_of = ITA
				}
				controls_state = 271
			}
		}
		ITA = {
			set_country_flag = HOF_ITA_victory_in_ethiopia_flag
		}
	}
	else = {
		ITA = {
			set_country_flag = HOF_ITA_defeat_in_ethiopia_flag
		}
	}
}

HOF_ITA_nero_initialize_new_mission_effect = {
	set_country_flag = {
		flag = ITA_nero_activated_recently_flag
		days = 30
	}
	add_to_variable = {
		HOF_ITA_nero_active_missions = 1
	}
	add_to_variable = {
		HOF_ITA_nero_number_of_missions_triggered = 1
	}
}

ITA_missiolinis_revert_new_mission_initialization_effect = {
	clr_country_flag = ITA_nero_activated_recently_flag
	add_to_variable = {
		HOF_ITA_nero_active_missions = -1
	}
	add_to_variable = {
		HOF_ITA_nero_number_of_missions_triggered = -1
	}
}

HOF_ITA_nero_manage_next_mission = {
	if = {
		limit = {
			check_variable = {
				HOF_ITA_nero_number_of_missions_triggered = 5
			}
		}
		set_country_flag = HOF_ITA_randomize_nero_flag
	}
	if = {
		limit = {
			NOT = {
				has_country_flag = HOF_ITA_randomize_nero_flag
			}
		}
		if = {
			limit = {
				check_variable = {
					HOF_ITA_nero_number_of_missions_triggered = 1
				}
			}
			add_to_variable = {
				HOF_ITA_nero_number_of_missions_triggered = 1
			}
		}
	}
}

HOF_ITA_nero_finalize_mission_effect = {
	#Sets flags and everything necessary to end a mission and keep track of ongoing missions, etc.
	add_to_variable = {
		HOF_ITA_nero_active_missions = -1
	}
	add_to_variable = {
		HOF_ITA_nero_number_of_missions_resolved = 1
	}
}

HOF_ITA_nero_add_to_failed_missions = {
	add_to_variable = {
		HOF_ITA_nero_failed_missions = 1
	}
}

HOF_ITA_nero_add_to_successful_missions = {
	add_to_variable = {
		HOF_ITA_nero_successful_missions = 1
	}
}

### PROGRESS IN ETHIOPIA ###
HOF_ITA_nero_progress_in_ethiopia_failure_effect = {
	add_war_support = -0.03
	add_political_power = -15
}

HOF_ITA_nero_progress_in_ethiopia_success_effect = {
	add_stability = 0.03
	add_war_support = 0.03
	army_experience = 15
	add_command_power = 15
	#Effects in Ethiopia
	if = {
		limit = {
			always = yes
		}
		effect_tooltip = {
			ETH = {
				add_war_support = -0.1
			}
		}
	}
	if = {
		#First mission to succeed
		limit = {
			NOT = {
				has_country_flag = ITA_missiolini_progress_in_ethiopia_one_mission_successful_flag
			}
		}
		set_country_flag = ITA_missiolini_progress_in_ethiopia_one_mission_successful_flag
	}
	else_if = {
		limit = {
			always = yes
		}
		#Second mission to succeed
		ITA_nero_claudius = {
			unit_leader_event = {
				id = HOF_italy_nero.11
			}
		}
	}
}

### CONQUER ETHIOPIA ###
HOF_ITA_nero_conquer_ethiopia_failure_effect = {
	add_political_power = -25
	add_war_support = -0.05
	add_stability = -0.05
	every_controlled_state = {
		limit = {
			NOT = {
				is_owned_by = ROOT
			}
			is_core_of = ETH
		}
		add_compliance = -5
	}
}

HOF_ITA_nero_conquer_ethiopia_success_effect = {
	add_political_power = 50
	add_stability = 0.05
	add_war_support = 0.05
	army_experience = 25
	add_command_power = 25
}

### STRENGTHEN HEAVY INDUSTRY ###
HOF_ITA_nero_strengthen_heavy_industry_failure_effect = {
	add_political_power = -25
	add_stability = -0.03
}

HOF_ITA_nero_strengthen_heavy_industry_success_effect = {
	add_political_power = 50
	add_stability = 0.03
	add_timed_idea = {
		idea = ITA_strengthened_heavy_industry
		days = 365
	}
}

### STRENGTHEN THE ARMY ###
HOF_ITA_nero_strengthen_the_army_failure_effect = {
	add_political_power = -25
	add_war_support = -0.03
	add_timed_idea = {
		idea = ITA_disgruntlement_in_the_army
		days = 180
	}
}

HOF_ITA_nero_strengthen_the_army_success_effect = {
	army_experience = 50
	add_command_power = 25
	add_war_support = 0.03
	add_timed_idea = {
		idea = ITA_strengthened_the_army
		days = 365
	}
}

### STRENGTHEN THE NAVY ###
HOF_ITA_nero_strengthen_the_navy_failure_effect = {
	add_political_power = -25
	add_war_support = -0.03
	add_timed_idea = {
		idea = ITA_disgruntlement_in_the_navy
		days = 180
	}
}

HOF_ITA_nero_strengthen_the_navy_success_effect = {
	navy_experience = 50
	add_command_power = 25
	add_war_support = 0.03
	add_timed_idea = {
		idea = ITA_strengthened_the_navy
		days = 365
	}
}

### OCCUPY ALBANIA ###
HOF_ITA_nero_occupy_albania_failure_effect = {
	add_political_power = -25
	add_popularity = {
		ideology = ROOT
		popularity = -0.05
	}
}

HOF_ITA_nero_occupy_albania_success_effect = {
	add_political_power = 50
	add_popularity = {
		ideology = ROOT
		popularity = 0.05
	}
	effect_tooltip = {
		44 = {
			#ALBANIA
			add_compliance = 5
			add_resistance = -5
		}
	}
}

### OCCUPY DALMATIA ###
HOF_ITA_nero_occupy_dalmatia_failure_effect = {
	add_political_power = -25
	add_war_support = -0.03
	add_popularity = {
		ideology = ROOT
		popularity = -0.05
	}
}

HOF_ITA_nero_occupy_dalmatia_success_effect = {
	add_political_power = 50
	add_war_support = 0.03
	add_popularity = {
		ideology = ROOT
		popularity = 0.05
	}
	every_controlled_state = {
		limit = {
			is_core_of = YUG
			is_fully_controlled_by = ROOT
			has_resistance = yes
		}
		add_compliance = 5
		add_resistance = -5
	}
}

### OCCUPY GREECE ###
HOF_ITA_nero_occupy_greece_failure_effect = {
	add_political_power = -25
	add_war_support = -0.03
	add_popularity = {
		ideology = ROOT
		popularity = -0.05
	}
}

HOF_ITA_nero_occupy_greece_success_effect = {
	add_political_power = 50
	add_war_support = 0.03
	add_popularity = {
		ideology = ROOT
		popularity = 0.05
	}
	custom_effect_tooltip = ITA_missiolini_occupy_greece_occupation_effects
	every_controlled_state = {
		limit = {
			is_core_of = GRE
			is_fully_controlled_by = ROOT
			has_resistance = yes
		}
		add_compliance = 5
		add_resistance = -5
	}
	if = {
		limit = {
			GRE = {
				is_subject_of = ROOT
			}
		}
		GRE = {
			add_autonomy_score = {
				value = -35
			}
		}
	}
}

ITA_create_proper_carrier_effect = {
	if = {
		#MTG 
		limit = {
			has_dlc = "Man the Guns"
		}
		if = {
			limit = {
				NOT = {
					has_tech = basic_ship_hull_carrier
				}
			}
			set_technology = {
				basic_ship_hull_carrier = 1
			}
		}
		#Equipment Variant
		create_equipment_variant = {
			name = "Aquila Class"
			type = ship_hull_carrier_1
			name_group = ITA_CV_HISTORICAL
			parent_version = 0
			allow_without_tech = yes			#Makes no difference since focus grants appropriate tech (above), but it improves tooltip
			modules = {
				fixed_ship_deck_slot_1 = ship_deck_space
				fixed_ship_deck_slot_2 = ship_deck_space
				fixed_ship_anti_air_slot = ship_anti_air_2
				fixed_ship_radar_slot = empty
				fixed_ship_engine_slot = carrier_ship_engine_2
				fixed_ship_secondaries_slot = empty
				front_1_custom_slot = ship_deck_space
			}
		}
		#Line Production
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_1
				creator = "ITA"
				version_name = "Aquila Class"
			}
			name = "Aquila"
			requested_factories = 5
			progress = 0.45
			amount = 1
		}
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_1
				creator = "ITA"
				version_name = "Aquila Class"
			}
			name = "Thalassa"
			requested_factories = 5
			progress = 0.45
			amount = 1
		}
	}
	else = {
		if = {
			limit = {
				NOT = {
					has_tech = basic_carrier
				}
			}
			set_technology = {
				basic_carrier = 1
			}
		}
		create_equipment_variant = {
			name = "Aquila Class"
			type = carrier_2
			allow_without_tech = yes			#Makes no difference since focus grants appropriate tech (above), but it improves tooltip
			upgrades = {
				ship_deckspace_upgrade = 3
				carrier_armor_upgrade = 2
				ship_engine_upgrade = 2
				ship_reliability_upgrade = 2
			}
		}
		add_equipment_production = {
			equipment = {
				type = carrier_2
				creator = "ITA"
				version_name = "Aquila Class"
			}
			requested_factories = 2
			progress = 0.45
			amount = 1
		}
	}
}
