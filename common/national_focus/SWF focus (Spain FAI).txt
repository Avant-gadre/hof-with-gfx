###########################
# Spain-FAI Focus Tree
# By Rylock
# Revamped by SuperGreenBeans, Cazadorian and Klyntar King
###########################
focus_tree = {
	id = SWF_focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = SWF
		}
	}
	default = no
	continuous_focus_position = {
		x = 600
		y = 1000
	}
	### Rise to Power
	focus = {
		id = SWF_party_congress
		icon = GFX_goal_syndicalist_industry
		cost = 5
		x = 0
		y = 0
		available = {
			has_country_flag = SPA_aftermath_of_the_civil_war
		}
		bypass = {
			is_subject = yes
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_party_congress"
			SPA_societal_recovery = yes
			country_event = sprc.602
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
	}
	### Internal Policies
	focus = {
		id = SWF_anarchist_revolution
		icon = GFX_goal_harness_peoples_will
		cost = 5
		relative_position_id = SWF_party_congress
		x = -6
		y = 1
		available = {
			has_government = syndicalist
		}
		prerequisite = {
			focus = SWF_party_congress
		}
		mutually_exclusive = {
			focus = SWF_red_nation_state
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_anarchist_revolution"
			add_popularity = {
				ideology = syndicalist
				popularity = 0.05
			}
			SPA_societal_recovery = yes
		}
		search_filters = {
			FOCUS_FILTER_STABILITY
		}
	}
	focus = {
		id = SWF_home_rule
		icon = GFX_focus_spr_regional_defense_council_of_aragon
		cost = 5
		relative_position_id = SWF_anarchist_revolution
		x = -1
		y = 1
		prerequisite = {
			focus = SWF_anarchist_revolution
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_home_rule"
			add_ideas = SWF_anarchism
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
	}
	focus = {
		id = SWF_collectivise_factories
		icon = GFX_collective_housing
		cost = 5
		relative_position_id = SWF_home_rule
		x = -1
		y = 1
		prerequisite = {
			focus = SWF_home_rule
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_collectivise_factories"
			swap_ideas = {
				remove_idea = SWF_anarchism
				add_idea = SWF_anarchism1
			}
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
	}
	focus = {
		id = SWF_red_nation_state
		icon = GFX_goal_ideology_radical_socialist
		cost = 5
		relative_position_id = SWF_party_congress
		x = -4
		y = 1
		available = {
			OR = {
				has_government = radical_socialist
				has_government = totalist
			}
		}
		prerequisite = {
			focus = SWF_party_congress
		}
		mutually_exclusive = {
			focus = SWF_anarchist_revolution
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_red_nation_state"
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.05
			}
			SPA_societal_recovery = yes
		}
		bypass = {
			hidden_trigger = {
				has_government = totalist
			}
		}
		search_filters = {
			FOCUS_FILTER_STABILITY
		}		#bypass for no idea and totalist
	}
	focus = {
		id = SWF_national_union
		icon = GFX_ITA_syndicalist_unite
		cost = 5
		relative_position_id = SWF_red_nation_state
		x = 1
		y = 1
		prerequisite = {
			focus = SWF_red_nation_state
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_national_union"
			add_ideas = SWF_spanism_socialism
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
	}
	focus = {
		id = SWF_planned_economy
		icon = GFX_focus_SOV_merge_plants
		cost = 5
		relative_position_id = SWF_national_union
		x = 1
		y = 1
		prerequisite = {
			focus = SWF_national_union
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_planned_economy"
			swap_ideas = {
				remove_idea = SWF_spanism_socialism
				add_idea = SWF_spanism_socialism1
			}
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
	}
	focus = {
		id = SWF_consolidating_spain
		icon = GFX_focus_HOL_deal_with_left
		cost = 5
		relative_position_id = SWF_party_congress
		x = -5
		y = 2
		prerequisite = {
			focus = SWF_anarchist_revolution
			focus = SWF_red_nation_state
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_consolidating_spain"
			SPA_societal_recovery = yes
			add_stability = 0.05
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}
	}
	focus = {
		id = SWF_oppress_opposition
		icon = GFX_focus_spa_eliminate_the_carlists
		cost = 5
		relative_position_id = SWF_consolidating_spain
		x = -1
		y = 1
		prerequisite = {
			focus = SWF_consolidating_spain
		}
		ai_will_do = {
			factor = 60
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_oppress_opposition"
			remove_ideas = SWF_monarchist_resistance
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.1
			}
			add_popularity = {
				ideology = paternal_autocrat
				popularity = -0.1
			}
			add_popularity = {
				ideology = national_populist
				popularity = -0.1
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}
	focus = {
		id = SWF_reconcile_opposition
		icon = GFX_goal_ideology_social_democrat
		cost = 5
		relative_position_id = SWF_oppress_opposition
		x = 2
		y = 0
		prerequisite = {
			focus = SWF_consolidating_spain
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_reconcile_opposition"
			add_stability = 0.05
			add_popularity = {
				ideology = social_democrat
				popularity = 0.08
			}
			add_popularity = {
				ideology = social_liberal
				popularity = 0.06
			}
			effect_tooltip = {
				SPA_augusto_barcia_trelles_advisor = {
					set_nationality = ROOT
				}
				SPA_manuel_azana_diaz_advisor = {
					set_nationality = ROOT
				}
				SPA_niceto_alcala_zamora_advisor = {
					set_nationality = ROOT
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}
	focus = {
		id = SWF_popular_front
		icon = GFX_focus_generic_befriend_republican_spain_focus
		cost = 5
		relative_position_id = SWF_oppress_opposition
		x = 1
		y = 1
		prerequisite = {
			focus = SWF_oppress_opposition
		}
		prerequisite = {
			focus = SWF_reconcile_opposition
		}
		prerequisite = {
			focus = SWF_collectivise_factories
			focus = SWF_planned_economy
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_popular_front"
			SPA_societal_recovery = yes
			set_temp_variable = {
				coalition_partner_var = token:social_democrat
			}
			add_to_coalition = yes
			set_temp_variable = {
				coalition_partner_var = token:social_liberal
			}
			add_to_coalition = yes
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}
	focus = {
		id = SWF_anticlerical
		icon = GFX_focus_mex_triumph_over_the_cristeros
		cost = 5
		relative_position_id = SWF_oppress_opposition
		x = -1
		y = 1
		prerequisite = {
			focus = SWF_oppress_opposition
		}
		prerequisite = {
			focus = SWF_reconcile_opposition
		}
		prerequisite = {
			focus = SWF_collectivise_factories
			focus = SWF_planned_economy
		}
		ai_will_do = {
			factor = 60
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_anticlerical"
			if = {
				limit = {
					has_idea = SWF_anarchism1
				}
				swap_ideas = {
					remove_idea = SWF_anarchism1
					add_idea = SWF_anarchism2
				}
			}
			else_if = {
				limit = {
					has_idea = SWF_anarchism3
				}
				swap_ideas = {
					remove_idea = SWF_anarchism3
					add_idea = SWF_anarchism4
				}
			}
			else_if = {
				limit = {
					has_idea = SWF_spanism_socialism1
				}
				swap_ideas = {
					remove_idea = SWF_spanism_socialism1
					add_idea = SWF_spanism_socialism2
				}
			}
			else = {
				swap_ideas = {
					remove_idea = SWF_spanism_socialism3
					add_idea = SWF_spanism_socialism4
				}
			}
			add_popularity = {
				ideology = social_conservative
				popularity = -0.1
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}
	focus = {
		id = SWF_women_right
		icon = GFX_focus_generic_women_in_military
		cost = 5
		relative_position_id = SWF_oppress_opposition
		x = 3
		y = 1
		prerequisite = {
			focus = SWF_oppress_opposition
		}
		prerequisite = {
			focus = SWF_reconcile_opposition
		}
		prerequisite = {
			focus = SWF_collectivise_factories
			focus = SWF_planned_economy
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_women_right"
			if = {
				limit = {
					has_idea = SWF_anarchism1
				}
				swap_ideas = {
					remove_idea = SWF_anarchism1
					add_idea = SWF_anarchism3
				}
			}
			else_if = {
				limit = {
					has_idea = SWF_anarchism2
				}
				swap_ideas = {
					remove_idea = SWF_anarchism2
					add_idea = SWF_anarchism4
				}
			}
			else_if = {
				limit = {
					has_idea = SWF_spanism_socialism1
				}
				swap_ideas = {
					remove_idea = SWF_spanism_socialism1
					add_idea = SWF_spanism_socialism3
				}
			}
			else = {
				swap_ideas = {
					remove_idea = SWF_spanism_socialism2
					add_idea = SWF_spanism_socialism4
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}
	focus = {
		id = SWF_social_revolution
		icon = GFX_goal_social_reforms
		cost = 5
		relative_position_id = SWF_popular_front
		x = -1
		y = 1
		available = {
			has_completed_focus = SWF_anarchist_revolution
		}
		prerequisite = {
			focus = SWF_women_right
		}
		prerequisite = {
			focus = SWF_anticlerical
		}
		prerequisite = {
			focus = SWF_popular_front
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_social_revolution"
			swap_ideas = {
				remove_idea = SWF_anarchism4
				add_idea = SWF_anarchism5
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}
	focus = {
		id = SWF_strong_government
		icon = GFX_goal_generic_revolutionary_government
		cost = 5
		relative_position_id = SWF_popular_front
		x = 1
		y = 1
		available = {
			has_completed_focus = SWF_red_nation_state
		}
		prerequisite = {
			focus = SWF_women_right
		}
		prerequisite = {
			focus = SWF_anticlerical
		}
		prerequisite = {
			focus = SWF_popular_front
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_strong_government"
			swap_ideas = {
				remove_idea = SWF_spanism_socialism4
				add_idea = SWF_spanism_socialism5
			}
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}
	focus = {
		id = SWF_beacon_socialism
		icon = GFX_focus_spr_torchbearers_of_tomorrow
		cost = 5
		relative_position_id = SWF_popular_front
		x = 0
		y = 2
		prerequisite = {
			focus = SWF_strong_government
			focus = SWF_social_revolution
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_beacon_socialism"
			if = {
				limit = {
					has_completed_focus = SWF_anarchist_revolution
				}
				swap_ideas = {
					remove_idea = SWF_anarchism5
					add_idea = SWF_anarchism6
				}
			}
			else_if = {
				limit = {
					has_completed_focus = SWF_red_nation_state
				}
				swap_ideas = {
					remove_idea = SWF_spanism_socialism5
					add_idea = SWF_spanism_socialism6
				}
			}
			else = {
				custom_effect_tooltip = SWF_political_effect
			}
			set_temp_variable = {
				ideology_change_var = 0.1
			}
			change_ruling_party_popularity = yes
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}
	}
	### Industrial Reforms
	focus = {
		# Rebuilding the Economy
		id = SWF_rebuilding_the_economy
		icon = GFX_goal_generic_production2
		cost = 7
		relative_position_id = SWF_party_congress
		x = 4
		y = 1
		prerequisite = {
			focus = SWF_party_congress
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_rebuilding_the_economy"
			add_ideas = SPA_rebuilding_spain_idea
			SPA_economic_recovery = yes
			add_tech_bonus = {
				name = SWF_rebuilding_the_economy
				bonus = 1
				uses = 1
				category = industry
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Expand the Railroads
		id = SWF_expand_railroads
		icon = GFX_goal_generic_construct_infrastructure
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = -4
		y = 1
		prerequisite = {
			focus = SWF_rebuilding_the_economy
		}
		available = {
			41 = {
				is_fully_controlled_by = ROOT
			}
			1081 = {
				is_fully_controlled_by = ROOT
			}
			174 = {
				is_fully_controlled_by = ROOT
			}
			171 = {
				is_fully_controlled_by = ROOT
			}
			176 = {
				is_fully_controlled_by = ROOT
			}
			1070 = {
				is_fully_controlled_by = ROOT
			}
		}
		ai_will_do = {
			factor = 50
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_expand_railroads"
			1070 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			176 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			171 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			build_railway = {
				path = {
					3938
					3794
					9800
					9846
					11825
					918
					3918
					3727
					3725
					11840
					11677
					11692
					6955
					758
				}
			}
			build_railway = {
				path = {
					11825
					6936
					903
					885
					11852
					13563
					740
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Extract Natural Resources
		id = SWF_resource_extraction
		icon = GFX_goal_generic_coal_mining
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = -4
		y = 3
		prerequisite = {
			focus = SWF_expand_railroads
		}
		available = {
			171 = {
				is_controlled_by = ROOT
			}
		}
		ai_will_do = {
			factor = 50
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_resource_extraction"
			171 = {
				add_resource = {
					type = tungsten
					amount = 12
				}
			}
			activate_targeted_decision = {
				target = ROOT
				decision = SPA_tungsten_mines
			}
			activate_targeted_decision = {
				target = ROOT
				decision = SPA_tungsten_mines_2
			}
			activate_targeted_decision = {
				target = ROOT
				decision = SPA_aluminium_mines
			}
			activate_targeted_decision = {
				target = ROOT
				decision = SPA_steel_mines
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Provincial Rebuilding
		id = SWF_provincial_rebuilding
		icon = GFX_goal_production
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = -2
		y = 1
		prerequisite = {
			focus = SWF_rebuilding_the_economy
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_provincial_rebuilding"
			add_tech_bonus = {
				name = SWF_provincial_rebuilding
				bonus = 1
				uses = 2
				category = industry
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Military Investments
		id = SWF_military_investments
		icon = GFX_goal_national_arsenal
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = -3
		y = 2
		prerequisite = {
			focus = SWF_provincial_rebuilding
		}
		mutually_exclusive = {
			focus = SWF_industrial_investment
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_military_investments"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Industrial Investment
		id = SWF_industrial_investment
		icon = GFX_goal_construction_engineering
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = -1
		y = 2
		prerequisite = {
			focus = SWF_provincial_rebuilding
		}
		mutually_exclusive = {
			focus = SWF_military_investments
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_industrial_investment"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Electrification Program
		id = SWF_electrification_program
		icon = GFX_goal_Schelle
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = -2
		y = 3
		prerequisite = {
			focus = SWF_military_investments
			focus = SWF_industrial_investment
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_electrification_program"
			SPA_economic_recovery = yes
			add_tech_bonus = {
				name = SWF_electrification_program
				bonus = 1
				uses = 2
				category = electronics
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# True Socialist Education
		id = SWF_true_socialist_education
		icon = GFX_focus_generic_socialist_science
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 0
		y = 1
		prerequisite = {
			focus = SWF_rebuilding_the_economy
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_true_socialist_education"
			add_research_slot_until_five = yes
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Bring Socialism to Real Academia
		id = SWF_expand_real_academia
		icon = GFX_socialist_constitution
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 0
		y = 3
		prerequisite = {
			focus = SWF_true_socialist_education
		}
		ai_will_do = {
			factor = 50
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_expand_real_academia"
			add_ideas = SWF_socialist_academia_idea
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Liberated Industrial Workers
		id = SWF_liberated_industrial_workers
		icon = GFX_goal_syndicalist_workers
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 2
		y = 1
		prerequisite = {
			focus = SWF_rebuilding_the_economy
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_liberated_industrial_workers"
			add_ideas = SWF_liberated_workers_idea
		}
	}
	focus = {
		# Workplace Democracy
		id = SWF_workplace_democracy
		icon = GFX_goal_generic_workers_democracy
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 1
		y = 2
		prerequisite = {
			focus = SWF_liberated_industrial_workers
		}
		mutually_exclusive = {
			focus = SWF_military_factories
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_workplace_democracy"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Expand the Arms Industry
		id = SWF_military_factories
		icon = GFX_goal_generic_construct_mil_factory
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 3
		y = 2
		prerequisite = {
			focus = SWF_liberated_industrial_workers
		}
		mutually_exclusive = {
			focus = SWF_workplace_democracy
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_military_factories"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Modern Agriculture
		id = SWF_modern_agriculture
		icon = GFX_focus_SOV_breadbasket_of_the_union
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 2
		y = 3
		prerequisite = {
			focus = SWF_workplace_democracy
			focus = SWF_military_factories
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_modern_agriculture"
			add_ideas = SPA_modern_agriculture_idea
			SPA_economic_recovery = yes
		}
		search_filters = {
			FOCUS_FILTER_ARMY_BONUS
			FOCUS_FILTER_MANPOWER
		}
	}
	focus = {
		# Syndicalise the Economy
		id = SWF_syndicalise_the_economy
		icon = GFX_goal_Workers_Paradise
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 4
		y = 1
		prerequisite = {
			focus = SWF_rebuilding_the_economy
		}
		ai_will_do = {
			factor = 50
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_syndicalise_the_economy"
			add_stability = 0.05
			add_tech_bonus = {
				name = SWF_syndicalise_the_economy
				bonus = 1
				uses = 1
				category = industry
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Empower the Unions
		id = SWF_empower_the_unions
		icon = GFX_goal_workers_rights
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 4
		y = 3
		prerequisite = {
			focus = SWF_syndicalise_the_economy
		}
		ai_will_do = {
			factor = 50
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_empower_the_unions"
			add_ideas = SWF_empower_the_unions_idea
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Spanish Miracle
		id = SWF_spanish_miracle
		icon = GFX_focus_spa_the_spanish_miracle
		cost = 7
		relative_position_id = SWF_rebuilding_the_economy
		x = 0
		y = 4
		prerequisite = {
			focus = SWF_resource_extraction
		}
		prerequisite = {
			focus = SWF_electrification_program
		}
		prerequisite = {
			focus = SWF_expand_real_academia
		}
		prerequisite = {
			focus = SWF_modern_agriculture
		}
		prerequisite = {
			focus = SWF_empower_the_unions
		}
		ai_will_do = {
			factor = 200
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_spanish_miracle"
			if = {
				limit = {
					has_idea = SPA_rebuilding_spain_idea
				}
				remove_ideas = SPA_rebuilding_spain_idea
			}
			hidden_effect = {
				remove_ideas = {
					SWF_socialist_academia_idea
					SWF_liberated_workers_idea
					SPA_modern_agriculture_idea
					SWF_empower_the_unions_idea
					SPA_recovering_economy_3
				}
			}
			custom_effect_tooltip = SPA_economic_miracle_tt
			add_ideas = SPA_spanish_economic_miracle
			add_research_slot_until_five = yes
		}
	}
	### Foreign Policies
	focus = {
		id = SWF_join_france
		icon = GFX_goal_FRA_flag
		cost = 3
		relative_position_id = SWF_party_congress
		x = 12
		y = 1
		available = {
			is_subject = no
			is_in_faction = no
			INT = {
				is_faction_leader = yes
			}
			at_peace_or_same_enemies_as_INT = yes
		}
		prerequisite = {
			focus = SWF_party_congress
		}
		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				has_idea = SPA_economic_ruin
				has_idea = SPA_social_breakdown_2
			}
		}
		bypass = {
			is_in_faction = yes
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_join_france"
			activate_targeted_decision = {
				target = INT
				decision = SPA_join_faction
			}
			add_ideas = SWF_foreign_focus
		}
	}
	focus = {
		# Communard Advisors
		id = SWF_communard_advisors
		icon = GFX_goal_comfrance
		cost = 7
		relative_position_id = SWF_join_france
		x = 0
		y = 1
		prerequisite = {
			focus = SWF_join_france
		}
		available = {
			is_in_faction_with = FRA
		}
		bypass = {
			NOT = {
				country_exists = FRA
			}
		}
		ai_will_do = {
			factor = 30
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_communard_advisors"
			if = {
				limit = {
					has_idea = SWF_british_advisors_idea
				}
				swap_ideas = {
					remove_idea = SWF_british_advisors_idea
					add_idea = SWF_british_and_communard_advisors
				}
			}
			else = {
				add_ideas = SWF_communard_advisors_idea
			}
		}
	}
	focus = {
		# British Advisors
		id = SWF_british_advisors
		icon = GFX_goal_british_cooperation
		cost = 7
		relative_position_id = SWF_join_france
		x = 2
		y = 1
		prerequisite = {
			focus = SWF_join_france
		}
		available = {
			is_in_faction_with = ENG
		}
		ai_will_do = {
			factor = 30
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_british_advisors"
			if = {
				limit = {
					has_idea = SWF_communard_advisors_idea
				}
				swap_ideas = {
					remove_idea = SWF_communard_advisors_idea
					add_idea = SWF_british_and_communard_advisors
				}
			}
			else = {
				add_ideas = SWF_british_advisors_idea
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		id = SWF_portugal
		icon = GFX_goal_portugal
		cost = 7
		relative_position_id = SWF_join_france
		x = -2
		y = 1
		available = {
			is_subject = no
			controls_all_owned_states = yes
			OR = {
				NOT = {
					is_in_faction_with = INT
				}
				has_global_flag = second_weltkrieg_has_started
				POR = {
					is_subject = no
					is_in_faction = no
				}
			}
		}
		bypass = {
			POR = {
				has_socialist_government = yes
			}
		}
		prerequisite = {
			focus = SWF_join_france
		}
		will_lead_to_war_with = POR
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				can_declare_war_on = POR
				OR = {
					ROOT_is_threatened = yes
					POR = {
						default_attack_AI_trigger_FROM = yes
					}
				}
			}
			modifier = {
				factor = 0
				can_declare_war_on = POR
				NOT = {
					has_global_flag = second_weltkrieg_has_started
				}
				POR = {
					NOT = {
						focus_progress = {
							focus = POR_the_king_and_country
							progress > 0
						}
						focus_progress = {
							focus = POR_the_organic_kingdom
							progress > 0
						}
					}
				}
			}
			modifier = {
				factor = 100
				can_declare_war_on = POR
				#if POR is still factionless upon reaching these foci, ENT is dead - attack away
				POR = {
					is_subject = no
					is_in_faction = no
					OR = {
						focus_progress = {
							focus = POR_the_king_and_country
							progress > 0
						}
						focus_progress = {
							focus = POR_the_organic_kingdom
							progress > 0
						}
					}
				}
			}
			modifier = {
				factor = 100
				has_war_with = POR
			}
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_portugal"
			add_political_power = 50
			if = {
				limit = {
					can_declare_war_on = POR
				}
				create_wargoal = {
					type = annex_everything
					target = POR
				}
			}
			POR = {
				every_core_state = {
					add_claim_by = ROOT
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
			FOCUS_FILTER_POLITICAL
		}
	}
	focus = {
		# Workers of Iberia, Unite
		id = SWF_united_iberia
		icon = GFX_focus_por_workers_of_iberia
		cost = 7
		relative_position_id = SWF_join_france
		x = -1
		y = 2
		prerequisite = {
			focus = SWF_communard_advisors
		}
		prerequisite = {
			focus = SWF_portugal
		}
		available = {
			is_subject = no
			OR = {
				NOT = {
					country_exists = POR
				}
				POR = {
					has_capitulated = yes
				}
			}
			controls_state = 112			#Lisbon
			controls_state = 180			#Porto
			controls_state = 181			#Guarda
			controls_state = 179			#Beja
			controls_state = 939			#Évora
		}
		ai_will_do = {
			factor = 200
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_united_iberia"
			add_ideas = SWF_unification_of_iberia
			set_cosmetic_tag = SPA_socialist_iberia
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
	}
	focus = {
		# Joint Military Training
		id = SWF_joint_military_training
		icon = GFX_goal_generic_socialist_army
		cost = 7
		relative_position_id = SWF_join_france
		x = 1
		y = 2
		prerequisite = {
			focus = SWF_communard_advisors
		}
		prerequisite = {
			focus = SWF_british_advisors
		}
		ai_will_do = {
			factor = 30
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_joint_military_training"
			swap_ideas = {
				remove_idea = SWF_british_and_communard_advisors
				add_idea = SWF_internationale_training
			}
		}
		search_filters = {
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_NAVY_XP
			FOCUS_FILTER_AIR_XP
		}
	}
	### Army Policy ###
	focus = {
		# Establish the Ejército Popular
		id = SWF_peoples_army
		icon = GFX_goal_SWF_Army
		cost = 5
		x = 22
		y = 0
		ai_will_do = {
			factor = 30
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_peoples_army"
			army_experience = 25
			air_experience = 25
			navy_experience = 25
		}
		search_filters = {
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_NAVY_XP
			FOCUS_FILTER_AIR_XP
		}
	}
	focus = {
		# Modern Tercio
		id = SWF_modern_terrico
		icon = GFX_goal_crush_monarchy
		cost = 7
		relative_position_id = SWF_peoples_army
		x = -3
		y = 1
		prerequisite = {
			focus = SWF_peoples_army
		}
		mutually_exclusive = {
			focus = SWF_army_of_maneuver
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_modern_terrico"
			add_doctrine_cost_reduction = {
				name = SWF_modern_terrico
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Confederal Militias
		id = SWF_confederal_militias
		icon = GFX_goal_integrate_the_militia
		cost = 7
		relative_position_id = SWF_peoples_army
		x = -4
		y = 2
		prerequisite = {
			focus = SWF_modern_terrico
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_confederal_militias"
			add_ideas = SWF_confederal_militias_idea
		}
		search_filters = {
			FOCUS_FILTER_ARMY_BONUS
		}
	}
	focus = {
		# Artillery Effort
		id = SWF_artillery_effort
		icon = GFX_focus_ETH_freedom_at_gunpoint
		cost = 7
		relative_position_id = SWF_peoples_army
		x = -2
		y = 2
		prerequisite = {
			focus = SWF_modern_terrico
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_artillery_effort"
			add_tech_bonus = {
				name = SWF_artillery_effort
				bonus = 0.5
				uses = 2
				category = infantry_weapons
				category = artillery
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Patrullas de Control
		id = SWF_patrullas_de_control
		icon = GFX_focus_spr_no_pasaran
		cost = 7
		relative_position_id = SWF_peoples_army
		x = -3
		y = 3
		prerequisite = {
			focus = SWF_confederal_militias
		}
		prerequisite = {
			focus = SWF_artillery_effort
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_patrullas_de_control"
			add_ideas = SWF_patrullas_de_control_idea
		}
		search_filters = {
			FOCUS_FILTER_ARMY_BONUS
		}
	}
	focus = {
		# Emergency Armament Production
		id = SWF_emergency_factories
		icon = GFX_goal_generic_soviet_construction
		cost = 7
		relative_position_id = SWF_peoples_army
		x = -2
		y = 4
		prerequisite = {
			focus = SWF_patrullas_de_control
			focus = SWF_unbreakable_spirit
		}
		available = {
			has_war = yes
		}
		ai_will_do = {
			factor = 30
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_emergency_factories"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			add_stability = -0.05
			add_manpower = -500
		}
		search_filters = {
			FOCUS_FILTER_ARMY_BONUS
		}
	}
	focus = {
		# Soldiers of the Revolution
		id = SWF_militia_focus
		icon = GFX_focus_spr_the_anti_fascist_workers_revolution
		cost = 7
		relative_position_id = SWF_peoples_army
		x = 0
		y = 2
		prerequisite = {
			focus = SWF_modern_terrico
			focus = SWF_army_of_maneuver
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_militia_focus"
			add_ideas = SWF_workers_militias
		}
		search_filters = {
			FOCUS_FILTER_ARMY_BONUS
			FOCUS_FILTER_MANPOWER
		}
	}
	focus = {
		# Unbreakable Spirit
		id = SWF_unbreakable_spirit
		icon = GFX_focus_spr_war_of_independence
		cost = 7
		relative_position_id = SWF_peoples_army
		x = -1
		y = 3
		prerequisite = {
			focus = SWF_militia_focus
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_unbreakable_spirit"
			add_ideas = SWF_unbreakable_spirit_idea
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Revolutionary Officers
		id = SWF_revolutionary_officers
		icon = GFX_goal_generic_red_guard
		cost = 7
		relative_position_id = SWF_peoples_army
		x = 1
		y = 3
		prerequisite = {
			focus = SWF_militia_focus
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_revolutionary_officers"
			every_unit_leader = {
				add_attack = 1
				add_defense = 1
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Army of Maneuver
		id = SWF_army_of_maneuver
		icon = GFX_goal_generic_army_mobile_warfare
		cost = 7
		relative_position_id = SWF_peoples_army
		x = 3
		y = 1
		prerequisite = {
			focus = SWF_peoples_army
		}
		mutually_exclusive = {
			focus = SWF_modern_terrico
		}
		ai_will_do = {
			factor = 0
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_army_of_maneuver"
			add_doctrine_cost_reduction = {
				name = SWF_army_of_maneuver
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Spanish Auto Industry
		id = SWF_mechanized_effort
		icon = GFX_goal_generic_army_motorized
		cost = 7
		relative_position_id = SWF_peoples_army
		x = 2
		y = 2
		prerequisite = {
			focus = SWF_army_of_maneuver
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_mechanized_effort"
			add_ideas = SPA_spanish_auto_industry
			if = {
				limit = {
					NOT = {
						has_tech = motorised_infantry
					}
				}
				set_technology = {
					motorised_infantry = 1
				}
			}
			else = {
				add_tech_bonus = {
					name = SPA_mechanized_effort
					bonus = 1
					uses = 1
					category = cat_mechanized_equipment
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Armoured Warfare Tactics
		id = SWF_weltrieg_lessons
		icon = GFX_EGY_Operation_Abu
		cost = 7
		relative_position_id = SWF_peoples_army
		x = 4
		y = 2
		prerequisite = {
			focus = SWF_army_of_maneuver
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_weltrieg_lessons"
			add_ideas = SPA_the_new_doctrine_idea
		}
		search_filters = {
			FOCUS_FILTER_ARMY_BONUS
		}
	}
	focus = {
		# Navarran Lancers
		id = SWF_navarran_lancers
		icon = GFX_goal_generic_army_tanks
		cost = 7
		relative_position_id = SWF_peoples_army
		x = 3
		y = 3
		prerequisite = {
			focus = SWF_mechanized_effort
		}
		prerequisite = {
			focus = SWF_weltrieg_lessons
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_navarran_lancers"
			add_tech_bonus = {
				name = SWF_navarran_lancers
				bonus = 1
				uses = 2
				category = armor
			}
			hidden_effect = {
				remove_ideas = {
					SPA_the_new_doctrine_idea
					SPA_spanish_auto_industry
				}
			}
			custom_effect_tooltip = SPA_army_idea_tt
			add_ideas = SPA_mechanised_army_idea
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# British Tank Shipments
		id = SWF_tank_shipments
		icon = GFX_goal_ENG_britannias_tanks
		cost = 7
		relative_position_id = SWF_peoples_army
		x = 2
		y = 4
		prerequisite = {
			focus = SWF_revolutionary_officers
			focus = SWF_navarran_lancers
		}
		available = {
			has_war = yes
		}
		bypass = {
			OR = {
				NOT = {
					country_exists = ENG
				}
				has_war_with = ENG
			}
		}
		ai_will_do = {
			factor = 30
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_tank_shipments"
			add_equipment_to_stockpile = {
				type = light_tank_chassis
				amount = 100
				producer = ENG
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# A Revolutionary Army
		id = SWF_a_revolutionary_army
		icon = GFX_focus_SOV_builder_of_the_red_army
		cost = 7
		relative_position_id = SWF_peoples_army
		x = 0
		y = 4
		prerequisite = {
			focus = SWF_patrullas_de_control
			focus = SWF_navarran_lancers
		}
		prerequisite = {
			focus = SWF_unbreakable_spirit
		}
		prerequisite = {
			focus = SWF_revolutionary_officers
		}
		ai_will_do = {
			factor = 50
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_a_revolutionary_army"
			army_experience = 25
			add_doctrine_cost_reduction = {
				name = SWF_a_revolutionary_army
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				add_timed_idea = {
					idea = SWF_the_final_push
					days = 365
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_RESEARCH
		}
	}
	### Navy ###
	focus = {
		# Armada Española
		id = SWF_armada_espanola
		icon = GFX_goal_SWF_Navy
		cost = 7
		x = 17
		y = 4
		prerequisite = {
			focus = SWF_peoples_army
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_civil_war = yes
				NOT = {
					has_completed_focus = SWF_a_revolutionary_army
				}
			}
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_armada_espanola"
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			navy_experience = 10
			add_doctrine_cost_reduction = {
				name = SWF_armada_espanola
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
		search_filters = {
			FOCUS_FILTER_NAVY_XP
			FOCUS_FILTER_NAVY_BONUS
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Merchant Marine
		id = SWF_upgrade_dockyards
		icon = GFX_goal_generic_buy_ships
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = -1
		y = 1
		prerequisite = {
			focus = SWF_armada_espanola
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_upgrade_dockyards"
			add_ideas = ITA_merchant_marine_idea
		}
	}
	focus = {
		# Revolutionary Admirality
		id = SWF_revolutionary_admirality
		icon = GFX_goal_SPR_Navy
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = 1
		y = 1
		prerequisite = {
			focus = SWF_armada_espanola
		}
		ai_will_do = {
			factor = 30
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_revolutionary_admirality"
			every_navy_leader = {
				add_skill_level = 1
				add_maneuver = 1
			}
		}
		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}
	}
	focus = {
		# Infantería de marina
		id = SWF_infanteria_de_marina
		icon = GFX_goal_generic_marines2
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = -5
		y = 3
		prerequisite = {
			focus = SWF_grand_navy
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_infanteria_de_marina"
			add_tech_bonus = {
				name = SWF_infanteria_de_marina
				bonus = 1
				uses = 1
				category = marine_tech
			}
			custom_effect_tooltip = tech_marine_bonus_effect
			hidden_effect = {
				set_technology = {
					tech_marine_bonus = 1
					popup = no
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Grand Navy
		id = SWF_grand_navy
		icon = GFX_goal_generic_sea_focused_navy
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = -3
		y = 2
		prerequisite = {
			focus = SWF_upgrade_dockyards
		}
		prerequisite = {
			focus = SWF_revolutionary_admirality
		}
		mutually_exclusive = {
			focus = SWF_defend_the_coast
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_grand_navy"
			add_ideas = SPA_grand_navy_idea
			add_doctrine_cost_reduction = {
				name = SPA_grand_navy
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Modern Galleons
		id = SWF_modern_galleons
		icon = GFX_goal_generic_sea_focused_navy2
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = -1
		y = 3
		prerequisite = {
			focus = SWF_grand_navy
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_modern_galleons"
			add_tech_bonus = {
				name = SWF_modern_galleons
				bonus = 1
				uses = 1
				category = ca_tech
				category = bb_tech
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Battle Cruiser Support
		id = SWF_battle_cruisers_support
		icon = GFX_goal_generic_navy_cruiser
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = -3
		y = 3
		prerequisite = {
			focus = SWF_grand_navy
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_battle_cruisers_support"
			add_tech_bonus = {
				name = SWF_battle_cruisers_support
				bonus = 1
				uses = 2
				category = ca_tech
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Defend the Coast
		id = SWF_defend_the_coast
		icon = GFX_goal_generic_coastal_navy
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = 3
		y = 2
		prerequisite = {
			focus = SWF_revolutionary_admirality
		}
		prerequisite = {
			focus = SWF_upgrade_dockyards
		}
		mutually_exclusive = {
			focus = SWF_grand_navy
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_defend_the_coast"
			add_ideas = SPA_coastal_defence
			add_doctrine_cost_reduction = {
				name = SPA_defend_the_coast
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
		search_filters = {
			FOCUS_FILTER_NAVY_XP
			FOCUS_FILTER_NAVY_BONUS
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Coast Guard
		id = SWF_coast_guard
		icon = GFX_goal_generic_coastal_navy2
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = 1
		y = 3
		prerequisite = {
			focus = SWF_defend_the_coast
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_coast_guard"
			add_tech_bonus = {
				name = SWF_coast_guard
				bonus = 1
				uses = 2
				category = dd_tech
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Cruiser Support
		id = SWF_cruiser_support
		icon = GFX_goal_EGY_sultan_fleet
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = 3
		y = 3
		prerequisite = {
			focus = SWF_defend_the_coast
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_cruiser_support"
			add_tech_bonus = {
				name = SWF_cruiser_support
				bonus = 1
				uses = 2
				category = cl_tech
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Fortify our coasts
		id = SWF_protect_our_coasts
		icon = GFX_goal_generic_naval_base
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = 5
		y = 3
		prerequisite = {
			focus = SWF_defend_the_coast
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_protect_our_coasts"
			169 = {
				add_building_construction = {
					type = coastal_bunker
					level = 3
					province = 1048
					instant_build = yes
				}
			}
			118 = {
				add_building_construction = {
					type = coastal_bunker
					level = 2
					province = 4135
					instant_build = yes
				}
			}
			173 = {
				add_building_construction = {
					type = coastal_bunker
					level = 3
					province = 9979
					instant_build = yes
				}
			}
			167 = {
				add_building_construction = {
					type = coastal_bunker
					level = 3
					province = 6906
					instant_build = yes
				}
			}
			165 = {
				add_building_construction = {
					type = coastal_bunker
					level = 3
					province = 9764
					instant_build = yes
				}
			}
			1070 = {
				add_building_construction = {
					type = coastal_bunker
					level = 3
					province = 740
					instant_build = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Masters of the Sea
		id = SWF_masters_of_the_sea
		icon = GFX_goal_generic_naval_academy
		cost = 7
		relative_position_id = SWF_armada_espanola
		x = 0
		y = 4
		prerequisite = {
			focus = SWF_battle_cruisers_support
			focus = SWF_cruiser_support
		}
		prerequisite = {
			focus = SWF_modern_galleons
			focus = SWF_coast_guard
		}
		ai_will_do = {
			factor = 30
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_masters_of_the_sea"
			add_doctrine_cost_reduction = {
				name = SPA_masters_of_the_sea
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
			if = {
				limit = {
					has_idea = SPA_coastal_defence
				}
				swap_ideas = {
					remove_idea = SPA_coastal_defence
					add_idea = SPA_navy_focus_idea_coast
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_grand_navy_idea
				}
				swap_ideas = {
					remove_idea = SPA_grand_navy_idea
					add_idea = SPA_navy_focus_idea_grand
				}
			}
			else = {
				custom_effect_tooltip = SPA_naval_idea_effect
			}
		}
		search_filters = {
			FOCUS_FILTER_NAVY_XP
			FOCUS_FILTER_NAVY_BONUS
			FOCUS_FILTER_RESEARCH
		}
	}
	### Air Force
	focus = {
		#Fuerzas Aéreas Populares
		id = SWF_fuerzas_aereas_populares
		icon = GFX_goal_SWF_Airforce
		cost = 7
		x = 27
		y = 4
		prerequisite = {
			focus = SWF_peoples_army
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_civil_war = yes
				NOT = {
					has_completed_focus = SWF_a_revolutionary_army
				}
			}
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_fuerzas_aereas_populares"
			air_experience = 10
			add_doctrine_cost_reduction = {
				name = SWF_fuerzas_aereas_populares
				cost_reduction = 0.5
				uses = 2
				category = air_doctrine
			}
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_AIRFORCE_BONUS
		}
	}
	focus = {
		# Upgrade Airports
		id = SWF_upgrade_air_ports
		icon = GFX_goal_generic_build_airforce
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = -3
		y = 1
		prerequisite = {
			focus = SWF_fuerzas_aereas_populares
		}
		available = {
			175 = {
				is_owned_and_controlled_by = ROOT
			}
			169 = {
				is_owned_and_controlled_by = ROOT
			}
			165 = {
				is_owned_and_controlled_by = ROOT
			}
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_upgrade_air_ports"
			175 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			169 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
			165 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Pilots of the Revolution
		id = SWF_new_pilots
		icon = GFX_focus_generic_female_pilots
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = 4
		y = 2
		prerequisite = {
			focus = SWF_fuerzas_aereas_populares
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_new_pilots"
			air_experience = 50
			set_rule = {
				can_generate_female_aces = yes
			}
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
		}
	}
	focus = {
		# Aviation Industry
		id = SWF_aviation_industry
		icon = GFX_focus_generic_aircraft_production
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = 1
		y = 3
		prerequisite = {
			focus = SWF_fighters
			focus = SWF_bombers
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_aviation_industry"
			add_ideas = SPA_aviation_industry_idea
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Air Supremacy
		id = SWF_air_supremacy
		icon = GFX_goal_generic_air_fighter_new
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = -1
		y = 1
		prerequisite = {
			focus = SWF_fuerzas_aereas_populares
		}
		mutually_exclusive = {
			focus = SWF_army_air_support
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_air_supremacy"
			add_ideas = SPA_air_supremacy_idea
			add_doctrine_cost_reduction = {
				name = SWF_air_supremacy
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Fighter efforts
		id = SWF_fighters
		icon = GFX_goal_generic_air_jet_2
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = -2
		y = 2
		prerequisite = {
			focus = SWF_air_supremacy
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_fighters"
			add_tech_bonus = {
				name = SWF_fighters
				bonus = 0.5
				uses = 2
				category = light_fighter
				category = cat_heavy_fighter
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Army Air Support
		id = SWF_army_air_support
		icon = GFX_goal_generic_air_CAS_new
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = 1
		y = 1
		prerequisite = {
			focus = SWF_fuerzas_aereas_populares
		}
		mutually_exclusive = {
			focus = SWF_air_supremacy
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_army_air_support"
			add_ideas = SPA_army_air_support_idea
			add_doctrine_cost_reduction = {
				name = SWF_army_air_support
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Bomber Effort
		id = SWF_bombers
		icon = GFX_goal_generic_air_tactical_bomber_new
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = 2
		y = 2
		prerequisite = {
			focus = SWF_army_air_support
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_bombers"
			add_tech_bonus = {
				name = SWF_bombers
				bonus = 0.5
				uses = 2
				category = tactical_bomber
				category = cat_strategic_bomber
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		#Request Foreign Planes
		id = SWF_foreign_airplanes
		icon = GFX_goal_ELS_Plane_Lease
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = 0
		y = 2
		prerequisite = {
			focus = SWF_air_supremacy
			focus = SWF_army_air_support
		}
		ai_will_do = {
			factor = 50
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_foreign_airplanes"
			if = {
				limit = {
					has_completed_focus = SWF_air_supremacy
				}
				if = {
					limit = {
						has_dlc_bba = yes
					}
					add_equipment_to_stockpile = {
						type = small_plane_airframe_0
						amount = 100
						producer = FRA
						variant_name = "D.510"
					}
				}
				else = {
					add_equipment_to_stockpile = {
						type = fighter_equipment_0
						amount = 100
						producer = FRA
					}
				}
			}
			else_if = {
				limit = {
					has_completed_focus = SWF_army_air_support
				}
				if = {
					limit = {
						has_dlc_bba = yes
					}
					add_equipment_to_stockpile = {
						type = small_plane_cas_airframe_0
						amount = 100
						producer = FRA
						variant_name = "Br. 19"
					}
				}
				else = {
					add_equipment_to_stockpile = {
						type = CAS_equipment_1
						amount = 100
						producer = FRA
					}
				}
			}
			else = {
				custom_effect_tooltip = SPA_foreign_airplanes_tt
			}
		}
	}
	focus = {
		# Voice of Heaven
		id = SWF_voice_of_heaven
		icon = GFX_goal_generic_radar_instillation
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = -1
		y = 3
		prerequisite = {
			focus = SWF_fighters
			focus = SWF_bombers
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_voice_of_heaven"
			add_tech_bonus = {
				name = SWF_voice_of_heaven
				bonus = 1
				uses = 2
				category = radar_tech
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# The New Almogávares
		id = SWF_paratrooper_focus
		icon = GFX_focus_generic_paratrooper
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = 3
		y = 1
		prerequisite = {
			focus = SWF_fuerzas_aereas_populares
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_paratrooper_focus"
			custom_effect_tooltip = tech_better_paratroopers_effect
			hidden_effect = {
				set_technology = {
					tech_better_paratroopers = 1
					popup = no
				}
			}
			add_tech_bonus = {
				name = SWF_paratrooper_focus
				bonus = 1
				uses = 1
				category = para_tech
			}
		}
		search_filters = {
			FOCUS_FILTER_RESEARCH
		}
	}
	focus = {
		# Protect the Spanish Skies
		id = SWF_air_defences
		icon = GFX_focus_generic_air_defense2
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = -4
		y = 2
		prerequisite = {
			focus = SWF_upgrade_air_ports
		}
		available = {
			165 = {
				is_owned_and_controlled_by = ROOT
			}
			41 = {
				is_owned_and_controlled_by = ROOT
			}
			168 = {
				is_owned_and_controlled_by = ROOT
			}
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus SWF_air_defences"
			165 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
			41 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
			168 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
	}
	focus = {
		# Rule the Skies
		id = SWF_rule_the_skies
		icon = GFX_goal_air_armada
		cost = 7
		relative_position_id = SWF_fuerzas_aereas_populares
		x = 0
		y = 4
		prerequisite = {
			focus = SWF_voice_of_heaven
		}
		prerequisite = {
			focus = SWF_aviation_industry
		}
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			air_experience = 10
			add_doctrine_cost_reduction = {
				name = SPA_rule_the_skies
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
			if = {
				limit = {
					has_idea = SPA_air_supremacy_idea
				}
				swap_ideas = {
					remove_idea = SPA_air_supremacy_idea
					add_idea = SPA_rule_the_skies_fighters
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_army_air_support_idea
				}
				swap_ideas = {
					remove_idea = SPA_army_air_support_idea
					add_idea = SPA_rule_the_skies_cas
				}
			}
			else_if = {
				limit = {
					NOT = {
						has_idea = SPA_rule_the_skies_fighters
						has_idea = SPA_rule_the_skies_cas
					}
				}
				custom_effect_tooltip = SPA_air_idea_effect
			}
		}
		search_filters = {
			FOCUS_FILTER_AIR_XP
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_AIRFORCE_BONUS
		}
	}
}
