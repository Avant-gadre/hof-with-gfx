add_namespace = mtg_britain
country_event = {
	id = mtg_britain.2
	title = mtg_britain.2.t
	desc = mtg_britain.2.d
	picture = GFX_report_event_generic_rally
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.2.a
		add_popularity = {
			ideology = neutrality
			popularity = 0.1
		}
		add_political_power = 100
		add_timed_idea = {
			idea = ENG_support_for_the_king_idea
			days = 150
		}
		custom_effect_tooltip = mtg_britain.2_tt
		hidden_effect = {
			country_event = {
				id = mtg_britain.3
				days = 50
			}
		}
	}
	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		ai_chance = {
			base = 0
		}
		country_event = {
			id = mtg_britain.14
			days = 40
			random_days = 10
		}
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Guide the Colonies notification event
country_event = {
	id = mtg_britain.17
	title = mtg_britain.17.t
	desc = mtg_britain.17.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.17.a
		if = {
			limit = {
				tag = CAN
			}
			effect_tooltip = {
				add_stability = 0.05
				add_opinion_modifier = {
					target = ENG
					modifier = ENG_guiding_the_colonies
				}
				add_ideas = ENG_guided_by_britain_1
			}
		}
		if = {
			limit = {
				tag = AST
			}
			effect_tooltip = {
				add_stability = 0.05
				add_opinion_modifier = {
					target = ENG
					modifier = ENG_guiding_the_colonies
				}
				add_ideas = ENG_guided_by_britain_1
			}
		}
		if = {
			limit = {
				tag = NZL
			}
			effect_tooltip = {
				add_stability = 0.05
				add_opinion_modifier = {
					target = ENG
					modifier = ENG_guiding_the_colonies
				}
				add_ideas = ENG_guided_by_britain_1
			}
		}
		if = {
			limit = {
				tag = SAF
			}
			effect_tooltip = {
				add_stability = 0.05
				add_opinion_modifier = {
					target = ENG
					modifier = ENG_guiding_the_colonies
				}
				add_ideas = ENG_guided_by_britain_1
			}
		}
	}
}

# Towards Dominion Independence notification event
country_event = {
	id = mtg_britain.18
	title = mtg_britain.18.t
	desc = mtg_britain.18.d
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.18.a
		if = {
			limit = {
				tag = CAN
			}
			effect_tooltip = {
				swap_ideas = {
					remove_idea = ENG_guided_by_britain_1
					add_idea = ENG_guided_by_britain_2
				}
			}
		}
		if = {
			limit = {
				tag = AST
			}
			effect_tooltip = {
				swap_ideas = {
					remove_idea = ENG_guided_by_britain_1
					add_idea = ENG_guided_by_britain_2
				}
			}
		}
		if = {
			limit = {
				tag = NZL
			}
			effect_tooltip = {
				swap_ideas = {
					remove_idea = ENG_guided_by_britain_1
					add_idea = ENG_guided_by_britain_2
				}
			}
		}
		if = {
			limit = {
				tag = SAF
			}
			effect_tooltip = {
				swap_ideas = {
					remove_idea = ENG_guided_by_britain_1
					add_idea = ENG_guided_by_britain_2
				}
			}
		}
	}
}

# Foundations for an Indian State notification event
country_event = {
	id = mtg_britain.19
	title = mtg_britain.19.t
	desc = mtg_britain.19.d
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.17.a
		effect_tooltip = {
			add_stability = 0.05
			add_opinion_modifier = {
				target = ENG
				modifier = ENG_guiding_the_colonies
			}
			add_ideas = ENG_guided_by_britain_raj_1
		}
	}
}

# Three-Nation Solution notification event
country_event = {
	id = mtg_britain.20
	title = mtg_britain.20.t
	desc = mtg_britain.20.d
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.20.a
		add_opinion_modifier = {
			target = ENG
			modifier = ENG_three_nation_solution
		}
		release = BAN
		ENG = {
			set_autonomy = {
				target = BAN
				autonomy_state = autonomy_colony
			}
		}
		BAN = {
			add_ideas = ENG_guided_by_britain_raj_1
		}
		release = PAK
		ENG = {
			set_autonomy = {
				target = PAK
				autonomy_state = autonomy_colony
			}
		}
		PAK = {
			add_ideas = ENG_guided_by_britain_raj_1
		}
		if = {
			limit = {
				has_idea = RAJ_marginalized_muslim_community_angry
			}
			swap_ideas = {
				add_idea = RAJ_marginalized_muslim_community_happy
				remove_idea = RAJ_marginalized_muslim_community_angry
			}
		}
		if = {
			limit = {
				has_idea = RAJ_marginalized_muslim_community
			}
			swap_ideas = {
				add_idea = RAJ_marginalized_muslim_community_happy
				remove_idea = RAJ_marginalized_muslim_community
			}
		}
	}
}

# Towards Indian Independence notification event
country_event = {
	id = mtg_britain.21
	title = mtg_britain.21.t
	desc = mtg_britain.18.d
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.18.a
		effect_tooltip = {
			swap_ideas = {
				remove_idea = ENG_guided_by_britain_RAJ_1
				add_idea = ENG_guided_by_britain_RAJ_2
			}
			if = {
				limit = {
					tag = RAJ
					NOT = {
						is_subject = no
					}
					NOT = {
						has_autonomy_state = autonomy_dominion
					}
					has_dlc = "Together for Victory"
				}
				set_autonomy = {
					target = RAJ
					autonomy_state = autonomy_dominion
				}
			}
			if = {
				limit = {
					tag = PAK
					NOT = {
						is_subject = no
					}
					NOT = {
						has_autonomy_state = autonomy_dominion
					}
					has_dlc = "Together for Victory"
				}
				set_autonomy = {
					target = RAJ
					autonomy_state = autonomy_dominion
				}
			}
			if = {
				limit = {
					tag = BAN
					NOT = {
						is_subject = no
					}
					NOT = {
						has_autonomy_state = autonomy_dominion
					}
					has_dlc = "Together for Victory"
				}
				set_autonomy = {
					target = RAJ
					autonomy_state = autonomy_dominion
				}
			}
			retire_country_leader = yes
		}
	}
}

# Isolate the Mediterranean Threat event
country_event = {
	id = mtg_britain.23
	title = mtg_britain.23.t
	desc = mtg_britain.23.d
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# We will drop the Italians
	option = {
		name = mtg_britain.23.a
		if = {
			limit = {
				ITA = {
					is_in_faction_with = GER
				}
				ITA = {
					has_war = no
				}
				has_war = no
			}
			GER = {
				remove_from_faction = ITA
			}
		}
		FROM = {
			country_event = {
				id = mtg_britain.24
				hours = 6
			}
		}
		ITA = {
			country_event = {
				id = mtg_britain.25
				hours = 6
			}
		}
		hidden_effect = {
			GER = {
				add_ai_strategy = {
					type = befriend
					id = ITA
					value = -200
				}
				add_ai_strategy = {
					type = protect
					id = ITA
					value = -200
				}
				add_ai_strategy = {
					type = send_volunteers_desire
					id = ITA
					value = -200
				}
				add_ai_strategy = {
					type = support
					id = ITA
					value = -200
				}
				add_ai_strategy = {
					type = alliance
					id = ITA
					value = -200
				}
			}
			set_country_flag = ENG_ditched_the_italians_flag
			ITA = {
				set_country_flag = ENG_ditched_by_the_germans_flag
			}
		}
	}
	# We will stick by the Italians
	option = {
		name = mtg_britain.23.b
		ai_chance = {
			base = 0
		}
		FROM = {
			country_event = {
				id = mtg_britain.26
				hours = 6
			}
		}
	}
}

# Gibraltar for Spanish Support event for Spain
country_event = {
	id = mtg_britain.40
	title = mtg_britain.40.t
	desc = mtg_britain.40.d
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Accept
	option = {
		name = mtg_britain.40.a
		transfer_state = 118
		FROM = {
			add_to_faction = ROOT
			country_event = {
				id = mtg_britain.36
				hours = 6
			}
			hidden_effect = {
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = 200
				}
				add_ai_strategy = {
					type = antagonize
					id = ROOT
					value = -200
				}
			}
		}
		hidden_effect = {
			add_ai_strategy = {
				type = alliance
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = -200
			}
		}
	}
	# Reject
	option = {
		name = mtg_britain.40.b
		ai_chance = {
			base = 0
		}
		FROM = {
			country_event = {
				id = mtg_britain.37
				hours = 6
			}
		}
	}
}

# Gibraltar for Spanish Support acceptance event for Britain
country_event = {
	id = mtg_britain.41
	title = mtg_britain.41.t
	desc = mtg_britain.41.d
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Ok
	option = {
		name = excellent
		effect_tooltip = {
			FROM = {
				transfer_state = 118
			}
			add_to_faction = FROM
		}
		hidden_effect = {
			news_event = {
				id = mtg_news.25
				days = 1
			}
		}
	}
}

# Gibraltar for Spanish Support rejection event for Britain
country_event = {
	id = mtg_britain.42
	title = mtg_britain.42.t
	desc = mtg_britain.42.d
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Ok
	option = {
		name = unfortunate
	}
}

# Event for BAN notifying of white peace
country_event = {
	id = mtg_britain.78
	title = mtg_britain.78.t
	desc = mtg_britain.78.d
	picture = GFX_report_event_generic_sign_treaty2
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.75.a
		effect_tooltip = {
			BAN = {
				white_peace = PAK
			}
		}
		delete_unit_template_and_units = {
			division_template = "Bangladeshi Liberation Army"
		}
	}
}

# Event for Iran/Afghanistan demanding puppet status
country_event = {
	id = mtg_britain.79
	title = mtg_britain.79.t
	desc = mtg_britain.79.d
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# We have no choice
	option = {
		name = mtg_britain.79.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				strength_ratio = {
					tag = ENG
					ratio > 1
				}
			}
		}
		effect_tooltip = {
			ENG = {
				puppet = ROOT
			}
		}
		FROM = {
			country_event = {
				id = mtg_britain.80
				hours = 6
			}
		}
		hidden_effect = {
			news_event = {
				id = mtg_news.28
				hours = 30
			}
		}
	}
	# Never!
	option = {
		name = mtg_britain.79.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.8
				strength_ratio = {
					tag = ENG
					ratio < 0.5
				}
			}
			modifier = {
				factor = 0.8
				has_opinion = {
					target = ENG
					value > 99
				}
			}
			modifier = {
				factor = 0.8
				strength_ratio = {
					tag = ENG
					ratio < 0.3
				}
			}
			modifier = {
				factor = 0.8
				strength_ratio = {
					tag = ENG
					ratio < 0.2
				}
			}
			modifier = {
				factor = 0.5
				strength_ratio = {
					tag = ENG
					ratio < 0.1
				}
			}
			modifier = {
				factor = 0.8
				SOV = {
					has_completed_focus = SOV_anti_colonialist_rebels
				}
			}
			modifier = {
				factor = 0
				OR = {
					SOV = {
						focus_progress = {
							focus = SOV_southern_thrust
							progress > 0
						}
						has_completed_focus = SOV_southern_thrust
					}
					has_war_with = SOV
				}
			}
		}
		effect_tooltip = {
			if = {
				limit = {
					tag = PER
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = PER
				}
			}
			if = {
				limit = {
					tag = AFG
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = AFG
				}
			}
		}
		FROM = {
			country_event = {
				id = mtg_britain.81
				hours = 6
			}
		}
		hidden_effect = {
			news_event = {
				id = mtg_news.29
				hours = 30
			}
		}
	}
}

# Event for ENG that PER/AFG accepted puppet status
country_event = {
	id = mtg_britain.80
	title = mtg_britain.80.t
	desc = mtg_britain.80.d
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.80.a
		puppet = FROM
	}
}

# Event for ENG that PER/AFG rejected puppet status
country_event = {
	id = mtg_britain.81
	title = mtg_britain.81.t
	desc = mtg_britain.81.d
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.81.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
}

# Event for target saying they are in violation of the Washington Naval Treaty and ENG wants them to scuttle some ships
country_event = {
	id = mtg_britain.106
	title = mtg_britain.106.t
	desc = mtg_britain.106.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.106.a
	}
}

# Event for ENG informing them that the target has scuttled some ships and is now compliant with the treaty
country_event = {
	id = mtg_britain.107
	title = mtg_britain.107.t
	desc = mtg_britain.107.d
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Ok
	option = {
		name = mtg_britain.107.a
	}
}

# Event for RAJ giving BRM independence
country_event = {
	id = mtg_britain.109
	title = mtg_britain.109.t
	desc = mtg_britain.109.d
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Ok I guess
	option = {
		name = mtg_britain.109.a
		release = BRM
	}
}

# UK becomes just England
country_event = {
	id = mtg_britain.110
	trigger = {
		tag = ENG
		country_exists = WLS
		country_exists = SCO
		NOT = {
			has_global_flag = ENG_became_england
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	hidden = yes
	immediate = {
		set_cosmetic_tag = ENG_england
		set_global_flag = ENG_became_england
	}
}

# UK becomes UK again
country_event = {
	id = mtg_britain.111
	trigger = {
		tag = ENG
		NOT = {
			country_exists = NIR
		}
		NOT = {
			country_exists = WLS
		}
		NOT = {
			country_exists = SCO
		}
		owns_state = 120
		owns_state = 119
		owns_state = 136
		owns_state = 133
		owns_state = 121
		has_global_flag = ENG_became_england
	}
	mean_time_to_happen = {
		days = 2
	}
	hidden = yes
	immediate = {
		drop_cosmetic_tag = yes
		clr_global_flag = ENG_became_england
	}
}
