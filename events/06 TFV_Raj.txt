###########################
# RAJ TFV events Events
###########################

add_namespace = tfv_raj

#RAF funding
country_event = {
	id = tfv_raj.1
	title = tfv_raj.1.t	
	desc = tfv_raj.1.desc	#
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes
	immediate = {
		set_variable = {fighter_buy_amount = 100}
	}

	option = { 
		name = tfv_raj.1.a
		ai_chance = {
			base = 100
		}
		ENG = { country_event = { id = tfv_raj.2 } }
	}
	option = { 
		name = tfv_raj.1.b
		trigger = {
			OR = {
				AND = {
					has_tech = early_fighter
					NOT = { has_tech = fighter1}
				}

				AND = {
					has_tech = iw_small_airframe
					NOT = { has_tech = basic_small_airframe }
				}
			}
		}

		if = {
			limit = {
				NOT = { has_dlc = "By Blood Alone" }
			}
			add_equipment_to_stockpile = { type = fighter_equipment_0 amount = var:fighter_buy_amount producer = RAJ }
		}
		else = {
			bba_get_fighter_ENG_effect = yes	
		}

		clear_variable = fighter_buy_amount
	}
	option = { 
		name = tfv_raj.1.b
		trigger = {
			OR = {
				AND = {
					has_tech = fighter1
					NOT = { has_tech = fighter2 }
				}
				AND = {
					has_tech = basic_small_airframe
					NOT = { has_tech = improved_small_airframe }
				}
			}
		}
		
		if = {
			limit = {
				NOT = { has_dlc = "By Blood Alone" }
			}
			add_equipment_to_stockpile = { type = fighter_equipment_1 amount = var:fighter_buy_amount producer = RAJ }
		}
		else = {
			bba_get_fighter_ENG_effect = yes	
		}

		clear_variable = fighter_buy_amount
	}
	option = { 
		name = tfv_raj.1.b
		trigger = {
			OR = {
				AND = {
					has_tech = fighter2
					NOT = { has_tech = fighter3 }
				}
				AND = {
					has_tech = improved_small_airframe
					NOT  = { has_tech = advanced_small_airframe }
				}
			}
		}
		if = {	
			limit = {
				NOT = { has_dlc = "By Blood Alone" }
			}
			add_equipment_to_stockpile = { type = fighter_equipment_2 amount = var:fighter_buy_amount producer = RAJ }
		}
		else = {
			bba_get_fighter_ENG_effect = yes
		}
		clear_variable = fighter_buy_amount
	}
	option = { 
		name = tfv_raj.1.b
		trigger = {
			OR = {
				has_tech = fighter3
				has_tech = advanced_small_airframe
			}
		}
		if = {	
			limit = {
				NOT = { has_dlc = "By Blood Alone" }
			}
			add_equipment_to_stockpile = { type = fighter_equipment_3 amount = var:fighter_buy_amount producer = RAJ }
		}
		else = {
			bba_get_fighter_ENG_effect = yes
		}

		clear_variable = fighter_buy_amount
	}

}

country_event = {
	id = tfv_raj.2
	title = tfv_raj.2.t	
	desc = tfv_raj.2.desc	#
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes
	immediate = {
		set_variable = {fighter_buy_amount = 100}
	}

	option = { 
		name = tfv_raj.2.a
		trigger = {
			OR = {
				AND = {
					has_tech = early_fighter
					NOT = { has_tech = fighter1}
				}

				AND = {
					has_tech = iw_small_airframe
					NOT = { has_tech = basic_small_airframe }
				}
			}
		}
		
		if = {
			limit = {
				NOT = { has_dlc = "By Blood Alone" }
			}
			add_equipment_to_stockpile = { type = fighter_equipment_0 amount = var:fighter_buy_amount producer = ENG }
		}
		else = {
			bba_get_fighter_ENG_effect = yes	
		}

		clear_variable = fighter_buy_amount
	}
	option = { 
		name = tfv_raj.2.a
		trigger = {
			OR = {
				AND = {
					has_tech = fighter1
					NOT = { has_tech = fighter2 }
				}
				AND = {
					has_tech = basic_small_airframe
					NOT = { has_tech = improved_small_airframe }
				}
			}
		}
		if = {
			limit = {
				NOT = { has_dlc = "By Blood Alone" }
			}
			add_equipment_to_stockpile = { type = fighter_equipment_1 amount = var:fighter_buy_amount producer = ENG }
		}
		else = {
			bba_get_fighter_ENG_effect = yes	
		}

		clear_variable = fighter_buy_amount
	}
	option = { 
		name = tfv_raj.2.a
		trigger = {
			OR = {
				AND = {
					has_tech = fighter2
					NOT = { has_tech = fighter3 }
				}
				AND = {
					has_tech = improved_small_airframe
					NOT  = { has_tech = advanced_small_airframe }
				}
			}
		}
		if = {	
			limit = {
				NOT = { has_dlc = "By Blood Alone" }
			}
			add_equipment_to_stockpile = { type = fighter_equipment_2 amount = var:fighter_buy_amount producer = ENG }
		}
		else = {
			bba_get_fighter_ENG_effect = yes
		}
		clear_variable = fighter_buy_amount
	}
	option = { 
		name = tfv_raj.2.a
		trigger = {
			OR = {
				has_tech = fighter3
				has_tech = advanced_small_airframe
			}
		}
		if = {	
			limit = {
				NOT = { has_dlc = "By Blood Alone" }
			}
			add_equipment_to_stockpile = { type = fighter_equipment_3 amount = var:fighter_buy_amount producer = ENG }
		}
		else = {
			bba_get_fighter_ENG_effect = yes
		}

		clear_variable = fighter_buy_amount
	}

}

#RAJ gets famine - Trigger/randomness event
country_event = {
	id = tfv_raj.20
	
	hidden = yes
	
	immediate = {
		country_event = { id = tfv_raj.21 days = 300 }
	}

	trigger = {
		#compare_autonomy_state < autonomy_dominion
		has_capitulated = no
		NOT = { surrender_progress > 0.5 }
		original_tag = RAJ
		has_idea = RAJ_risk_of_famine
		has_war = yes		
	}

	mean_time_to_happen = { days = 150 }

}

#RAJ gets famine - Actual event
country_event = {
	id = tfv_raj.21
	title = tfv_raj.21.t
	desc = tfv_raj.21.desc	#
	picture = GFX_report_event_indian_famine
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			remove_ideas = RAJ_risk_of_famine
			add_timed_idea = { idea = RAJ_famine days = 365 }
			news_event = { id = news.272 }
			news_event = { id = news.273 days = 365 }
		}
	}
			
	trigger = {
		#compare_autonomy_state < autonomy_dominion
		has_capitulated = no
		NOT = { surrender_progress > 0.5 }
		original_tag = RAJ
		has_idea = RAJ_risk_of_famine
	}

	option = {
		name = tfv_raj.21.a
		effect_tooltip = {
			remove_ideas = RAJ_risk_of_famine
			add_timed_idea = { idea = RAJ_famine days = 365 }
		}
	}
}
