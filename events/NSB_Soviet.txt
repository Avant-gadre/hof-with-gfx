###########################
# NSB Soviet Events
###########################
add_namespace = NSB_soviet_paranoia_system_events
add_namespace = NSB_soviet_propaganda_capmaign_events
add_namespace = NSB_soviet_foreign_politics_events
add_namespace = NSB_soviet_academy_of_sciences
add_namespace = NSB_soviet_atomic_bomb_project
add_namespace = NSB_soviet_five_year_plan
add_namespace = NSB_soviet_great_patriotic_war
add_namespace = NSB_soviet_soviet_german_trade_agreement
add_namespace = NSB_soviet_policies_of_collective_security
add_namespace = NSB_soviet_comecon
add_namespace = NSB_soviet_spanish_civil_war
add_namespace = NSB_soviet_planned_economy
add_namespace = NSB_Soviet_fascist_civil_war
add_namespace = NSB_soviet_communist_civil_war
add_namespace = NSB_soviet_permanent_revolution
add_namespace = NSB_soviet_for_the_common_good
add_namespace = NSB_soviet_civil_war_common
add_namespace = NSB_soviet_fascist_tsarist
add_namespace = NSB_soviet_nationalist
########  ########   #######  ########     ###     ######      ###    ##    ## ########     ###    
##     ## ##     ## ##     ## ##     ##   ## ##   ##    ##    ## ##   ###   ## ##     ##   ## ##   
##     ## ##     ## ##     ## ##     ##  ##   ##  ##         ##   ##  ####  ## ##     ##  ##   ##  
########  ########  ##     ## ########  ##     ## ##   #### ##     ## ## ## ## ##     ## ##     ## 
##        ##   ##   ##     ## ##        ######### ##    ##  ######### ##  #### ##     ## ######### 
##        ##    ##  ##     ## ##        ##     ## ##    ##  ##     ## ##   ### ##     ## ##     ## 
##        ##     ##  #######  ##        ##     ##  ######   ##     ## ##    ## ########  ##     ## 
#Propaganda Dispatcher - Left Slot - Used to update Campaign GFX when it's old.
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.101
	title = NSB_soviet_propaganda_capmaign_events.101.t
	desc = NSB_soviet_propaganda_capmaign_events.101.desc
	is_triggered_only = yes
	trigger = {
		check_variable = {
			SOV_propaganda_left_poster_to_age = SOV_poster_left_icon_frame
		}		#So that this does not happen if a propaganda is cancelled, breaking everything
	}
	hidden = yes
	immediate = {
		set_country_flag = SOV_propaganda_left_slot_is_old_flag
		#log = "I AM HERE: LEFT FRAME IS [?SOV_poster_left_icon_frame] // POSTER TO AGE IS [?SOV_propaganda_left_poster_to_age]" #Debug
	}
}

#Propaganda Dispatcher - Center Slot - Used to update Campaign GFX when it's old.
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.102
	title = NSB_soviet_propaganda_capmaign_events.102.t
	desc = NSB_soviet_propaganda_capmaign_events.102.desc
	is_triggered_only = yes
	trigger = {
		check_variable = {
			SOV_propaganda_center_poster_to_age = SOV_poster_center_icon_frame
		}		#So that this does not happen if a propaganda is cancelled, breaking everything
	}
	hidden = yes
	immediate = {
		set_country_flag = SOV_propaganda_center_slot_is_old_flag
		#log = "I AM HERE: CENTER FRAME IS [?SOV_poster_center_icon_frame] // POSTER TO AGE IS [?SOV_propaganda_center_poster_to_age]" #Debug
	}
}

#Propaganda Dispatcher - Right Slot - Used to update Campaign GFX when it's old.
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.103
	title = NSB_soviet_propaganda_capmaign_events.103.t
	desc = NSB_soviet_propaganda_capmaign_events.103.desc
	is_triggered_only = yes
	trigger = {
		check_variable = {
			SOV_propaganda_right_poster_to_age = SOV_poster_right_icon_frame
		}		#So that this does not happen if a propaganda is cancelled, breaking everything
	}
	hidden = yes
	immediate = {
		set_country_flag = SOV_propaganda_right_slot_is_old_flag
		#log = "I AM HERE: RIGHT FRAME IS [?SOV_poster_right_icon_frame] // POSTER TO AGE IS [?SOV_propaganda_right_poster_to_age]" #Debug
	}
}

# YOUNG BUILDERS OF COMMUNISM - event for SOV's puppets
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.1
	title = NSB_soviet_propaganda_capmaign_events.1.t
	desc = NSB_soviet_propaganda_capmaign_events.1.desc
	picture = GFX_report_event_SOV_young_builders_of_communism
	is_triggered_only = yes
	option = {
		#OK
		name = NSB_soviet_propaganda_capmaign_events.1.a
		add_timed_idea = {
			idea = SOV_young_builders_of_communism
			days = SOV.SOV_default_propaganda_campaign_duration
		}
	}
}

# LONG LIVE TO PEACE - event for SOV (peace broken as attacker)
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.2
	title = NSB_soviet_propaganda_capmaign_events.2.t
	desc = NSB_soviet_propaganda_capmaign_events.2.desc
	picture = GFX_report_event_SOV_young_builders_of_communism
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			set_country_flag = SOV_punished_for_breaking_flag
			add_timed_idea = {
				idea = SOV_broken_peace_dreams_attacker
				days = 180
			}
			#RESET PROPAGANDA CAMPAIGN
			set_rule = {
				can_send_volunteers = yes
			}
			clr_country_flag = SOV_propaganda_peace_active_flag
			set_variable = {
				SOV_propaganda_campaign_to_remove = 25
			}
			SOV_reset_propaganda_campaign_slot_effect = yes
		}
	}
	option = {
		#OK
		name = NSB_soviet_propaganda_capmaign_events.2.a
		effect_tooltip = {
			add_timed_idea = {
				idea = SOV_broken_peace_dreams_attacker
				days = 180
			}
		}
	}
}

# LONG LIVE TO PEACE - event for SOV (peace broken as defender)
country_event = {
	id = NSB_soviet_propaganda_capmaign_events.3
	title = NSB_soviet_propaganda_capmaign_events.2.t
	desc = NSB_soviet_propaganda_capmaign_events.3.desc
	picture = GFX_report_event_SOV_young_builders_of_communism
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			set_country_flag = SOV_punished_for_breaking_flag
			add_timed_idea = {
				idea = SOV_broken_peace_dreams_defender
				days = 180
			}
			#RESET PROPAGANDA CAMPAIGN
			set_rule = {
				can_send_volunteers = yes
			}
			clr_country_flag = SOV_propaganda_peace_active_flag
			set_variable = {
				SOV_propaganda_campaign_to_remove = 25
			}
			SOV_reset_propaganda_campaign_slot_effect = yes
		}
	}
	option = {
		#OK
		name = NSB_soviet_propaganda_capmaign_events.3.a
		effect_tooltip = {
			add_timed_idea = {
				idea = SOV_broken_peace_dreams_defender
				days = 180
			}
		}
	}
}

########  #######  ########  ######## ####  ######   ##    ##    ########   #######  ##       #### ######## ####  ######   ######  
##       ##     ## ##     ## ##        ##  ##    ##  ###   ##    ##     ## ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##       ##     ## ##     ## ##        ##  ##        ####  ##    ##     ## ##     ## ##        ##     ##     ##  ##       ##       
######   ##     ## ########  ######    ##  ##   #### ## ## ##    ########  ##     ## ##        ##     ##     ##  ##        ######  
##       ##     ## ##   ##   ##        ##  ##    ##  ##  ####    ##        ##     ## ##        ##     ##     ##  ##             ## 
##       ##     ## ##    ##  ##        ##  ##    ##  ##   ###    ##        ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##        #######  ##     ## ######## ####  ######   ##    ##    ##         #######  ######## ####    ##    ####  ######   ######  
# SOV is pressuring our government - Event for Targeted country ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.1
	title = NSB_soviet_foreign_politics_events.1.t
	desc = NSB_soviet_foreign_politics_events.1.desc
	picture = "[GetPressureGovernmentGFX]"
	is_triggered_only = yes
	option = {
		#Join Faction - Keep government
		name = NSB_soviet_foreign_politics_events.1.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 4
				strength_ratio = {
					tag = FROM
					ratio < 0.2
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				OR = {
					FROM = {
						original_tag = SOV
						has_idea = SOV_maksim_litvinov
					}
					FROM = {
						ITA_has_foreign_affairs_or_nice_guy_hired = yes
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_in_faction = yes
					is_subject = yes
				}
			}
		}
		trigger = {
			NOT = {
				is_in_faction_with = FROM
			}
			#Lone Wolf Finland can't join any factions
			FIN_is_lone_wolf_finland = no
		}
		FROM = {
			add_to_faction = ROOT
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_pressured_our_government
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.151
					hours = 1
				}
			}
			# AI more friendly
			add_ai_strategy = {
				type = befriend
				id = FROM
				value = 100
			}
			FROM = {
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = 100
				}
			}
			add_ai_strategy = {
				type = alliance
				id = FROM
				value = 200
			}
		}
	}
	option = {
		#Change Government
		name = NSB_soviet_foreign_politics_events.1.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				OR = {
					FROM = {
						has_government = communism
						communism > 0.5
					}
					FROM = {
						has_government = democratic
						democratic > 0.5
					}
					FROM = {
						has_government = fascism
						fascism > 0.5
					}
					FROM = {
						has_government = neutrality
						neutrality > 0.5
					}
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				OR = {
					FROM = {
						original_tag = SOV
						has_idea = SOV_vyacheslav_molotov
					}
					FROM = {
						ITA_has_foreign_affairs_or_nice_guy_hired = yes
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_in_faction = yes
					is_subject = yes
				}
			}
		}
		trigger = {
			NOT = {
				has_government = FROM
			}
		}
		#Lone Wolf Finland can't join any factions - Tooltip for player
		if = {
			limit = {
				FIN_is_lone_wolf_finland = yes
			}
			custom_effect_tooltip = FIN_the_lone_wolf_no_faction_tt
		}
		set_politics = {
			ruling_party = FROM
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_pressured_our_government
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.158
					hours = 1
				}
			}
			# AI more friendly
			add_ai_strategy = {
				type = befriend
				id = FROM
				value = 20
			}
			FROM = {
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = 20
				}
			}
		}
	}
	option = {
		#REFUSE
		name = NSB_soviet_foreign_politics_events.1.c
		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				any_country = {
					is_major = yes
					has_guaranteed = ROOT
				}
			}
			modifier = {
				factor = 1.2
				any_country = {
					is_major = no
					has_guaranteed = ROOT
				}
			}
		}
		#Lone Wolf Finland can't join any factions - Tooltip for player
		if = {
			limit = {
				FIN_is_lone_wolf_finland = yes
			}
			custom_effect_tooltip = FIN_the_lone_wolf_no_faction_tt
		}
		add_popularity = {
			ideology = FROM
			popularity = 0.05
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_pressured_our_government
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.152
					hours = 1
				}
			}
		}
	}
}

# SOV is promoting ideology rallies - Event for Targeted country ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.2
	title = NSB_soviet_foreign_politics_events.2.t
	desc = NSB_soviet_foreign_politics_events.2.desc
	picture = "[GetPromotingIdeologyGFX]"
	is_triggered_only = yes
	option = {
		#OK
		name = NSB_soviet_foreign_politics_events.2.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio < 0.2
				}
			}
			modifier = {
				factor = 1.5
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_in_faction = yes
					is_subject = yes
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				OR = {
					FROM = {
						original_tag = SOV
						has_idea = SOV_maksim_litvinov
					}
					FROM = {
						ITA_has_foreign_affairs_or_nice_guy_hired = yes
					}
				}
			}
		}
		hidden_effect = {
			#Country is slightly more willing to cooperate with Soviets
			if = {
				limit = {
					FROM = {
						original_tag = SOV
					}
				}
				add_ai_strategy = {
					type = befriend
					id = SOV
					value = 10
				}
				add_ai_strategy = {
					type = alliance
					id = SOV
					value = 10
				}
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = ITA
					}
				}
				add_ai_strategy = {
					type = befriend
					id = ITA
					value = 10
				}
				add_ai_strategy = {
					type = alliance
					id = ITA
					value = 10
				}
			}
		}
		add_popularity = {
			ideology = FROM
			popularity = 0.1
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_stirring_the_masses
		}
	}
	option = {
		#Prevent it!
		name = NSB_soviet_foreign_politics_events.2.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				has_political_power < 70
			}
		}
		trigger = {
			NOT = {
				has_government = FROM
			}
		}
		add_political_power = -70
		add_stability = -0.05
		add_popularity = {
			ideology = ROOT
			popularity = 0.1
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_stirring_the_masses
		}
	}
}

# SOV is investing in developing our country - Event for minor Asian allies
country_event = {
	id = NSB_soviet_foreign_politics_events.10
	title = NSB_soviet_foreign_politics_events.10.t
	desc = NSB_soviet_foreign_politics_events.10.desc
	picture = GFX_report_event_china_ledo_road
	is_triggered_only = yes
	option = {
		#Ok
		name = NSB_soviet_foreign_politics_events.10.a
		ai_chance = {
			base = 1
		}
		#CAPITAL
		capital_scope = {
			if = {
				limit = {
					infrastructure < 4
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			else_if = {
				limit = {
					infrastructure < 5
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			else_if = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		#ADDITIONAL RANDOM STATE
		if = {
			limit = {
				any_owned_state = {
					is_capital = no
				}
			}
			random_owned_state = {
				limit = {
					is_capital = no
				}
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	option = {
		#Refuse
		name = NSB_soviet_foreign_politics_events.10.b
		ai_chance = {
			base = 0
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_refused_to_follow_our_guidelines
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.13
				hours = 8
				random_hours = 4
			}
		}
	}
}

# SOV wants us to follow war measures - Event for minor Asian allies
country_event = {
	id = NSB_soviet_foreign_politics_events.11
	title = NSB_soviet_foreign_politics_events.11.t
	desc = NSB_soviet_foreign_politics_events.11.desc
	picture = GFX_report_event_SOV_mongolia_cavalry
	is_triggered_only = yes
	option = {
		#Ok
		name = NSB_soviet_foreign_politics_events.11.a
		ai_chance = {
			base = 1
		}
		add_timed_idea = {
			idea = SOV_war_measures_allies
			days = 1095
		}
	}
	option = {
		#Refuse
		name = NSB_soviet_foreign_politics_events.11.b
		ai_chance = {
			base = 0
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_refused_to_follow_our_guidelines
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.13
				hours = 8
				random_hours = 4
			}
		}
	}
}

# SOV wants to fortify our border with JAP - Event for MON
country_event = {
	id = NSB_soviet_foreign_politics_events.12
	title = NSB_soviet_foreign_politics_events.12.t
	desc = NSB_soviet_foreign_politics_events.12.desc
	picture = GFX_report_event_SOV_mongolia_fortify_border
	is_triggered_only = yes
	option = {
		#Ok
		name = NSB_soviet_foreign_politics_events.12.a
		ai_chance = {
			base = 1
		}
		SOV_fortify_mongolian_border_effect = yes
	}
	option = {
		#Refuse
		name = NSB_soviet_foreign_politics_events.12.b
		ai_chance = {
			base = 0
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_refused_to_follow_our_guidelines
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.13
				hours = 8
				random_hours = 4
			}
		}
	}
}

# Our ally rejects our guidelines - Event for SOV (when any of the three events above are refused by a PLAYER)
country_event = {
	id = NSB_soviet_foreign_politics_events.13
	title = NSB_soviet_foreign_politics_events.13.t
	desc = NSB_soviet_foreign_politics_events.13.desc
	picture = GFX_report_event_stalin_meeting
	is_triggered_only = yes
	option = {
		#Refuse
		name = NSB_soviet_foreign_politics_events.13.a
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_refused_to_follow_our_guidelines
			}
		}
	}
}

# SOV sends military advisors - Event for SPR
country_event = {
	id = NSB_soviet_foreign_politics_events.20
	title = NSB_soviet_foreign_politics_events.20.t
	desc = NSB_soviet_foreign_politics_events.20.desc
	picture = GFX_report_event_spr_spanish_civil_war
	is_triggered_only = yes
	option = {
		#Ok
		name = NSB_soviet_foreign_politics_events.20.a
		add_timed_idea = {
			idea = SOV_soviet_advisors_spr
			days = 1095
		}
		effect_tooltip = {
			FROM = {
				add_timed_idea = {
					idea = SOV_military_advisors_in_spain
					days = 1095
				}
			}
		}
	}
}

# SOV demands Alaska - Event for USA (or Alaska's owner)
country_event = {
	id = NSB_soviet_foreign_politics_events.30
	title = NSB_soviet_foreign_politics_events.30.t
	desc = NSB_soviet_foreign_politics_events.30.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_pressured_our_government
			}
		}
	}
	option = {
		#Accept
		name = NSB_soviet_foreign_politics_events.30.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 10
				NOT = {
					is_in_faction_with = FROM
				}
				strength_ratio = {
					tag = FROM
					ratio < 0.6
				}
			}
			modifier = {
				factor = 5
				NOT = {
					is_in_faction_with = FROM
				}
				alliance_strength_ratio < 0.6
			}
			modifier = {
				factor = 100
				is_subject_of = FROM
			}
			modifier = {
				factor = 10
				is_in_faction_with = FROM
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.2
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 0.8
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					is_in_faction_with = FROM
				}
				strength_ratio = {
					tag = FROM
					ratio > 0.8
				}
			}
			modifier = {
				factor = 0
				NOT = {
					is_in_faction_with = FROM
				}
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
		}
		FROM = {
			effect_tooltip = {
				if = {
					limit = {
						ROOT = {
							controls_state = 463
						}
					}
					transfer_state = 463					#ALASKA
				}
				if = {
					limit = {
						ROOT = {
							controls_state = 650
						}
					}
					transfer_state = 650					#ATTU ISLAND
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_complied_with_our_demands
				}
			}
			hidden_effect = {
				country_event = NSB_soviet_foreign_politics_events.31
			}
		}
	}
	option = {
		#Refuse
		name = NSB_soviet_foreign_politics_events.30.b
		ai_chance = {
			base = 10
		}
		FROM = {
			effect_tooltip = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_our_demands
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ROOT
				}
			}
			hidden_effect = {
				country_event = NSB_soviet_foreign_politics_events.32
			}
		}
	}
}

# USA cedes Alaska - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.31
	title = NSB_soviet_foreign_politics_events.31.t
	desc = NSB_soviet_foreign_politics_events.31.desc
	picture = GFX_report_event_generic_usa_treaty
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_complied_with_our_demands
			}
		}
	}
	option = {
		#Ok
		name = NSB_soviet_foreign_politics_events.31.a
		if = {
			limit = {
				FROM = {
					controls_state = 463
				}
			}
			transfer_state = 463			#ALASKA
		}
		if = {
			limit = {
				FROM = {
					controls_state = 650
				}
			}
			transfer_state = 650			#ATTU ISLAND
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_pressured_our_government
				}
			}
		}
	}
}

# USA refuses to cede Alaska - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.32
	title = NSB_soviet_foreign_politics_events.32.t
	desc = NSB_soviet_foreign_politics_events.32.desc
	picture = GFX_report_event_generic_usa_treaty
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_rejected_our_demands
			}
		}
	}
	option = {
		#WAAAAAGH!
		name = NSB_soviet_foreign_politics_events.32.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
			modifier = {
				factor = 2
				has_war = yes
				alliance_strength_ratio > 0.8
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.2
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 0.8
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				factor = 0.5
				is_in_faction_with = FROM
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				factor = 0.5
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 0
				is_in_faction_with = FROM
			}
		}
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
	option = {
		#Leave it be
		name = NSB_soviet_foreign_politics_events.32.b
		ai_chance = {
			base = 10
		}
	}
}

# Country becomes a puppet - Event for SOV ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.150
	title = NSB_soviet_foreign_politics_events.150.t
	desc = NSB_soviet_foreign_politics_events.150.desc
	picture = "[GetCountryBecomesPuppetGFX]"
	is_triggered_only = yes
	option = {
		#Cool
		name = NSB_soviet_foreign_politics_events.150.a
		effect_tooltip = {
			set_politics = {
				ruling_party = ROOT
			}
			puppet = FROM
			add_to_faction = FROM
		}
	}
}

# Country joins faction - Event for SOV ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.151
	title = NSB_soviet_foreign_politics_events.151.t
	desc = NSB_soviet_foreign_politics_events.151.desc
	picture = "[GetCountryBecomesPuppetGFX]"
	is_triggered_only = yes
	option = {
		#Okay
		name = NSB_soviet_foreign_politics_events.151.a
		effect_tooltip = {
			add_to_faction = FROM
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_pressured_our_government
				}
			}
		}
	}
}

# Country changes government - Event for SOV ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.158
	title = NSB_soviet_foreign_politics_events.158.t
	desc = NSB_soviet_foreign_politics_events.158.desc
	picture = "[GetCountryChangesGovernmentGFX]"
	is_triggered_only = yes
	option = {
		#Okay
		name = NSB_soviet_foreign_politics_events.158.a
		effect_tooltip = {
			FROM = {
				set_politics = {
					ruling_party = ROOT
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_pressured_our_government
				}
			}
		}
	}
}

# Country refuses - Event for SOV ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.152
	title = NSB_soviet_foreign_politics_events.152.t
	desc = NSB_soviet_foreign_politics_events.152.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	option = {
		#Okay - Default generic option
		name = NSB_soviet_foreign_politics_events.152.a
		ai_chance = {
			base = 1
		}
		trigger = {
			NOT = {
				FROM = {
					original_tag = PER
				}
				ROOT = {
					original_tag = SOV
				}
			}
		}
		if = {
			limit = {
				NOT = {
					is_in_faction_with = FROM
				}
			}
			if = {
				limit = {
					OR = {
						has_government = fascism
						has_government = neutrality
					}
				}
				create_wargoal = {
					type = annex_everything
					target = FROM
				}
			}
			else = {
				create_wargoal = {
					type = puppet_wargoal_focus
					target = FROM
				}
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_pressured_our_government
				}
			}
		}
	}
	option = {
		#Respect
		name = NSB_soviet_foreign_politics_events.152.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				FROM = {
					original_tag = PER
				}
				original_tag = SOV
			}
		}
	}
	option = {
		#Make Preparations -> Iran
		name = NSB_soviet_foreign_politics_events.152.c
		trigger = {
			FROM = {
				original_tag = PER
			}
			original_tag = SOV
			is_subject = no
		}
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					strength_ratio = {
						tag = FROM
						ratio < 0.6
					}
					surrender_progress > 0.25
				}
			}
		}
		set_global_flag = SOV_soviet_invasion_of_iran_flag
		activate_mission = SOV_preparations_for_operation_countenance
		custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt
		custom_effect_tooltip = SOV_operation_countenance_successful_tt
		effect_tooltip = {
			puppet = PER
			transfer_state = 419			#Tibriz (AZB)
			transfer_state = 420			#Gilan (AZB)
			transfer_state = 416			#Khorasan
			PER = {
				give_resource_rights = {
					receiver = SOV
					state = 411
				}
				give_resource_rights = {
					receiver = SOV
					state = 412
				}
				give_resource_rights = {
					receiver = SOV
					state = 413
				}
			}
		}
	}
	option = {
		#Joint Invasion with ENG -> Iran
		name = NSB_soviet_foreign_politics_events.152.d
		trigger = {
			FROM = {
				original_tag = PER
			}
			original_tag = SOV
			is_subject = no
			country_exists = ENG
			NOT = {
				has_war_with = ENG
			}
			NOT = {
				is_justifying_wargoal_against = ENG
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				factor = 100
				is_in_faction_with = ENG
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > -25
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				OR = {
					strength_ratio = {
						tag = FROM
						ratio < 0.6
					}
					surrender_progress > 0.25
				}
			}
		}
		ENG = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.153
				hours = 6
				random_hours = 3
			}
		}
		effect_tooltip = {
			custom_effect_tooltip = if_they_accept_tt
			activate_mission = SOV_preparations_for_operation_countenance
			ENG = {
				activate_mission = SOV_preparations_for_operation_countenance
			}
			custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt
			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			ENG = {
				puppet = PER
			}
			SOV = {
				transfer_state = 419				#Tibriz (AZB)
				transfer_state = 420				#Gilan (AZB)
				transfer_state = 416				#Khorasan
			}
			PER = {
				give_resource_rights = {
					receiver = SOV
					state = 411
				}
				give_resource_rights = {
					receiver = SOV
					state = 412
				}
				give_resource_rights = {
					receiver = ENG
					state = 413
				}
				give_military_access = SOV
			}
			custom_effect_tooltip = if_they_refuse_tt
			activate_mission = SOV_preparations_for_operation_countenance
			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			puppet = PER
			transfer_state = 419			#Tibriz (AZB)
			transfer_state = 420			#Gilan (AZB)
			transfer_state = 416			#Khorasan
			PER = {
				give_resource_rights = {
					receiver = SOV
					state = 411
				}
				give_resource_rights = {
					receiver = SOV
					state = 412
				}
				give_resource_rights = {
					receiver = SOV
					state = 413
				}
			}
		}
	}
}

# Anglo-Soviet Invasion of Iran proposal - Event for ENG
country_event = {
	id = NSB_soviet_foreign_politics_events.153
	title = NSB_soviet_foreign_politics_events.153.t
	desc = NSB_soviet_foreign_politics_events.153.desc
	picture = GFX_report_event_stalin_meeting
	is_triggered_only = yes
	option = {
		#Agree
		name = NSB_soviet_foreign_politics_events.153.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 100
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > -25
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0
				OR = {
					NOT = {
						any_enemy_country = {
							is_major = yes
							has_war_with = FROM
						}
					}
					has_war_with = PER
					has_guaranteed = PER
					has_non_aggression_pact_with = PER
					is_in_faction_with = PER
					is_subject = yes
					strength_ratio = {
						tag = FROM
						ratio < 0.6
					}
					surrender_progress > 0.5
				}
			}
		}
		set_global_flag = SOV_agreed_anglo_soviet_invasion_of_iran_flag
		effect_tooltip = {
			activate_mission = SOV_preparations_for_operation_countenance
			custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt
			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			puppet = PER
			SOV = {
				transfer_state = 419				#Tibriz (AZB)
				transfer_state = 420				#Gilan (AZB)
				transfer_state = 416				#Khorasan
			}
			PER = {
				give_resource_rights = {
					receiver = SOV
					state = 411
				}
				give_resource_rights = {
					receiver = SOV
					state = 412
				}
				give_resource_rights = {
					receiver = ENG
					state = 413
				}
				give_military_access = SOV
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.154
				hours = 1
			}
		}
	}
	option = {
		#Reject
		name = NSB_soviet_foreign_politics_events.153.b
		ai_chance = {
			base = 1
		}
		custom_effect_tooltip = NSB_soviet_foreign_politics_events.153_soviets_alone_tt
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.155
					hours = 4
				}
			}
			set_global_flag = SOV_soviet_invasion_of_iran_flag
		}
	}
}

# Anglo-Soviet Invasion of Iran - ENG ACCEPTS - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.154
	title = NSB_soviet_foreign_politics_events.154.t
	desc = NSB_soviet_foreign_politics_events.154.desc
	picture = GFX_report_event_british_inspect_troops
	is_triggered_only = yes
	option = {
		#Good
		name = NSB_soviet_foreign_politics_events.154.a
		activate_mission = SOV_preparations_for_operation_countenance
		ENG = {
			activate_mission = SOV_preparations_for_operation_countenance
		}
		custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt
		effect_tooltip = {
			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			ENG = {
				puppet = PER
			}
			transfer_state = 419			#Tibriz (AZB)
			transfer_state = 420			#Gilan (AZB)
			transfer_state = 416			#Khorasan
			PER = {
				give_resource_rights = {
					receiver = SOV
					state = 411
				}
				give_resource_rights = {
					receiver = SOV
					state = 412
				}
				give_resource_rights = {
					receiver = ENG
					state = 413
				}
				give_military_access = SOV
			}
		}
	}
}

# Anglo-Soviet Invasion of Iran - ENG REFUSES - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.155
	title = NSB_soviet_foreign_politics_events.155.t
	desc = NSB_soviet_foreign_politics_events.155.desc
	picture = GFX_report_event_generic_sign_treaty2
	is_triggered_only = yes
	option = {
		#Ok
		name = NSB_soviet_foreign_politics_events.155.a
		activate_mission = SOV_preparations_for_operation_countenance
		custom_effect_tooltip = SOV_preparations_for_operation_countenance_tt
		effect_tooltip = {
			custom_effect_tooltip = SOV_operation_countenance_successful_tt
			puppet = PER
			transfer_state = 419			#Tibriz (AZB)
			transfer_state = 420			#Gilan (AZB)
			transfer_state = 416			#Khorasan
			PER = {
				give_resource_rights = {
					receiver = SOV
					state = 411
				}
				give_resource_rights = {
					receiver = SOV
					state = 412
				}
				give_resource_rights = {
					receiver = SOV
					state = 413
				}
			}
		}
	}
}

# HIDDEN EVENT TO MANAGE THE FALL OF IRAN - ONLY SOVIETS
country_event = {
	id = NSB_soviet_foreign_politics_events.156
	is_triggered_only = yes
	hidden = yes
	immediate = {
		transfer_state = 419		#Tibriz (AZB)
		transfer_state = 420		#Gilan (AZB)
		transfer_state = 416		#Khorasan
		PER = {
			give_resource_rights = {
				receiver = SOV
				state = 411
			}
			give_resource_rights = {
				receiver = SOV
				state = 412
			}
			give_resource_rights = {
				receiver = SOV
				state = 413
			}
		}
		411 = {
			set_state_flag = SOV_soviet_resource_rights_iran_flag
		}
		412 = {
			set_state_flag = SOV_soviet_resource_rights_iran_flag
		}
		413 = {
			set_state_flag = SOV_soviet_resource_rights_iran_flag
		}
	}
}

# HIDDEN EVENT TO MANAGE THE FALL OF IRAN - JOINT INVASION
country_event = {
	id = NSB_soviet_foreign_politics_events.157
	is_triggered_only = yes
	hidden = yes
	immediate = {
		transfer_state = 419		#Tibriz (AZB)
		transfer_state = 420		#Gilan (AZB)
		transfer_state = 416		#Khorasan
		PER = {
			give_resource_rights = {
				receiver = SOV
				state = 411
			}
			give_resource_rights = {
				receiver = SOV
				state = 412
			}
			give_resource_rights = {
				receiver = ENG
				state = 413
			}
			give_military_access = ROOT
		}
		411 = {
			set_state_flag = SOV_soviet_resource_rights_iran_flag
		}
		412 = {
			set_state_flag = SOV_soviet_resource_rights_iran_flag
		}
		413 = {
			set_state_flag = SOV_british_resource_rights_iran_flag
		}
	}
}

# Generic Ultimatum - Event for target ### (ITA uses this too)
country_event = {
	id = NSB_soviet_foreign_politics_events.200
	title = NSB_soviet_foreign_politics_events.200.t
	desc = NSB_soviet_foreign_politics_events.200.desc
	picture = "[GetUltimatumGFX]"
	is_triggered_only = yes
	option = {
		# Become a puppet
		name = NSB_soviet_foreign_politics_events.200.a
		ai_chance = {
			base = 2
			modifier = {
				factor = 1.5
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					AND = {
						FROM = {
							has_government = communism
						}
						communism > 0.5
					}
					AND = {
						FROM = {
							has_government = democratic
						}
						democratic > 0.5
					}
					AND = {
						FROM = {
							has_government = fascism
						}
						fascism > 0.5
					}
					AND = {
						FROM = {
							has_government = neutrality
						}
						neutrality > 0.5
					}
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 4
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 6
				strength_ratio = {
					tag = FROM
					ratio < 0.2
				}
			}
			modifier = {
				factor = 100
				is_in_faction_with = FROM
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				OR = {
					FROM = {
						original_tag = SOV
						has_idea = SOV_vyacheslav_molotov
					}
					FROM = {
						ITA_has_foreign_affairs_or_nice_guy_hired = yes
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_in_faction = yes
						NOT = {
							is_in_faction_with = FROM
						}
					}
					AND = {
						is_subject = yes
						NOT = {
							is_subject_of = FROM
						}
					}
				}
			}
		}
		trigger = {
			OR = {
				has_government = FROM
				FROM = {
					original_tag = ITA
				}
			}
		}
		set_politics = {
			ruling_party = FROM
		}
		FROM = {
			puppet = ROOT
			add_to_faction = ROOT
			hidden_effect = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.150
					hours = 1
				}
			}
		}
	}
	option = {
		#Join Faction - Keep government
		name = NSB_soviet_foreign_politics_events.200.b
		ai_chance = {
			base = 0
		}
		trigger = {
			FROM = {
				is_in_faction = yes
			}
		}
		FROM = {
			add_to_faction = ROOT
			hidden_effect = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.151
					hours = 1
				}
			}
		}
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_pressured_our_government
			}
		}
	}
	option = {
		#REFUSE
		name = NSB_soviet_foreign_politics_events.200.c
		ai_chance = {
			base = 10
			modifier = {
				factor = 0.1
				FROM = {
					original_tag = ITA
					NOT = {
						has_government = ROOT
					}
				}
				is_in_faction = no
			}
		}
		FROM = {
			effect_tooltip = {
				if = {
					limit = {
						NOT = {
							is_in_faction_with = ROOT
						}
					}
					if = {
						limit = {
							OR = {
								has_government = fascism
								has_government = neutrality
							}
						}
						create_wargoal = {
							type = annex_everything
							target = ROOT
						}
					}
				}
				else = {
					create_wargoal = {
						type = puppet_wargoal_focus
						target = ROOT
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.152
					hours = 1
				}
			}
		}
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_pressured_our_government
			}
		}
	}
}

# Ultimatum to Iran - Event for Iran
country_event = {
	id = NSB_soviet_foreign_politics_events.210
	title = NSB_soviet_foreign_politics_events.210.t
	desc = NSB_soviet_foreign_politics_events.210.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Become a puppet
		name = NSB_soviet_foreign_politics_events.210.a
		ai_chance = {
			base = 1
			modifier = {
				add = 0.5
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				add = 0.5
				OR = {
					FROM = {
						has_government = communism
						communism > 0.5
					}
					FROM = {
						has_government = democratic
						democratic > 0.5
					}
					FROM = {
						has_government = fascism
						fascism > 0.5
					}
					FROM = {
						has_government = neutrality
						neutrality > 0.5
					}
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.2
				}
			}
			modifier = {
				factor = 100
				is_in_faction_with = FROM
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_in_faction = yes
						NOT = {
							is_in_faction_with = FROM
						}
					}
					AND = {
						is_subject = yes
						NOT = {
							is_subject_of = FROM
						}
					}
				}
			}
		}
		set_politics = {
			ruling_party = FROM
		}
		FROM = {
			puppet = ROOT
			add_to_faction = ROOT
			hidden_effect = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.150
					hours = 1
				}
			}
		}
	}
	option = {
		#REFUSE
		name = NSB_soviet_foreign_politics_events.210.c
		ai_chance = {
			base = 20
			modifier = {
				factor = 2
				is_historical_focus_on = yes
			}
		}
		FROM = {
			hidden_effect = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.152
					hours = 1
				}
			}
		}
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_pressured_our_government
			}
		}
		custom_effect_tooltip = germany.126.warning
	}
}

# The Khakimov Proposal - Event for SAU
country_event = {
	id = NSB_soviet_foreign_politics_events.211
	title = NSB_soviet_foreign_politics_events.211.t
	desc = NSB_soviet_foreign_politics_events.211.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Okay
		name = NSB_soviet_foreign_politics_events.211.a
		effect_tooltip = {
			add_ideas = SOV_ambassador_karim_khakimov
			add_opinion_modifier = {
				target = SOV
				modifier = SOV_cordial_relations_developed_by_soviet_diplomat
			}
		}
	}
}

# SOV sends Infantry Equipment - Event for Target
country_event = {
	id = NSB_soviet_foreign_politics_events.250
	title = NSB_soviet_foreign_politics_events.250.t
	desc = NSB_soviet_foreign_politics_events.250.desc
	picture = "[GetInfantryEquipmentGFX]"
	is_triggered_only = yes
	option = {
		# Nice
		name = NSB_soviet_foreign_politics_events.10.a
		if = {
			#Spanish POUM -> Not actually transfering them, just creating spoawning them
			limit = {
				tag = SPC
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 6000
				producer = FROM
			}
		}
		else = {
			#Chinese tags get different stuff -> SOV actually sends stuff
			effect_tooltip = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 1000
					producer = FROM
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 200
					producer = FROM
				}
			}
		}
	}
}

# SOV prepares a war against JAP - Event for SOV's allies
country_event = {
	id = NSB_soviet_foreign_politics_events.251
	title = NSB_soviet_foreign_politics_events.251.t
	desc = NSB_soviet_foreign_politics_events.251.desc
	picture = GFX_report_event_SOV_tank_column
	is_triggered_only = yes
	option = {
		# Nice
		name = NSB_soviet_foreign_politics_events.251.a
		add_timed_idea = {
			idea = SOV_preparations_for_soviet_japanese_war_china
			days = 365
		}
	}
}

# SOV starts war with JAP - Event for SOV's allies
country_event = {
	id = NSB_soviet_foreign_politics_events.252
	title = NSB_soviet_foreign_politics_events.252.t
	desc = NSB_soviet_foreign_politics_events.252.desc
	picture = GFX_report_event_soviet_soldiers_tank
	is_triggered_only = yes
	option = {
		# Nice
		name = NSB_soviet_foreign_politics_events.252.a
		add_timed_idea = {
			idea = SOV_soviet_japanese_reckoning_china
			days = 180
		}
	}
}

# SOV Peace deal for South Sakhalin and Kuril Islands - Event for JAP
country_event = {
	id = NSB_soviet_foreign_politics_events.260
	title = NSB_soviet_foreign_politics_events.260.t
	desc = NSB_soviet_foreign_politics_events.260.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Accept
		name = NSB_soviet_foreign_politics_events.260.a
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 2
				surrender_progress > 0.25
			}
			modifier = {
				factor = 5
				any_owned_state = {
					is_core_of = ROOT
					is_in_home_area = yes
					NOT = {
						state = 536
					}					#HOKKAIDO
					is_controlled_by = FROM
				}
			}
			modifier = {
				factor = 10
				NOT = {
					has_full_control_of_state = 282
				}				#KANTO (Tokyo)
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
			modifier = {
				factor = 0.5
				naval_strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
		}
		white_peace = {
			tag = FROM
			#message = WE_CEDE_THEM_SOUTH_SAKHALIN_AND_KURIL_ISLANDS
		}
		FROM = {
			537 = {
				add_core_of = FROM
			}
			555 = {
				add_core_of = FROM
			}
			transfer_state = 537
			transfer_state = 555
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.260.b
		ai_chance = {
			base = 10
		}
	}
}

# SOV Peace deal for Hokkaido (and South Sakhalin and Kuril Islands) - Event for JAP
country_event = {
	id = NSB_soviet_foreign_politics_events.261
	title = NSB_soviet_foreign_politics_events.260.t
	desc = NSB_soviet_foreign_politics_events.261.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Accept
		name = NSB_soviet_foreign_politics_events.260.a
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.8
				}
			}
			modifier = {
				factor = 5
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 2
				surrender_progress > 0.25
			}
			modifier = {
				factor = 5
				any_owned_state = {
					is_core_of = ROOT
					is_in_home_area = yes
					NOT = {
						state = 536						#HOKKAIDO
						state = 555						#KURIL ISLANDS
					}
					is_controlled_by = FROM
				}
			}
			modifier = {
				factor = 10
				NOT = {
					has_full_control_of_state = 282
				}				#KANTO (Tokyo)
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
			modifier = {
				factor = 0.5
				naval_strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
		}
		white_peace = {
			tag = FROM
			#message = WE_CEDE_THEM_SOUTH_SAKHALIN_AND_KURIL_ISLANDS
		}
		FROM = {
			537 = {
				add_core_of = FROM
			}
			555 = {
				add_core_of = FROM
			}
			transfer_state = 537
			transfer_state = 536			#Hokkaido
			transfer_state = 555
		}
		hidden_effect = {
			FROM = {
				set_country_flag = SOV_hokkaido_included_in_peace_deal_flag
				country_event = {
					id = NSB_soviet_foreign_politics_events.264
					hours = 4
				}
			}
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.260.b
		ai_chance = {
			base = 10
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.265
					hours = 4
				}
			}
		}
	}
}

# JAP Accepts Peace Deal - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.264
	title = NSB_soviet_foreign_politics_events.264.t
	desc = NSB_soviet_foreign_politics_events.264.desc
	picture = GFX_report_event_soviet_japanese_pact
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.264.a
		effect_tooltip = {
			white_peace = {
				tag = ROOT
			}
			537 = {
				add_core_of = ROOT
			}
			555 = {
				add_core_of = ROOT
			}
			transfer_state = 537
			transfer_state = 555
			if = {
				limit = {
					has_country_flag = SOV_hokkaido_included_in_peace_deal_flag
				}
				transfer_state = 536				#Hokkaido
				clr_country_flag = SOV_hokkaido_included_in_peace_deal_flag
			}
		}
	}
}

# JAP Rejects Peace Deal - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.265
	title = NSB_soviet_foreign_politics_events.265.t
	desc = NSB_soviet_foreign_politics_events.265.desc
	picture = GFX_report_event_japanese_reply
	is_triggered_only = yes
	option = {
		# Bad for them
		name = NSB_soviet_foreign_politics_events.265.a
		if = {
			limit = {
				has_country_flag = SOV_hokkaido_included_in_peace_deal_flag
			}
			clr_country_flag = SOV_hokkaido_included_in_peace_deal_flag
		}
	}
}

# SOV offers North Sakhalin in exchange for NAP - Event for JAP
country_event = {
	id = NSB_soviet_foreign_politics_events.262
	title = soviet.23.t
	desc = soviet.23.d
	picture = GFX_report_event_soviet_japanese_pact
	is_triggered_only = yes
	option = {
		# Accept
		name = soviet.23.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Is going non-aligned (kill SOV in focus branch)
				factor = 0
				has_completed_focus = JAP_support_the_kodoha_faction
			}
		}
		add_opinion_modifier = {
			target = SOV
			modifier = border_conflict_reconciled
		}
		transfer_state = 655
		diplomatic_relation = {
			country = SOV
			relation = non_aggression_pact
			active = yes
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.266
					hours = 4
				}
			}
			set_global_flag = SOV_soviet_japanese_reconciliation_flag
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.262.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				#Is going commie or historical
				factor = 0
				OR = {
					has_completed_focus = JAP_the_unthinkable_option
					has_completed_focus = JAP_purge_the_kodoha_faction
				}
			}
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.267
					hours = 4
				}
			}
		}
	}
}

# JAP Accepts NAP - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.266
	title = NSB_soviet_foreign_politics_events.266.t
	desc = NSB_soviet_foreign_politics_events.266.desc
	picture = GFX_report_event_soviet_japanese_pact
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.266.a
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = border_conflict_reconciled
				}
				transfer_state = 655
				diplomatic_relation = {
					country = SOV
					relation = non_aggression_pact
					active = yes
				}
			}
		}
	}
}

# JAP Rejects NAP - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.267
	title = NSB_soviet_foreign_politics_events.267.t
	desc = NSB_soviet_foreign_politics_events.267.desc
	picture = GFX_report_event_japanese_reply
	is_triggered_only = yes
	option = {
		# Bad for them
		name = NSB_soviet_foreign_politics_events.267.a
	}
}

# SOV offers pact against USA - Event for JAP
country_event = {
	id = NSB_soviet_foreign_politics_events.263
	title = NSB_soviet_foreign_politics_events.263.t
	desc = NSB_soviet_foreign_politics_events.263.desc
	picture = GFX_report_event_soviet_japanese_pact
	is_triggered_only = yes
	option = {
		# Accept
		name = NSB_soviet_foreign_politics_events.263.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 5
				has_non_aggression_pact_with = FROM
			}
			modifier = {
				factor = 10
				has_war_with = USA
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
		}
		effect_tooltip = {
			#Diplo stuff
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_soviet_japanese_pact_against_usa
			}
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_soviet_japanese_pact_against_usa
				}
			}
			if = {
				limit = {
					NOT = {
						has_non_aggression_pact_with = SOV
					}
				}
				diplomatic_relation = {
					country = SOV
					relation = non_aggression_pact
					active = yes
				}
			}
			#Claims
			463 = {
				add_claim_by = SOV
			}			#Alaska
			650 = {
				add_claim_by = SOV
			}			#Atu Island
			632 = {
				add_claim_by = JAP
			}			#Wake Island
			631 = {
				add_claim_by = JAP
			}			#Midway Island
			629 = {
				add_claim_by = JAP
			}			#Hawaii
			630 = {
				add_claim_by = JAP
			}			#Johnston Atoll
			727 = {
				add_claim_by = JAP
			}			#Line Islands
			642 = {
				add_claim_by = JAP
			}			#Phoenix Island
			638 = {
				add_claim_by = JAP
			}			#Guam
			#War
			if = {
				limit = {
					JAP = {
						has_war_with = USA
					}
					NOT = {
						SOV = {
							has_war_with = USA
						}
					}
				}
				SOV = {
					add_to_war = {
						targeted_alliance = JAP
						enemy = USA
						hostility_reason = asked_to_join
					}
				}
			}
			else_if = {
				limit = {
					SOV = {
						has_war_with = USA
					}
					NOT = {
						JAP = {
							has_war_with = USA
						}
					}
				}
				JAP = {
					add_to_war = {
						targeted_alliance = SOV
						enemy = USA
						hostility_reason = asked_to_join
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						SOV = {
							has_war_with = USA
						}
					}
					NOT = {
						JAP = {
							has_war_with = USA
						}
					}
				}
				SOV = {
					declare_war_on = {
						target = USA
						type = annex_everything
					}
				}
				JAP = {
					add_to_war = {
						targeted_alliance = SOV
						enemy = USA
						hostility_reason = asked_to_join
					}
				}
			}
			#Targeted NS
			SOV = {
				add_timed_idea = {
					idea = SOV_soviet_japanese_anti_usa_pact
					days = 365
				}
			}
			JAP = {
				add_timed_idea = {
					idea = SOV_soviet_japanese_anti_usa_pact
					days = 365
				}
			}
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.268
					hours = 1
				}
			}
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.263.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				factor = 100
				strength_ratio = {
					tag = USA
					ratio < 0.5
				}
			}
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.269
					hours = 4
				}
			}
		}
	}
}

# JAP Accepts pact against USA - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.268
	title = NSB_soviet_foreign_politics_events.268.t
	desc = NSB_soviet_foreign_politics_events.268.desc
	picture = GFX_report_event_soviet_japanese_pact
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.268.a
		463 = {
			add_claim_by = SOV
		}		#Alaska
		650 = {
			add_claim_by = SOV
		}		#Atu Island
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_soviet_japanese_pact_against_usa
		}
		FROM = {
			#Diplo stuff
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_soviet_japanese_pact_against_usa
			}
			diplomatic_relation = {
				country = SOV
				relation = non_aggression_pact
				active = yes
			}
			#Claims
			632 = {
				add_claim_by = JAP
			}			#Wake Island
			631 = {
				add_claim_by = JAP
			}			#Midway Island
			629 = {
				add_claim_by = JAP
			}			#Hawaii
			630 = {
				add_claim_by = JAP
			}			#Johnston Atoll
			727 = {
				add_claim_by = JAP
			}			#Line Islands
			642 = {
				add_claim_by = JAP
			}			#Phoenix Island
			638 = {
				add_claim_by = JAP
			}			#Guam
		}
		#War
		if = {
			limit = {
				JAP = {
					has_war_with = USA
				}
				NOT = {
					SOV = {
						has_war_with = USA
					}
				}
			}
			SOV = {
				add_to_war = {
					targeted_alliance = JAP
					enemy = USA
					hostility_reason = asked_to_join
				}
			}
		}
		else_if = {
			limit = {
				SOV = {
					has_war_with = USA
				}
				NOT = {
					JAP = {
						has_war_with = USA
					}
				}
			}
			JAP = {
				add_to_war = {
					targeted_alliance = SOV
					enemy = USA
					hostility_reason = asked_to_join
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					SOV = {
						has_war_with = USA
					}
				}
				NOT = {
					JAP = {
						has_war_with = USA
					}
				}
			}
			SOV = {
				declare_war_on = {
					target = USA
					type = annex_everything
				}
			}
			JAP = {
				add_to_war = {
					targeted_alliance = SOV
					enemy = USA
					hostility_reason = asked_to_join
				}
			}
		}
		#Targeted NS
		SOV = {
			add_timed_idea = {
				idea = SOV_soviet_japanese_anti_usa_pact
				days = 365
			}
		}
		JAP = {
			add_timed_idea = {
				idea = SOV_soviet_japanese_anti_usa_pact
				days = 365
			}
		}
	}
}

# JAP Rejects pact against USA - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.269
	title = NSB_soviet_foreign_politics_events.269.t
	desc = NSB_soviet_foreign_politics_events.269.desc
	picture = GFX_report_event_japanese_reply
	is_triggered_only = yes
	option = {
		# Bad for them
		name = NSB_soviet_foreign_politics_events.269.a
	}
}

####### SINKIANG ########
# SOV-SINKIANG - Initiate relations (Railwway SOV-SIK - Gobi Gambit) - Event for SIK
country_event = {
	id = NSB_soviet_foreign_politics_events.270
	title = NSB_soviet_foreign_politics_events.270.t
	desc = NSB_soviet_foreign_politics_events.270.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# OK
		name = NSB_soviet_foreign_politics_events.270.a
		ai_chance = {
			base = 3
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_complied_with_our_demands
			}
			# Tashkent - Frunze - Alma-Ata - Urumqi
			build_railway = {
				path = {
					1459
					10148
					10366
					12397
					12340
					12640
					7706
					12583
					4224
					1591
					10547
					10619
					12529
					7866
					1783
					10674
					4709
				}
			}
			#Supply Hub in Alma-Ata
			586 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 1591
					instant_build = yes
				}
			}
			add_to_variable = {
				SOV_fyp_consumer_goods_factor = -0.02
			}
		}
		custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sik
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.271
					hours = 1
				}
			}
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.270.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				add = 1
				is_in_faction = yes
				NOT = {
					is_in_faction_with = SOV
				}
			}
			modifier = {
				add = 5
				FROM = {
					is_justifying_wargoal_against = ROOT
				}
			}
			modifier = {
				add = 10
				is_subject = yes
				NOT = {
					is_subject_of = SOV
				}
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_our_demands
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.272
				hours = 1
			}
		}
		custom_effect_tooltip = germany.126.warning
	}
}

# SOV-SINKIANG - Sinkiang accepts our proposal - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.271
	title = NSB_soviet_foreign_politics_events.271.t
	desc = NSB_soviet_foreign_politics_events.271.desc
	picture = GFX_report_event_generic_train
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.271.a
		ai_chance = {
			base = 1
		}
		effect_tooltip = {
			# Tashkent - Frunze - Alma-Ata - Urumqi
			build_railway = {
				path = {
					1459
					10148
					10366
					12397
					12340
					12640
					7706
					12583
					4224
					1591
					10547
					10619
					12529
					7866
					1783
					10674
					4709
				}
			}
			#Supply Hub in Alma-Ata
			586 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 1591
					instant_build = yes
				}
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sov
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_complied_with_our_demands
			}
		}
	}
}

# SOV-SINKIANG - Sinkiang rejects our proposal - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.272
	title = NSB_soviet_foreign_politics_events.272.t
	desc = NSB_soviet_foreign_politics_events.272.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	option = {
		# Respect
		name = NSB_soviet_foreign_politics_events.272.a
		ai_chance = {
			base = 3
			modifier = {
				add = -1
				FROM = {
					is_in_faction = yes
				}
			}
			modifier = {
				add = -1
				has_war = yes
			}
			modifier = {
				add = -1
				FROM = {
					is_subject = yes
					OVERLORD = {
						is_major = yes
					}
				}
			}
		}
		# Tashkent - Frunze - Alma-Ata
		build_railway = {
			path = {
				1459
				10148
				10366
				12397
				12340
				12640
				7706
				12583
				4224
				1591
			}
		}
		#Supply Hub in Alma-Ata
		586 = {
			add_building_construction = {
				type = supply_node
				level = 1
				province = 1591
				instant_build = yes
			}
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_rejected_our_demands
		}
	}
	option = {
		# Unacceptable
		name = NSB_soviet_foreign_politics_events.272.b
		ai_chance = {
			base = 1
		}
		# Tashkent - Frunze - Alma-Ata
		build_railway = {
			path = {
				1459
				10148
				10366
				12397
				12340
				12640
				7706
				12583
				4224
				1591
			}
		}
		#Supply Hub in Alma-Ata
		586 = {
			add_building_construction = {
				type = supply_node
				level = 1
				province = 1591
				instant_build = yes
			}
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_rejected_our_demands
		}
		create_wargoal = {
			type = take_state_focus
			target = SIK
			expire = 0
			generator = {
				618
				617
				287
				619
				759
				760
			}
		}
		add_named_threat = {
			threat = 2
			name = SOV_claim_on_sinkiang_threat
		}
	}
}

# SOV-SINKIANG - Mineral Prospection (Railwway Urumqui-Kashgar) - Event for SIK
country_event = {
	id = NSB_soviet_foreign_politics_events.273
	title = NSB_soviet_foreign_politics_events.273.t
	desc = NSB_soviet_foreign_politics_events.273.desc
	picture = GFX_report_event_china_ledo_road
	is_triggered_only = yes
	option = {
		# OK
		name = NSB_soviet_foreign_politics_events.273.a
		ai_chance = {
			base = 3
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_complied_with_our_demands
			}
			add_to_variable = {
				SOV_fyp_consumer_goods_factor = -0.02
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sik
			effect_tooltip = {
				custom_effect_tooltip = SOV_sinkiang_when_project_finishes_tt
				619 = {
					#YARKAND - Minerals and Infra
					add_resource = {
						type = aluminium
						amount = 3
					}
					add_resource = {
						type = chromium
						amount = 3
					}
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
				}
				617 = {
					#URUMQI
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
				}
				# Urumqi - Kashgar
				build_railway = {
					path = {
						4709
						4770
						7702
						4682
						7949
						2015
					}
				}
				#Supply Hub in Kashgar
				619 = {
					add_building_construction = {
						type = supply_node
						level = 1
						province = 2015
						instant_build = yes
					}
				}
			}
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.274
					hours = 1
				}
			}
			activate_mission = SOV_sinkiang_mineral_prospection_mission_dummy
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.273.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				add = 1
				is_in_faction = yes
				NOT = {
					is_in_faction_with = SOV
				}
			}
			modifier = {
				add = 5
				FROM = {
					is_justifying_wargoal_against = ROOT
				}
			}
			modifier = {
				add = 10
				is_subject = yes
				NOT = {
					is_subject_of = SOV
				}
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_our_demands
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.275
				hours = 1
			}
			set_country_flag = SOV_sinkiang_prospection_rejected_flag
		}
		custom_effect_tooltip = germany.126.warning
	}
}

# SOV-SINKIANG - Sinkiang accepts our proposal (Mineral Prospection) - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.274
	title = NSB_soviet_foreign_politics_events.274.t
	desc = NSB_soviet_foreign_politics_events.274.desc
	picture = GFX_report_event_china_ledo_road
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.274.a
		ai_chance = {
			base = 1
		}
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_complied_with_our_demands
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sov
			custom_effect_tooltip = SOV_sinkiang_when_project_finishes_tt
			619 = {
				#YARKAND - Minerals and Infra
				add_resource = {
					type = aluminium
					amount = 3
				}
				add_resource = {
					type = chromium
					amount = 3
				}
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			617 = {
				#URUMQI
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			# Urumqi - Kashgar
			build_railway = {
				path = {
					4709
					4770
					7702
					4682
					7949
					2015
				}
			}
			#Supply Hub in Kashgar
			619 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 2015
					instant_build = yes
				}
			}
		}
	}
}

# SOV-SINKIANG - Sinkiang rejects our proposal (generic) - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.275
	title = NSB_soviet_foreign_politics_events.275.t
	desc = NSB_soviet_foreign_politics_events.275.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	option = {
		# Respect
		name = NSB_soviet_foreign_politics_events.275.a
		ai_chance = {
			base = 3
			modifier = {
				add = -1
				FROM = {
					is_in_faction = yes
				}
			}
			modifier = {
				add = -1
				has_war = yes
			}
			modifier = {
				add = -1
				FROM = {
					is_subject = yes
					OVERLORD = {
						is_major = yes
					}
				}
			}
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_rejected_our_demands
		}
	}
	option = {
		# Unacceptable
		name = NSB_soviet_foreign_politics_events.275.b
		trigger = {
			NOT = {
				is_in_faction_with = FROM
			}
		}
		ai_chance = {
			base = 1
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_rejected_our_demands
		}
		create_wargoal = {
			type = take_state_focus
			target = SIK
			expire = 0
			generator = {
				618
				617
				287
				619
				759
				760
			}
		}
		add_named_threat = {
			threat = 2
			name = SOV_claim_on_sinkiang_threat
		}
	}
}

# SOV-SINKIANG - Oil Prospection (Railwway Urumqui-Altay) - Event for SIK
country_event = {
	id = NSB_soviet_foreign_politics_events.276
	title = NSB_soviet_foreign_politics_events.276.t
	desc = NSB_soviet_foreign_politics_events.276.desc
	picture = GFX_report_event_china_ledo_road
	is_triggered_only = yes
	option = {
		# OK
		name = NSB_soviet_foreign_politics_events.276.a
		ai_chance = {
			base = 3
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_complied_with_our_demands
			}
			add_to_variable = {
				SOV_fyp_consumer_goods_factor = -0.02
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sik
			effect_tooltip = {
				custom_effect_tooltip = SOV_sinkiang_when_project_finishes_tt
				618 = {
					#DZUNGARIA - Minerals, oil and Infra
					add_resource = {
						type = aluminium
						amount = 3
					}
					add_resource = {
						type = tungsten
						amount = 3
					}
					add_resource = {
						type = oil
						amount = 6
					}
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
				}
				give_resource_rights = {
					receiver = SOV
					state = 618
				}				# Grant Resource rights to SOV
				617 = {
					#URUMQI - Infra
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
				}
				# Urumqi - Altay
				build_railway = {
					path = {
						4709
						10674
						1783
						1844
						12737
						4823
					}
				}
				#Supply Hub in Altay
				618 = {
					add_building_construction = {
						type = supply_node
						level = 1
						province = 4823
						instant_build = yes
					}
				}
				ROOT = {
					add_ideas = SOV_expanded_exploitation_of_gold_mines
				}
			}
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.277
					hours = 1
				}
			}
			activate_mission = SOV_sinkiang_oil_prospection_mission_dummy
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.276.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				add = 1
				is_in_faction = yes
				NOT = {
					is_in_faction_with = SOV
				}
			}
			modifier = {
				add = 5
				FROM = {
					is_justifying_wargoal_against = ROOT
				}
			}
			modifier = {
				add = 10
				is_subject = yes
				NOT = {
					is_subject_of = SOV
				}
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_our_demands
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.275
				hours = 1
			}
			set_country_flag = SOV_sinkiang_oil_prospection_rejected_flag
		}
		custom_effect_tooltip = germany.126.warning
	}
}

# SOV-SINKIANG - Sinkiang accepts our proposal (Oil Prospection) - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.277
	title = NSB_soviet_foreign_politics_events.277.t
	desc = NSB_soviet_foreign_politics_events.277.desc
	picture = GFX_report_event_china_ledo_road
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.277.a
		ai_chance = {
			base = 1
		}
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_complied_with_our_demands
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sov
			custom_effect_tooltip = SOV_sinkiang_when_project_finishes_tt
			618 = {
				#DZUNGARIA - Minerals, oil and Infra
				add_resource = {
					type = aluminium
					amount = 3
				}
				add_resource = {
					type = tungsten
					amount = 3
				}
				add_resource = {
					type = oil
					amount = 6
				}
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			give_resource_rights = {
				receiver = SOV
				state = 618
			}			# Grant Resource rights to SOV (Not scoping to make tooltip slightly shorter)
			617 = {
				#URUMQI - Infra
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			# Urumqi - Altay
			build_railway = {
				path = {
					4709
					10674
					1783
					1844
					12737
					4823
				}
			}
			#Supply Hub in Altay
			618 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 4823
					instant_build = yes
				}
			}
			SIK = {
				add_ideas = SOV_expanded_exploitation_of_gold_mines
			}
		}
	}
}

# SOV-SINKIANG - Military Aid (Mil in Urumqui + Infra, Air Base and Forts in Kunlun Shan + Forts in Dabancheng) - Event for SIK
country_event = {
	id = NSB_soviet_foreign_politics_events.278
	title = NSB_soviet_foreign_politics_events.278.t
	desc = NSB_soviet_foreign_politics_events.278.desc
	picture = GFX_report_event_SOV_purge_aircraft_2
	is_triggered_only = yes
	option = {
		# OK
		name = NSB_soviet_foreign_politics_events.278.a
		ai_chance = {
			base = 3
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_complied_with_our_demands
			}
			add_to_variable = {
				SOV_fyp_consumer_goods_factor = -0.02
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sik
			SOV = {
				send_equipment = {
					type = small_plane_airframe
					amount = 40
					target = ROOT
				}
				send_equipment = {
					type = infantry_equipment
					amount = 500
					target = ROOT
				}
			}
			effect_tooltip = {
				custom_effect_tooltip = SOV_sinkiang_when_project_finishes_tt
				617 = {
					#URUMQI - Mil
					if = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
					}
				}
				759 = {
					#KUNLUN SHAN - Infra + Air base + Forts
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
					if = {
						limit = {
							air_base < 9
						}
						add_building_construction = {
							type = air_base
							level = 2
							instant_build = yes
						}
					}
					else_if = {
						limit = {
							air_base < 10
						}
						add_building_construction = {
							type = air_base
							level = 1
							instant_build = yes
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 10315
							id = 2074
							id = 1698
							id = 4947
						}
						instant_build = yes
					}
				}
				if = {
					#DABANCHENG - Forts
					limit = {
						has_full_control_of_state = 760
					}
					760 = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 1838
								id = 4843
							}
							instant_build = yes
						}
					}
				}
				add_tech_bonus = {
					name = NSB_soviet_foreign_politics_events.278.t
					bonus = 1
					uses = 2
					category = air_equipment
				}
				air_experience = 50
				army_experience = 50
			}
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.279
					hours = 1
				}
			}
			activate_mission = SOV_sinkiang_military_aid_mission_dummy
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.278.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				add = 1
				is_in_faction = yes
				NOT = {
					is_in_faction_with = SOV
				}
			}
			modifier = {
				add = 5
				FROM = {
					is_justifying_wargoal_against = ROOT
				}
			}
			modifier = {
				add = 10
				is_subject = yes
				NOT = {
					is_subject_of = SOV
				}
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_our_demands
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.275
				hours = 1
			}
			set_country_flag = SOV_sinkiang_military_aid_rejected_flag
		}
		custom_effect_tooltip = germany.126.warning
	}
}

# SOV-SINKIANG - Sinkiang accepts our proposal (Military Aid) - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.279
	title = NSB_soviet_foreign_politics_events.279.t
	desc = NSB_soviet_foreign_politics_events.279.desc
	picture = GFX_report_event_SOV_purge_aircraft_2
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.279.a
		ai_chance = {
			base = 1
		}
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_complied_with_our_demands
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sov
			send_equipment = {
				type = small_plane_airframe
				amount = 40
				target = SIK
			}
			send_equipment = {
				type = infantry_equipment
				amount = 500
				target = SIK
			}
			custom_effect_tooltip = SOV_sinkiang_when_project_finishes_tt
			617 = {
				#URUMQI - Mil
				if = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			759 = {
				#KUNLUN SHAN - Infra + Air base + Forts
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = {
						air_base < 9
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
				else_if = {
					limit = {
						air_base < 10
					}
					add_building_construction = {
						type = air_base
						level = 1
						instant_build = yes
					}
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 10315
						id = 2074
						id = 1698
						id = 4947
					}
					instant_build = yes
				}
			}
			if = {
				#DABANCHENG - Forts
				limit = {
					SIK = {
						has_full_control_of_state = 760
					}
				}
				760 = {
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 1838
							id = 4843
						}
						instant_build = yes
					}
				}
			}
			SIK = {
				add_tech_bonus = {
					name = NSB_soviet_foreign_politics_events.278.t
					bonus = 1
					uses = 2
					category = air_equipment
				}
				air_experience = 50
				army_experience = 50
			}
		}
	}
}

# SOV-SINKIANG - Support Expansion (in XSM) (Infra and Forts in various XSM states + Air Base in Gansu + Oil in Jiuquan) - Event for SIK
country_event = {
	id = NSB_soviet_foreign_politics_events.280
	title = NSB_soviet_foreign_politics_events.280.t
	desc = NSB_soviet_foreign_politics_events.280.desc
	picture = GFX_report_event_generic_truck
	is_triggered_only = yes
	option = {
		# OK
		name = NSB_soviet_foreign_politics_events.280.a
		ai_chance = {
			base = 3
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 2
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_vyacheslav_molotov
				}
			}
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_complied_with_our_demands
			}
			SOV = {
				send_equipment = {
					type = motorized_equipment
					amount = 300
					target = ROOT
				}
			}
			add_to_variable = {
				SOV_fyp_consumer_goods_factor = -0.02
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sik
			effect_tooltip = {
				custom_effect_tooltip = SOV_sinkiang_when_project_finishes_tt
				755 = {
					#HAIXI - Infra
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
				}
				756 = {
					#JIUQUAN - Infra + Oil
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
					add_resource = {
						type = oil
						amount = 12
					}
				}
				604 = {
					#QINGHAI (Golmud) - Infra 
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 7940
						}
						instant_build = yes
					}
				}
				754 = {
					#GOLOG (Lanzhou) - Infra
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 12732
						}
						instant_build = yes
					}
				}
				283 = {
					#GANSU - Infra + Air Base + Fort
					if = {
						limit = {
							infrastructure < 5
						}
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
					}
					if = {
						limit = {
							air_base < 9
						}
						add_building_construction = {
							type = air_base
							level = 2
							instant_build = yes
						}
					}
					else_if = {
						limit = {
							air_base < 10
						}
						add_building_construction = {
							type = air_base
							level = 1
							instant_build = yes
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 531
						}
						instant_build = yes
					}
				}
			}
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = NSB_soviet_foreign_politics_events.281
					hours = 1
				}
			}
			activate_mission = SOV_sinkiang_support_expansion_mission_dummy
		}
	}
	option = {
		# Nope
		name = NSB_soviet_foreign_politics_events.280.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				add = 1
				is_in_faction = yes
				NOT = {
					is_in_faction_with = SOV
				}
			}
			modifier = {
				add = 5
				FROM = {
					is_justifying_wargoal_against = ROOT
				}
			}
			modifier = {
				add = 10
				is_subject = yes
				NOT = {
					is_subject_of = SOV
				}
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_our_demands
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.275
				hours = 1
			}
			set_country_flag = SOV_sinkiang_support_expansion_rejected_flag
		}
	}
}

# SOV-SINKIANG - Sinkiang accepts our proposal (Support Territorial Expansion) - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.281
	title = NSB_soviet_foreign_politics_events.281.t
	desc = NSB_soviet_foreign_politics_events.281.desc
	picture = GFX_report_event_generic_truck
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.281.a
		ai_chance = {
			base = 1
		}
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_complied_with_our_demands
			}
			send_equipment = {
				type = motorized_equipment
				amount = 300
				target = SIK
			}
			custom_effect_tooltip = SOV_sinikiang_influence_cg_tt_sov
			custom_effect_tooltip = SOV_sinkiang_when_project_finishes_tt
			755 = {
				#HAIXI - Infra
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			756 = {
				#JIUQUAN - Infra + Oil
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				add_resource = {
					type = oil
					amount = 12
				}
			}
			604 = {
				#QINGHAI (Golmud) - Infra 
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 7940
					}
					instant_build = yes
				}
			}
			754 = {
				#GOLOG (Lanzhou) - Infra
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 12732
					}
					instant_build = yes
				}
			}
			283 = {
				#GANSU - Infra + Air Base + Fort
				if = {
					limit = {
						infrastructure < 5
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = {
						air_base < 9
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
				else_if = {
					limit = {
						air_base < 10
					}
					add_building_construction = {
						type = air_base
						level = 1
						instant_build = yes
					}
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 531
					}
					instant_build = yes
				}
			}
		}
	}
}

# SOV-SINKIANG - Formalize the Soviet Republic of Sinkiang (aka puppet Sinkiang)- Event for SIK
country_event = {
	id = NSB_soviet_foreign_politics_events.282
	title = NSB_soviet_foreign_politics_events.282.t
	desc = NSB_soviet_foreign_politics_events.282.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Accept
		name = NSB_soviet_foreign_politics_events.282.a
		ai_chance = {
			base = 1
		}
		add_political_power = 75
		SOV = {
			puppet = ROOT
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_complied_with_our_demands
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.283
				hours = 1
			}
		}
	}
	option = {
		# Refuse
		name = NSB_soviet_foreign_politics_events.282.b
		ai_chance = {
			base = 0
		}
		effect_tooltip = {
			SOV = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_our_demands
				}
				country_event = {
					id = NSB_soviet_foreign_politics_events.284
					hours = 1
				}
			}
			custom_effect_tooltip = germany.126.warning
		}
	}
}

# SOV-SINKIANG - Sinkiang becomes a puppet - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.283
	title = NSB_soviet_foreign_politics_events.283.t
	desc = NSB_soviet_foreign_politics_events.283.desc
	picture = GFX_report_event_stalin_propaganda
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_foreign_politics_events.283.a
		effect_tooltip = {
			puppet = FROM
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_complied_with_our_demands
			}
			FROM = {
				add_political_power = 75
			}
		}
	}
}

# SOV-SINKIANG - Sinkiang refuses to become a puppet - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.284
	title = NSB_soviet_foreign_politics_events.284.t
	desc = NSB_soviet_foreign_politics_events.284.desc
	picture = GFX_report_event_stalin_meeting
	is_triggered_only = yes
	option = {
		# Respect
		name = NSB_soviet_foreign_politics_events.284.a
		ai_chance = {
			base = 2
			modifier = {
				add = -1
				has_war = yes
			}
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_rejected_our_demands
		}
	}
	option = {
		# Unacceptable
		name = NSB_soviet_foreign_politics_events.284.b
		trigger = {
			is_faction_leader = yes
		}
		ai_chance = {
			base = 0
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_rejected_our_demands
		}
		remove_from_faction = FROM
		create_wargoal = {
			type = take_state_focus
			target = FROM
			expire = 0
			generator = {
				618
				617
				287
				619
				759
				760
			}
		}
		add_named_threat = {
			threat = 2
			name = SOV_claim_on_sinkiang_threat
		}
	}
}

# SOV-SINKIANG - Soviet Union is losing and we might need new friends - Event for SIK (triggered via MTTH)
country_event = {
	id = NSB_soviet_foreign_politics_events.285
	title = NSB_soviet_foreign_politics_events.285.t
	desc = NSB_soviet_foreign_politics_events.285.desc
	picture = GFX_report_event_soviet_tanks_snow
	fire_only_once = yes
	trigger = {
		original_tag = SIK
		OR = {
			is_in_faction_with = SOV
			is_subject_of = SOV
		}
		SOV = {
			has_completed_focus = SOV_the_gobi_gambit
			surrender_progress > 0.5
		}
		OR = {
			AND = {
				country_exists = PRC
				PRC = {
					is_subject = no
				}
				NOT = {
					has_war_with = PRC
				}
			}
			AND = {
				country_exists = CHI
				CHI = {
					is_subject = no
				}
				NOT = {
					has_war_with = CHI
				}
			}
		}
	}
	mean_time_to_happen = {
		days = 180
		modifier = {
			factor = 2
			has_full_control_of_state = 604			#GOLMUD (XSM)
		}
		modifier = {
			factor = 2
			has_full_control_of_state = 622			#YAN'AN (PRC)
		}
		modifier = {
			factor = 2
			has_full_control_of_state = 615			#TAIYUAN (SHX)
		}
		modifier = {
			factor = 2
			has_full_control_of_state = 613			# NANJING (CHI)
		}
		modifier = {
			factor = 2
			has_full_control_of_state = 325			# KUNMING (YUN)
		}
		modifier = {
			factor = 2
			has_full_control_of_state = 594			#NANNING (GXC)
		}
		modifier = {
			factor = 2
			has_full_control_of_state = 611			#ZHANGBEI (MEN)
		}
		modifier = {
			factor = 2
			has_full_control_of_state = 328			#HSINKING (MAN)
		}
	}
	option = {
		# Stay with the Soviets
		name = NSB_soviet_foreign_politics_events.285.a
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 0.5
				is_subject = no
			}
		}
		if = {
			limit = {
				is_subject_of = SOV
			}
			effect_tooltip = {
				add_autonomy_score = {
					value = 500
					localization = NSB_soviet_foreign_politics_events.286.t
				}
			}
			hidden_effect = {
				SOV = {
					country_event = {
						id = NSB_soviet_foreign_politics_events.286
						hours = 1
					}
				}
			}
		}
	}
	option = {
		# Time to flee!
		name = NSB_soviet_foreign_politics_events.285.b
		trigger = {
			is_subject = no
		}
		ai_chance = {
			base = 2
		}
		hidden_effect = {
			SOV = {
				add_ai_strategy = {
					type = befriend
					id = SIK
					value = -200
				}
				add_ai_strategy = {
					type = alliance
					id = SIK
					value = -200
				}
				if = {
					limit = {
						has_war = no
					}
					add_ai_strategy = {
						type = antagonize
						id = SIK
						value = 100
					}
				}
				else = {
					add_ai_strategy = {
						type = antagonize
						id = SIK
						value = 25
					}
				}
			}
			add_ai_strategy = {
				type = befriend
				id = SOV
				value = -100
			}
			add_ai_strategy = {
				type = alliance
				id = SOV
				value = -100
			}
			if = {
				limit = {
					CHI = {
						is_faction_leader = yes
					}
					NOT = {
						has_war_with = CHI
					}
				}
				add_ai_strategy = {
					type = alliance
					id = CHI
					value = 100
				}
			}
			if = {
				limit = {
					PRC = {
						is_faction_leader = yes
					}
					NOT = {
						has_war_with = PRC
					}
				}
				add_ai_strategy = {
					type = alliance
					id = PRC
					value = 100
				}
			}
			if = {
				limit = {
					XSM = {
						is_faction_leader = yes
					}
					NOT = {
						has_war_with = XSM
					}
				}
				add_ai_strategy = {
					type = alliance
					id = XSM
					value = 100
				}
			}
			if = {
				limit = {
					SHX = {
						is_faction_leader = yes
					}
					NOT = {
						has_war_with = SHX
					}
				}
				add_ai_strategy = {
					type = alliance
					id = SHX
					value = 100
				}
			}
			if = {
				limit = {
					YUN = {
						is_faction_leader = yes
					}
					NOT = {
						has_war_with = YUN
					}
				}
				add_ai_strategy = {
					type = alliance
					id = YUN
					value = 100
				}
			}
			if = {
				limit = {
					GXC = {
						is_faction_leader = yes
					}
					NOT = {
						has_war_with = GXC
					}
				}
				add_ai_strategy = {
					type = alliance
					id = GXC
					value = 100
				}
			}
		}
		#Break all previous agreements with the Comintern
		every_other_country = {
			limit = {
				is_in_faction_with = ROOT
			}
			if = {
				limit = {
					has_guaranteed = ROOT
				}
				diplomatic_relation = {
					country = ROOT
					relation = guarantee
					active = no
				}
			}
			if = {
				limit = {
					is_guaranteed_by = ROOT
				}
				ROOT = {
					diplomatic_relation = {
						country = PREV
						relation = guarantee
						active = no
					}
				}
			}
			if = {
				limit = {
					has_non_aggression_pact_with = ROOT
				}
				diplomatic_relation = {
					country = ROOT
					relation = non_aggression_pact
					active = no
				}
			}
			if = {
				limit = {
					has_military_access_to = ROOT
				}
				diplomatic_relation = {
					country = ROOT
					relation = military_access
					active = no
				}
			}
			if = {
				limit = {
					gives_military_access_to = ROOT
				}
				ROOT = {
					diplomatic_relation = {
						country = PREV
						relation = military_access
						active = no
					}
				}
			}
		}
		leave_faction = yes
		remove_resource_rights = 618
		SOV = {
			add_opinion_modifier = {
				target = ROOT
				modifier = betrayed_alliance
			}
		}
		SOV = {
			country_event = {
				id = NSB_soviet_foreign_politics_events.287
				hours = 1
			}
		}
		custom_effect_tooltip = germany.126.warning
	}
}

# SOV-SINKIANG - Sinkiang loses autonomy - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.286
	title = NSB_soviet_foreign_politics_events.286.t
	desc = NSB_soviet_foreign_politics_events.286.desc
	picture = GFX_report_event_soviet_tanks_snow
	is_triggered_only = yes
	option = {
		# Nothing to do
		name = NSB_soviet_foreign_politics_events.286.a
		ai_chance = {
			base = 1
		}
		FROM = {
			add_autonomy_score = {
				value = 500
				localization = NSB_soviet_foreign_politics_events.286.t
			}
		}
	}
	option = {
		# Talk to them
		name = NSB_soviet_foreign_politics_events.286.b
		trigger = {
			has_political_power > 74
		}
		ai_chance = {
			base = 0
		}
		add_political_power = -75
		FROM = {
			add_autonomy_score = {
				value = 250
				localization = NSB_soviet_foreign_politics_events.286.t
			}
		}
	}
}

# SOV-SINKIANG - Sinkiang leaves faction - Event for SOV
country_event = {
	id = NSB_soviet_foreign_politics_events.287
	title = NSB_soviet_foreign_politics_events.287.t
	desc = NSB_soviet_foreign_politics_events.287.desc
	picture = GFX_report_event_chinese_army_training
	is_triggered_only = yes
	option = {
		# Don't care
		name = NSB_soviet_foreign_politics_events.287.a
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				has_war = yes
			}
		}
		effect_tooltip = {
			FROM = {
				leave_faction = yes
			}
			remove_resource_rights = 618
			add_opinion_modifier = {
				target = FROM
				modifier = betrayed_alliance
			}
		}
	}
	option = {
		# Make them pay!
		name = NSB_soviet_foreign_politics_events.287.b
		ai_chance = {
			base = 2
			modifier = {
				factor = 2
				has_country_flag = SOV_sinkiang_prospection_flag
			}
			modifier = {
				factor = 2
				has_country_flag = SOV_sinkiang_oil_prospection_flag
			}
			modifier = {
				factor = 2
				has_country_flag = SOV_sinkiang_military_aid_flag
			}
			modifier = {
				factor = 2
				has_country_flag = SOV_sinkiang_support_expansion_flag
			}
		}
		effect_tooltip = {
			FROM = {
				leave_faction = yes
			}
			remove_resource_rights = 618
			add_opinion_modifier = {
				target = FROM
				modifier = betrayed_alliance
			}
		}
		create_wargoal = {
			type = take_state_focus
			target = FROM
			expire = 0
			generator = {
				618
				617
				287
				619
				759
				760
			}
		}
	}
}

######   #######  ##     ##          ######   ######## ########     ######## ########     ###    ########  ########       ###     ######   ########  ######## ######## ##     ## ######## ##    ## ######## 
##    ## ##     ## ##     ##         ##    ##  ##       ##     ##       ##    ##     ##   ## ##   ##     ## ##            ## ##   ##    ##  ##     ## ##       ##       ###   ### ##       ###   ##    ##    
##       ##     ## ##     ##         ##        ##       ##     ##       ##    ##     ##  ##   ##  ##     ## ##           ##   ##  ##        ##     ## ##       ##       #### #### ##       ####  ##    ##    
######  ##     ## ##     ## ####### ##   #### ######   ########        ##    ########  ##     ## ##     ## ######      ##     ## ##   #### ########  ######   ######   ## ### ## ######   ## ## ##    ##    
## ##     ##  ##   ##          ##    ##  ##       ##   ##         ##    ##   ##   ######### ##     ## ##          ######### ##    ##  ##   ##   ##       ##       ##     ## ##       ##  ####    ##    
##    ## ##     ##   ## ##           ##    ##  ##       ##    ##        ##    ##    ##  ##     ## ##     ## ##          ##     ## ##    ##  ##    ##  ##       ##       ##     ## ##       ##   ###    ##    
######   #######     ###             ######   ######## ##     ##       ##    ##     ## ##     ## ########  ########    ##     ##  ######   ##     ## ######## ######## ##     ## ######## ##    ##    ##    
# Soviet-German Trade Agreement - Event for GER
country_event = {
	id = NSB_soviet_soviet_german_trade_agreement.1
	title = NSB_soviet_soviet_german_trade_agreement.1.t
	desc = NSB_soviet_soviet_german_trade_agreement.1.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Accept -> This will also make GER more likely to take Molotov-Ribbentrop pact and less to take Anti-Soviet Pact
		name = NSB_soviet_soviet_german_trade_agreement.1.a
		ai_chance = {
			base = 5
			modifier = {
				factor = 10
				has_war = yes
			}
			modifier = {
				factor = 10
				has_war_with = ENG
			}
			modifier = {
				factor = 10
				has_completed_focus = GER_mol_rib_pact
			}
			modifier = {
				factor = 10
				has_completed_focus = GER_soviet_ally
			}
			modifier = {
				factor = 0.1
				has_completed_focus = GER_anti_comitern_pact
			}
			modifier = {
				factor = 0
				OR = {
					has_war_with = FROM
					is_justifying_wargoal_against = FROM
					has_completed_focus = GER_anti_soviet_pact
					has_completed_focus = GER_ussr_war_goal
				}
			}
		}
		add_timed_idea = {
			idea = SOV_soviet_german_trade_agreement
			days = 545
		}		#Technically 1 year but really 18 months for Soviet payment 
		set_variable = {
			SOV_capital_for_soviet_imports = ROOT.capital
		}		#Store capital where the dynamic modifier is set so that it can be removed easily later
		capital_scope = {
			add_dynamic_modifier = {
				modifier = SOV_soviet_imports
			}
		}
		#Effects to Soviets
		effect_tooltip = {
			FROM = {
				if = {
					limit = {
						has_dlc = "Man the Guns"
					}
					if = {
						limit = {
							NOT = {
								has_tech = basic_ship_hull_cruiser
							}
						}
						set_technology = {
							basic_ship_hull_cruiser = 1
						}
					}
					if = {
						limit = {
							NOT = {
								has_tech = basic_cruiser_armor_scheme
							}
						}
						set_technology = {
							basic_cruiser_armor_scheme = 1
						}
					}
					if = {
						limit = {
							has_tech = basic_medium_battery
						}
						create_equipment_variant = {
							name = "Hipper Class"
							type = ship_hull_cruiser_2
							name_group = SOV_CA_HISTORICAL
							parent_version = 0
							allow_without_tech = yes							#Makes no difference since event grants appropriate tech (above), but it improves tooltip
							modules = {
								fixed_ship_battery_slot = ship_medium_battery_2
								fixed_ship_anti_air_slot = ship_anti_air_1
								fixed_ship_fire_control_system_slot = ship_fire_control_system_0
								fixed_ship_radar_slot = empty
								fixed_ship_engine_slot = cruiser_ship_engine_1
								fixed_ship_secondaries_slot = empty
								fixed_ship_armor_slot = ship_armor_cruiser_2
								front_1_custom_slot = ship_anti_air_1
								mid_1_custom_slot = ship_torpedo_1
								mid_2_custom_slot = ship_airplane_launcher_1
								rear_1_custom_slot = ship_medium_battery_2
							}
						}
					}
					else = {
						create_equipment_variant = {
							name = "Hipper Class"
							type = ship_hull_cruiser_2
							name_group = SOV_CA_HISTORICAL
							parent_version = 0
							allow_without_tech = yes							#Makes no difference since event grants appropriate tech (above), but it improves tooltip
							modules = {
								fixed_ship_battery_slot = ship_medium_battery_1
								fixed_ship_anti_air_slot = ship_anti_air_1
								fixed_ship_fire_control_system_slot = ship_fire_control_system_0
								fixed_ship_radar_slot = empty
								fixed_ship_engine_slot = cruiser_ship_engine_1
								fixed_ship_secondaries_slot = empty
								fixed_ship_armor_slot = ship_armor_cruiser_2
								front_1_custom_slot = ship_anti_air_1
								mid_1_custom_slot = ship_torpedo_1
								mid_2_custom_slot = ship_airplane_launcher_1
								rear_1_custom_slot = ship_medium_battery_1
							}
						}
					}
					# CA: Lützow -> Petropavlovsk
					add_equipment_production = {
						equipment = {
							type = ship_hull_cruiser_2
							creator = "SOV"
							version_name = "Hipper Class"
						}
						name = "Petropavlovsk"
						requested_factories = 1
						progress = 0.5
						amount = 1
					}
					add_tech_bonus = {
						name = NSB_soviet_soviet_german_trade_agreement.1.t
						bonus = 0.5
						uses = 2
						category = ship_modules_tech
						category = bb_tech
						category = dd_tech
					}
				}
				else = {
					#No MTG
					if = {
						limit = {
							NOT = {
								has_tech = basic_heavy_cruiser
							}
						}
						set_technology = {
							basic_heavy_cruiser = 1
						}
					}
					create_equipment_variant = {
						name = "Hipper Class"
						type = heavy_cruiser_2
						parent_version = 0
						allow_without_tech = yes						#Makes no difference since event grants appropriate tech (above), but it improves tooltip
						upgrades = {
							ship_reliability_upgrade = 1
							ship_engine_upgrade = 1
							ship_armor_upgrade = 2
							ship_gun_upgrade = 2
						}
					}
					add_equipment_production = {
						equipment = {
							type = heavy_cruiser_2
							creator = "SOV"
						}
						requested_factories = 1
						progress = 0.5
						amount = 1
					}
					add_tech_bonus = {
						name = NSB_soviet_soviet_german_trade_agreement.1.t
						bonus = 0.5
						uses = 2
						category = ca_tech
						category = bb_tech
						category = dd_tech
					}
				}
				add_tech_bonus = {
					name = NSB_soviet_soviet_german_trade_agreement.1.t
					bonus = 0.5
					uses = 2
					category = air_equipment
				}
			}
		}
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_strengthened_relations_with_us
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_strengthened_relations_with_us
			}
		}
		hidden_effect = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_strengthened_relations_with_us_trade
			}
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_strengthened_relations_with_us_trade
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_soviet_german_trade_agreement.2
				hours = 1
			}
		}
	}
	option = {
		# Refuse
		name = NSB_soviet_soviet_german_trade_agreement.1.b
		ai_chance = {
			base = 1
		}
		FROM = {
			country_event = {
				id = NSB_soviet_soviet_german_trade_agreement.3
				hours = 1
			}
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_rejected_our_demands
			}
		}
	}
}

# Soviet-German Trade Agreement - GER Accepts - Event for SOV
country_event = {
	id = NSB_soviet_soviet_german_trade_agreement.2
	title = NSB_soviet_soviet_german_trade_agreement.2.t
	desc = NSB_soviet_soviet_german_trade_agreement.2.desc
	picture = GFX_report_event_molotov_ribentrop_handshake
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_soviet_german_trade_agreement.2.a
		if = {
			limit = {
				has_dlc = "Man the Guns"
			}
			if = {
				limit = {
					NOT = {
						has_tech = basic_ship_hull_cruiser
					}
				}
				set_technology = {
					basic_ship_hull_cruiser = 1
				}
			}
			if = {
				limit = {
					NOT = {
						has_tech = basic_cruiser_armor_scheme
					}
				}
				set_technology = {
					basic_cruiser_armor_scheme = 1
				}
			}
			if = {
				limit = {
					has_tech = basic_medium_battery
				}
				create_equipment_variant = {
					name = "Hipper Class"
					type = ship_hull_cruiser_2
					name_group = SOV_CA_HISTORICAL
					parent_version = 0
					allow_without_tech = yes					#Makes no difference since event grants appropriate tech (above), but it improves tooltip
					modules = {
						fixed_ship_battery_slot = ship_medium_battery_2
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_1
						fixed_ship_secondaries_slot = empty
						fixed_ship_armor_slot = ship_armor_cruiser_2
						front_1_custom_slot = ship_anti_air_1
						mid_1_custom_slot = ship_torpedo_1
						mid_2_custom_slot = ship_airplane_launcher_1
						rear_1_custom_slot = ship_medium_battery_2
					}
				}
			}
			else = {
				create_equipment_variant = {
					name = "Hipper Class"
					type = ship_hull_cruiser_2
					name_group = SOV_CA_HISTORICAL
					parent_version = 0
					allow_without_tech = yes					#Makes no difference since event grants appropriate tech (above), but it improves tooltip
					modules = {
						fixed_ship_battery_slot = ship_medium_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_1
						fixed_ship_secondaries_slot = empty
						fixed_ship_armor_slot = ship_armor_cruiser_2
						front_1_custom_slot = ship_anti_air_1
						mid_1_custom_slot = ship_torpedo_1
						mid_2_custom_slot = ship_airplane_launcher_1
						rear_1_custom_slot = ship_medium_battery_1
					}
				}
			}
			# CA: Lützow -> Petropavlovsk
			add_equipment_production = {
				equipment = {
					type = ship_hull_cruiser_2
					creator = "SOV"
					version_name = "Hipper Class"
				}
				name = "Petropavlovsk"
				requested_factories = 1
				progress = 0.5
				amount = 1
			}
			add_tech_bonus = {
				name = NSB_soviet_soviet_german_trade_agreement.1.t
				bonus = 0.5
				uses = 2
				category = ship_modules_tech
				category = bb_tech
				category = dd_tech
			}
		}
		else = {
			#No MTG
			if = {
				limit = {
					NOT = {
						has_tech = basic_heavy_cruiser
					}
				}
				set_technology = {
					basic_heavy_cruiser = 1
				}
			}
			create_equipment_variant = {
				name = "Hipper Class"
				type = heavy_cruiser_2
				parent_version = 0
				allow_without_tech = yes				#Makes no difference since event grants appropriate tech (above), but it improves tooltip
				upgrades = {
					ship_reliability_upgrade = 1
					ship_engine_upgrade = 1
					ship_armor_upgrade = 2
					ship_gun_upgrade = 2
				}
			}
			add_equipment_production = {
				equipment = {
					type = heavy_cruiser_2
					creator = "SOV"
				}
				requested_factories = 1
				progress = 0.5
				amount = 1
			}
			add_tech_bonus = {
				name = NSB_soviet_soviet_german_trade_agreement.1.t
				bonus = 0.5
				uses = 2
				category = ca_tech
				category = bb_tech
				category = dd_tech
			}
		}
		add_tech_bonus = {
			name = NSB_soviet_soviet_german_trade_agreement.1.t
			bonus = 0.5
			uses = 2
			category = air_equipment
		}
		#Effects to Germans
		effect_tooltip = {
			FROM = {
				add_timed_idea = {
					idea = SOV_soviet_german_trade_agreement
					days = 545
				}				#Technically 1 year but really 18 months for Soviet payment 
				capital_scope = {
					add_dynamic_modifier = {
						modifier = SOV_soviet_imports
					}
				}
			}
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_strengthened_relations_with_us
			}
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_strengthened_relations_with_us
				}
			}
		}
		hidden_effect = {
			news_event = {
				id = nsb_news.103
				days = 1
			}
		}
	}
}

# Soviet-German Trade Agreement - GER Refuses - Event for SOV
country_event = {
	id = NSB_soviet_soviet_german_trade_agreement.3
	title = NSB_soviet_soviet_german_trade_agreement.3.t
	desc = NSB_soviet_soviet_german_trade_agreement.3.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Damn
		name = NSB_soviet_soviet_german_trade_agreement.3.a
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_rejected_our_demands
			}
		}
	}
}

######   #######  ##       ##       ########  ######  ######## #### ##     ## ########     ######  ########  ######  ##     ## ########  #### ######## ##    ## 
##    ## ##     ## ##       ##       ##       ##    ##    ##     ##  ##     ## ##          ##    ## ##       ##    ## ##     ## ##     ##  ##     ##     ##  ##  
##       ##     ## ##       ##       ##       ##          ##     ##  ##     ## ##          ##       ##       ##       ##     ## ##     ##  ##     ##      ####   
##       ##     ## ##       ##       ######   ##          ##     ##  ##     ## ######       ######  ######   ##       ##     ## ########   ##     ##       ##    
##       ##     ## ##       ##       ##       ##          ##     ##   ##   ##  ##                ## ##       ##       ##     ## ##   ##    ##     ##       ##    
##    ## ##     ## ##       ##       ##       ##    ##    ##     ##    ## ##   ##          ##    ## ##       ##    ## ##     ## ##    ##   ##     ##       ##    
######   #######  ######## ######## ########  ######     ##    ####    ###    ########     ######  ########  ######   #######  ##     ## ####    ##       ##    
# Policies of Collective Security - SOV offers Mutual Assitance - Event for FRA
country_event = {
	id = NSB_soviet_policies_of_collective_security.1
	title = NSB_soviet_policies_of_collective_security.1.t
	desc = NSB_soviet_policies_of_collective_security.1.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Accept
		name = NSB_soviet_policies_of_collective_security.1.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				OR = {
					has_government = democratic
					has_government = communism
				}
			}
			modifier = {
				factor = 2
				has_completed_focus = FRA_form_the_popular_front
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 1.5
				has_opinion = {
					target = FROM
					value > 90
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_wargoal_against = SOV
					AND = {
						is_subject = yes
						NOT = {
							is_subject_of = SOV
						}
					}
					has_completed_focus = FRA_utilize_the_leagues
					focus_progress = {
						focus = FRA_utilize_the_leagues
						progress > 0
					}
				}
			}
		}
		effect_tooltip = {
			SOV_clear_hostile_diplomacy_in_both_countries = yes			#Clears wargoals and claims
			#SOV -> FRA
			FROM = {
				diplomatic_relation = {
					country = ROOT
					relation = non_aggression_pact
					active = yes
				}
				give_guarantee = ROOT
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_policies_of_collective_security_opinion
				}
			}
			#FRA -> SOV
			diplomatic_relation = {
				country = FROM
				relation = non_aggression_pact
				active = yes
			}
			give_guarantee = FROM
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_policies_of_collective_security_opinion
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.2
				hours = 8
				random_hours = 4
			}
		}
	}
	option = {
		# Conditions
		name = NSB_soviet_policies_of_collective_security.1.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 4
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 1.5
				has_government = democratic
			}
			modifier = {
				factor = 1.5
				has_completed_focus = FRA_form_the_popular_front
			}
			modifier = {
				factor = 1.5
				is_in_faction_with = ENG
				ENG = {
					has_government = democratic
				}
			}
			modifier = {
				factor = 4
				has_guaranteed = POL
			}
			modifier = {
				factor = 0
				OR = {
					NOT = {
						country_exists = POL
					}
					POL = {
						has_capitulated = yes
					}
					has_completed_focus = FRA_utilize_the_leagues
					focus_progress = {
						focus = FRA_utilize_the_leagues
						progress > 0
					}
				}
			}
		}
		trigger = {
			#Only European countries care about Poland
			FROM = {
				var:SOV_collective_security_target = {
					capital_scope = {
						is_on_continent = europe
					}
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.4
				hours = 8
				random_hours = 4
			}
		}
		effect_tooltip = {
			custom_effect_tooltip = NSB_soviet_policies_of_collective_security_agreed_effects_tt
			SOV_clear_hostile_diplomacy_in_both_countries = yes			#Clears wargoals and claims
			#SOV -> FRA
			FROM = {
				diplomatic_relation = {
					country = ROOT
					relation = non_aggression_pact
					active = yes
				}
				give_guarantee = ROOT
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_policies_of_collective_security_opinion
				}
			}
			#FRA -> SOV
			diplomatic_relation = {
				country = FROM
				relation = non_aggression_pact
				active = yes
			}
			give_guarantee = FROM
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_policies_of_collective_security_opinion
			}
			custom_effect_tooltip = NSB_soviet_policies_of_collective_security_condition_effects_tt
		}
	}
	option = {
		# Nope
		name = NSB_soviet_policies_of_collective_security.1.c
		ai_chance = {
			base = 10
			modifier = {
				factor = 10
				has_completed_focus = FRA_utilize_the_leagues
			}
			modifier = {
				factor = 0.1
				has_completed_focus = FRA_form_the_popular_front
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SOV_rejected_defensive_pact
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.3
				hours = 8
				random_hours = 4
			}
		}
	}
}

# Policies of Collective Security - FRA accepts - Event for SOV
country_event = {
	id = NSB_soviet_policies_of_collective_security.2
	title = NSB_soviet_policies_of_collective_security.2.t
	desc = NSB_soviet_policies_of_collective_security.2.desc
	picture = GFX_report_event_worried_french
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_policies_of_collective_security.2.a
		SOV_apply_collective_ageement_on_mutual_assistance_effects_basic = yes
		FROM = {
			save_global_event_target_as = SOV_collective_security_pact_integrant
		}
		hidden_effect = {
			news_event = {
				id = nsb_news.102
				days = 1
			}
		}		#Poland not Included
	}
}

# Policies of Collective Security - FRA refuses - Event for SOV
country_event = {
	id = NSB_soviet_policies_of_collective_security.3
	title = NSB_soviet_policies_of_collective_security.3.t
	desc = NSB_soviet_policies_of_collective_security.3.desc
	picture = GFX_report_event_worried_french
	is_triggered_only = yes
	option = {
		# OK
		name = NSB_soviet_policies_of_collective_security.3.a
		add_opinion_modifier = {
			target = FROM
			modifier = SOV_rejected_defensive_pact
		}
	}
}

# Policies of Collective Security - FRA wants to include Poland - Event for SOV
country_event = {
	id = NSB_soviet_policies_of_collective_security.4
	title = NSB_soviet_policies_of_collective_security.4.t
	desc = NSB_soviet_policies_of_collective_security.4.desc
	picture = GFX_report_event_worried_french
	is_triggered_only = yes
	option = {
		# Consent
		name = NSB_soviet_policies_of_collective_security.4.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					target = POL
					value > 25
				}
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.5
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_wargoal_against = POL
					is_justifying_wargoal_against = POL
					has_opinion_modifier = MR_pact
					has_completed_focus = SOV_claims_on_poland
					focus_progress = {
						focus = SOV_claims_on_poland
						progress > 0
					}
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.6
				hours = 8
				random_hours = 4
			}
		}
		custom_effect_tooltip = NSB_soviet_policies_of_collective_security_tt
	}
	option = {
		# No way Poland is being included here
		name = NSB_soviet_policies_of_collective_security.4.b
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = NSB_soviet_policies_of_collective_security_refusing_poland_inclusion_tt
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.5
				hours = 8
				random_hours = 4
			}
		}
		custom_effect_tooltip = NSB_soviet_policies_of_collective_security_agreed_effects_tt
		effect_tooltip = {
			SOV_apply_collective_ageement_on_mutual_assistance_effects_basic = yes
		}
	}
}

# Policies of Collective Security - SOV rejects Poland's inclusion - Event for FRA
country_event = {
	id = NSB_soviet_policies_of_collective_security.5
	title = NSB_soviet_policies_of_collective_security.5.t
	desc = NSB_soviet_policies_of_collective_security.5.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Avanti without Poland
		name = NSB_soviet_policies_of_collective_security.5.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_government = communism
			}
			modifier = {
				factor = 2
				has_completed_focus = FRA_form_the_popular_front
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.25
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_completed_focus = FRA_utilize_the_leagues
					focus_progress = {
						focus = FRA_utilize_the_leagues
						progress > 0
					}
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.9
				hours = 8
				random_hours = 4
			}
		}
		effect_tooltip = {
			SOV_apply_collective_ageement_on_mutual_assistance_effects_basic = yes
		}
	}
	option = {
		# Not interested, then
		name = NSB_soviet_policies_of_collective_security.5.b
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 1.5
				has_government = democratic
			}
			modifier = {
				factor = 2
				has_guaranteed = POL
			}
			modifier = {
				factor = 0
				OR = {
					NOT = {
						country_exists = POL
					}
					POL = {
						has_capitulated = yes
					}
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.8
				hours = 8
				random_hours = 4
			}
		}
	}
}

# Policies of Collective Security - SOV accepts Poland's inclusion - Event for FRA
country_event = {
	id = NSB_soviet_policies_of_collective_security.6
	title = NSB_soviet_policies_of_collective_security.6.t
	desc = NSB_soviet_policies_of_collective_security.6.desc
	picture = GFX_report_event_SOV_litvinov_beck
	is_triggered_only = yes
	option = {
		# Good, let's ask POL
		name = NSB_soviet_policies_of_collective_security.6.a
		if = {
			limit = {
				country_exists = POL
			}
			POL = {
				country_event = {
					id = NSB_soviet_policies_of_collective_security.7
					hours = 8
					random_hours = 4
				}
			}			#Don't waste time, send it right away, Poland tends to die
			effect_tooltip = {
				SOV_apply_collective_ageement_on_mutual_assistance_effects_basic = yes
			}
			custom_effect_tooltip = NSB_soviet_policies_of_collective_security_tt
		}
		else = {
			#Fallback in case Poland gets wiped out during this political jobbery
			FROM = {
				country_event = {
					id = NSB_soviet_policies_of_collective_security.2
					hours = 8
					random_hours = 4
				}
			}
			effect_tooltip = {
				SOV_apply_collective_ageement_on_mutual_assistance_effects_basic = yes
			}
		}
	}
}

# Policies of Collective Security - Wanna join Soviet-French <-(potentially) Mutual Assitance pact? - Event for POL
country_event = {
	id = NSB_soviet_policies_of_collective_security.7
	title = NSB_soviet_policies_of_collective_security.7.t
	desc = NSB_soviet_policies_of_collective_security.7.desc
	picture = GFX_report_event_SOV_litvinov_beck
	is_triggered_only = yes
	option = {
		# Accept
		name = NSB_soviet_policies_of_collective_security.7.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				OR = {
					has_government = democratic
					has_government = communism
				}
			}
			modifier = {
				factor = 2
				has_completed_focus = POL_organize_the_peasants_strike
			}
			modifier = {
				factor = 2
				is_in_faction = no
			}
			modifier = {
				#Appropriate PC for Foreign Affairs
				factor = 1.2
				SOV = {
					has_idea = SOV_maksim_litvinov
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					SOV = {
						has_completed_focus = SOV_claims_on_poland
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_completed_focus = POL_assemble_the_regency_council
					has_completed_focus = POL_nationalist_constitution
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.12
				hours = 8
				random_hours = 4
			}
		}		#Answer to FRA (potentially) who will in turn asnswer to SOV, so FROM is available for effects that can't use variables
		custom_effect_tooltip = NSB_soviet_policies_of_collective_security_poland_included_effects_from_tt
	}
	option = {
		# Not interested
		name = NSB_soviet_policies_of_collective_security.7.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 4
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 4
				any_country = {
					is_major = yes
					has_guaranteed = POL
				}
			}
			modifier = {
				factor = 2
				has_completed_focus = POL_complete_april_constitution
			}
			modifier = {
				factor = 2
				has_government = fascism
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.10
				hours = 10
				random_hours = 4
			}
		}
	}
}

# Policies of Collective Security - FRA refuses the pact without Poland - Event for SOV
country_event = {
	id = NSB_soviet_policies_of_collective_security.8
	title = NSB_soviet_policies_of_collective_security.8.t
	desc = NSB_soviet_policies_of_collective_security.8.desc
	picture = GFX_report_event_generic_sign_treaty2
	is_triggered_only = yes
	option = {
		# Who needs them anyway?
		name = NSB_soviet_policies_of_collective_security.8.a
	}
}

# Policies of Collective Security - FRA agrees to the pact not including Poland - Event for SOV
country_event = {
	id = NSB_soviet_policies_of_collective_security.9
	title = NSB_soviet_policies_of_collective_security.9.t
	desc = NSB_soviet_policies_of_collective_security.9.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	option = {
		# Shame on them
		name = NSB_soviet_policies_of_collective_security.9.a
		SOV_apply_collective_ageement_on_mutual_assistance_effects_basic = yes
		FROM = {
			save_global_event_target_as = SOV_collective_security_pact_integrant
		}
		hidden_effect = {
			news_event = {
				id = nsb_news.102
				days = 1
			}
		}		#Poland not Included
	}
}

# Policies of Collective Security - Poland does not want to be involved in any of this - Event for FRA
country_event = {
	id = NSB_soviet_policies_of_collective_security.10
	title = NSB_soviet_policies_of_collective_security.10.t
	desc = NSB_soviet_policies_of_collective_security.10.desc
	picture = GFX_report_event_polish_army
	is_triggered_only = yes
	option = {
		# Who needs them anyway?
		name = NSB_soviet_policies_of_collective_security.10.a
		SOV = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.11
				hours = 10
				random_hours = 4
			}
		}
		effect_tooltip = {
			SOV_apply_collective_ageement_on_mutual_assistance_effects_basic = yes
		}
	}
}

# Policies of Collective Security - Poland refused to join our pact, let's just sign it ourselves - Event for SOV
country_event = {
	id = NSB_soviet_policies_of_collective_security.11
	title = NSB_soviet_policies_of_collective_security.11.t
	desc = NSB_soviet_policies_of_collective_security.11.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	option = {
		# Who needs them anyway?
		name = NSB_soviet_policies_of_collective_security.11.a
		SOV_apply_collective_ageement_on_mutual_assistance_effects_basic = yes
		FROM = {
			save_global_event_target_as = SOV_collective_security_pact_integrant
		}
		hidden_effect = {
			news_event = {
				id = nsb_news.102
				days = 1
			}
		}		#Poland not Included
	}
}

# Policies of Collective Security - Poland joins our pact, hurray! - Event for FRA
country_event = {
	id = NSB_soviet_policies_of_collective_security.12
	title = NSB_soviet_policies_of_collective_security.12.t
	desc = NSB_soviet_policies_of_collective_security.12.desc
	picture = GFX_report_event_SOV_litvinov_beck
	is_triggered_only = yes
	option = {
		# COOL
		name = NSB_soviet_policies_of_collective_security.12.a
		SOV = {
			country_event = {
				id = NSB_soviet_policies_of_collective_security.13
				hours = 10
				random_hours = 4
			}
		}
		custom_effect_tooltip = NSB_soviet_policies_of_collective_security_poland_included_effects_from_tt
	}
}

# Policies of Collective Security - Poland joins our pact, viva! - Event for SOV
country_event = {
	id = NSB_soviet_policies_of_collective_security.13
	title = NSB_soviet_policies_of_collective_security.12.t
	desc = NSB_soviet_policies_of_collective_security.13.desc
	picture = GFX_report_event_SOV_litvinov_beck
	is_triggered_only = yes
	option = {
		name = NSB_soviet_policies_of_collective_security.13.a
		custom_effect_tooltip = NSB_soviet_policies_of_collective_security_poland_included_effects_from_tt
		hidden_effect = {
			SOV_apply_collective_ageement_on_mutual_assistance_effects_poland_included = yes
		}
		FROM = {
			save_global_event_target_as = SOV_collective_security_pact_integrant
		}
		set_global_flag = SOV_collective_security_pact_poland_inlcuded_flag
		hidden_effect = {
			news_event = {
				id = nsb_news.102
				days = 1
			}
		}		#Poland Included
	}
}

# SOV builds a National Academy of Sciences in our country
country_event = {
	id = NSB_soviet_academy_of_sciences.1
	title = NSB_soviet_academy_of_sciences.1.t
	desc = NSB_soviet_academy_of_sciences.1.desc
	picture = GFX_report_event_SOV_national_academy_of_sciences
	is_triggered_only = yes
	option = {
		# Accept
		name = NSB_soviet_academy_of_sciences.1.a
		add_ideas = SOV_national_academy_of_sciences_puppet
	}
}

# SOV infiltrates an atomic program - Success - Event for SOV (Only non-LaR)
country_event = {
	id = NSB_soviet_atomic_bomb_project.1
	title = NSB_soviet_atomic_bomb_project.1.t
	desc = NSB_soviet_atomic_bomb_project.1.desc
	picture = GFX_report_event_SOV_demands
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_atomic_bomb_project.1.a
		if = {
			limit = {
				NOT = {
					has_tech = nukes
				}
			}
			add_tech_bonus = {
				name = SOV_soviet_atomic_bomb_project
				bonus = 1
				uses = 1
				category = nuclear
			}
		}
		else = {
			add_timed_idea = {
				idea = SOV_stolen_vital_nuclear_information
				days = 180
			}
		}
	}
}

# SOV fails to infiltrate an atomic program - Failure - Event for SOV
country_event = {
	id = NSB_soviet_atomic_bomb_project.2
	title = NSB_soviet_atomic_bomb_project.2.t
	desc = NSB_soviet_atomic_bomb_project.2.desc
	picture = GFX_report_event_SOV_atomic_program_caught
	is_triggered_only = yes
	option = {
		# Bad, but okay
		name = NSB_soviet_atomic_bomb_project.2.a
		add_political_power = -50
		effect_tooltip = {
			var:SOV_aggrieved_country_atomic_spies = {
				if = {
					limit = {
						original_tag = USA
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = SOV_attempted_to_infiltrate_manhattan_project
					}
				}
				else = {
					add_opinion_modifier = {
						target = ROOT
						modifier = SOV_attempted_to_infiltrate_our_atomic_program
					}
				}
			}
		}
	}
}

# SOV fails to infiltrate an atomic program - Failure - Event for target country
country_event = {
	id = NSB_soviet_atomic_bomb_project.3
	title = NSB_soviet_atomic_bomb_project.3.t
	desc = NSB_soviet_atomic_bomb_project.3.desc
	picture = GFX_report_event_SOV_atomic_program_caught
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_atomic_bomb_project.3.a
		add_political_power = 50
		if = {
			limit = {
				original_tag = USA
			}
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_attempted_to_infiltrate_manhattan_project
			}
		}
		else = {
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_attempted_to_infiltrate_our_atomic_program
			}
		}
		effect_tooltip = {
			FROM = {
				add_political_power = -50
			}
		}
	}
}

######################
### FIVE YEAR PLAN ###
######################
### THIRD FIVE YEAR PLAN CANCELED ###
country_event = {
	id = NSB_soviet_five_year_plan.01
	title = NSB_soviet_five_year_plan.01.t
	desc = NSB_soviet_five_year_plan.01.desc
	picture = GFX_report_event_stalin_01
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		#VAYA POR DIOS
		name = NSB_soviet_five_year_plan.01.a
		custom_effect_tooltip = NSB_soviet_five_year_plan_tt
	}
}

######################
######## MISC ########
######################
### Kuznetsov becomes an Operative -> Fired when SOV loses control over a Ukrainian state 
country_event = {
	id = NSB_soviet_great_patriotic_war.01
	title = NSB_soviet_great_patriotic_war.01.t
	desc = NSB_soviet_great_patriotic_war.01.desc
	picture = GFX_report_event_SOV_tank_column
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		#WELCOME TO THE NKVD
		name = NSB_soviet_great_patriotic_war.01.a
		create_operative_leader = {
			name = "Nikolay Ivanovich Kuznetsov"
			GFX = GFX_Portrait_nikolay_kuznetsov
			traits = {
				operative_commando
				operative_infiltrator
			}
			bypass_recruitment = no
			available_to_spy_master = yes
			nationalities = {
				SOV
				GER
				UKR
			}
		}
	}
}

###################
##### COMECON #####
###################
# SOV starts an industrialization project in our country - Event for puppet
country_event = {
	id = NSB_soviet_comecon.1
	title = NSB_soviet_comecon.1.t
	desc = NSB_soviet_comecon.1.desc
	picture = GFX_report_event_generic_factory
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_comecon.1.a
		effect_tooltip = {
			swap_ideas = {
				remove_idea = SOV_comecon_puppet_default
				add_idea = SOV_comecon_puppet_industrialization
			}
			custom_effect_tooltip = NSB_soviet_comecon_effect_duration_tt
		}
	}
}

# SOV starts a joint military program - Event for puppets
country_event = {
	id = NSB_soviet_comecon.2
	title = NSB_soviet_comecon.2.t
	desc = NSB_soviet_comecon.2.desc
	picture = GFX_report_event_soviet_tanks
	is_triggered_only = yes
	option = {
		# Good
		name = NSB_soviet_comecon.2.a
		effect_tooltip = {
			swap_ideas = {
				remove_idea = SOV_comecon_puppet_default
				add_idea = SOV_comecon_puppet_military
			}
			custom_effect_tooltip = NSB_soviet_comecon_effect_duration_tt
		}
	}
}

#########################
### SPANISH CIVIL WAR ###
#########################
#REPUBLICAN SPAIN / POUM LOSES THE SCW -> LÍSTER / EL CAMPESINO / ROVIRA JOINS SOV -> Event for SOV
unit_leader_event = {
	id = NSB_soviet_spanish_civil_war.1
	title = NSB_soviet_spanish_civil_war.1.t
	desc = NSB_soviet_spanish_civil_war.1.desc
	is_triggered_only = yes
	hidden = no
	option = {
		name = NSB_soviet_spanish_civil_war.1.a
		effect_tooltip = {
			var:SOV.SOV_spanish_general = {
				set_nationality = SOV
			}
		}
	}
}

# POUM - SOV has organized International Marxist Brigades -> Event for SPC
country_event = {
	id = NSB_soviet_spanish_civil_war.2
	title = NSB_soviet_spanish_civil_war.2.t
	desc = NSB_soviet_spanish_civil_war.2.desc
	picture = GFX_report_event_spr_poum_militia
	is_triggered_only = yes
	option = {
		name = NSB_soviet_spanish_civil_war.2.a
		if = {
			limit = {
				NOT = {
					has_template = "International Marxist Brigades"
				}
			}
			division_template = {
				name = "International Marxist Brigades"
				is_locked = yes
				priority = 1
				template_counter = 14
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
					infantry = {
						x = 1
						y = 0
					}
					infantry = {
						x = 1
						y = 1
					}
				}
			}
		}
		capital_scope = {
			create_unit = {
				division = "name = \"International Marxist Brigade\" division_template = \"International Marxist Brigades\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
				owner = ROOT
				count = 6
			}
		}
	}
}

# POUM - SOV has sent special commandos -> Event for SPC
country_event = {
	id = NSB_soviet_spanish_civil_war.3
	title = NSB_soviet_spanish_civil_war.3.t
	desc = NSB_soviet_spanish_civil_war.3.desc
	picture = GFX_report_event_spr_the_maquis
	is_triggered_only = yes
	option = {
		name = NSB_soviet_spanish_civil_war.3.a
		add_timed_idea = {
			idea = SOV_soviet_commandos_poum
			days = 180
		}
		if = {
			limit = {
				NOT = {
					has_template = "Soviet Special Brigades"
				}
			}
			division_template = {
				name = "Soviet Special Brigades"
				is_locked = yes
				priority = 1
				template_counter = 2
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
					infantry = {
						x = 0
						y = 2
					}
					infantry = {
						x = 1
						y = 0
					}
					infantry = {
						x = 1
						y = 1
					}
					infantry = {
						x = 1
						y = 2
					}
				}
				support = {
					engineer = {
						x = 0
						y = 0
					}
					recon = {
						x = 0
						y = 1
					}
					artillery = {
						x = 0
						y = 2
					}
					anti_tank = {
						x = 0
						y = 3
					}
				}
			}
		}
		capital_scope = {
			create_unit = {
				division = "name = \"Soviet Special Brigade\" division_template = \"Soviet Special Brigades\" start_experience_factor = 0.7 start_equipment_factor = 1.0"
				owner = ROOT
				count = 2
			}
		}
	}
}

# POUM - SOV has organized popular speeches in the country -> Event for SPC
country_event = {
	id = NSB_soviet_spanish_civil_war.4
	title = NSB_soviet_spanish_civil_war.4.t
	desc = NSB_soviet_spanish_civil_war.4.desc
	picture = GFX_report_event_spr_anarchists
	is_triggered_only = yes
	option = {
		name = NSB_soviet_spanish_civil_war.4.a
		add_timed_idea = {
			idea = SOV_popular_speeches_poum
			days = 180
		}
		if = {
			limit = {
				NOT = {
					has_template = "International Marxist Brigades"
				}
			}
			division_template = {
				name = "International Marxist Brigades"
				is_locked = yes
				priority = 1
				template_counter = 14
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
					infantry = {
						x = 1
						y = 0
					}
					infantry = {
						x = 1
						y = 1
					}
				}
			}
		}
		capital_scope = {
			create_unit = {
				division = "name = \"International Marxist Brigade\" division_template = \"International Marxist Brigades\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
				owner = ROOT
				count = 2
			}
		}
	}
}

# POUM - SOV has infiltrate the Stalinist command in Spain -> Event for SPC
country_event = {
	id = NSB_soviet_spanish_civil_war.5
	title = NSB_soviet_spanish_civil_war.5.t
	desc = NSB_soviet_spanish_civil_war.5.desc
	picture = GFX_report_event_spr_republican_soldiers
	is_triggered_only = yes
	option = {
		name = NSB_soviet_spanish_civil_war.5.a
		add_timed_idea = {
			idea = SOV_agents_in_the_stalinist_command_poum
			days = 365
		}
	}
}

# POUM won CW -> Troops will aid Right Oppo in the Soviet CW -> Event for SOV
country_event = {
	id = NSB_soviet_spanish_civil_war.6
	title = NSB_soviet_spanish_civil_war.6.t
	desc = {
		text = NSB_soviet_spanish_civil_war.6.desc_1
		trigger = {
			NOT = {
				has_global_flag = SOV_soviet_civil_war
			}
		}
	}
	desc = {
		text = NSB_soviet_spanish_civil_war.6.desc_2
		trigger = {
			has_global_flag = SOV_soviet_civil_war
		}
	}
	picture = GFX_report_event_spr_anarchists2
	is_triggered_only = yes
	trigger = {
		OR = {
			#Do not trigger if Soviet civil war has finished or was bypassed
			NOT = {
				has_completed_focus = SOV_coup_detat
			}
			has_global_flag = SOV_soviet_civil_war
		}
	}
	immediate = {
		set_country_flag = SOV_poum_brigades_ready_to_help_flag		#Will be checked when the Soviet CW happens, and effects will be run in the CW setup effect
	}
	# Nice, comrades! -> Soviet Civil War has not happen
	option = {
		name = NSB_soviet_spanish_civil_war.6.a
		trigger = {
			NOT = {
				has_global_flag = SOV_soviet_civil_war
			}
		}
		custom_effect_tooltip = SOV_poum_aid_in_case_of_civil_War_tt
	}
	#Let's kick some asses! -> Soviet Civil War is ongoing
	option = {
		name = NSB_soviet_spanish_civil_war.6.a
		trigger = {
			has_global_flag = SOV_soviet_civil_war
		}
		SOV_poum_brigades_to_soviet_civil_war_effect = yes
	}
}

#######################
### PLANNED ECONOMY ###
#######################
# SOV planned economy - Event for puppets
country_event = {
	id = NSB_soviet_planned_economy.1
	title = NSB_soviet_planned_economy.1.t
	desc = NSB_soviet_planned_economy.1.desc
	picture = GFX_report_event_SOV_national_academy_of_sciences
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			FROM = {
				if = {
					limit = {
						check_variable = {
							SOV_planned_economy_industrial_capacity_factory_initial < 0.1
						}
					}
					add_to_variable = {
						SOV_planned_economy_industrial_capacity_factory_initial = 0.01
					}
				}
				if = {
					limit = {
						check_variable = {
							SOV_planned_economy_production_lack_of_resource_penalty_factor_initial > -0.1
						}
					}
					add_to_variable = {
						SOV_planned_economy_production_lack_of_resource_penalty_factor_initial = -0.01
					}
				}
			}
			add_tech_bonus = {
				name = NSB_soviet_planned_economy.1.t
				bonus = 1
				uses = 2
				category = industry
			}
			add_ideas = new_economic_policy
		}
	}
	option = {
		# Good
		name = NSB_soviet_planned_economy.1.a
		effect_tooltip = {
			add_tech_bonus = {
				name = NSB_soviet_planned_economy.1.t
				bonus = 1
				uses = 2
				category = industry
			}
			add_ideas = new_economic_policy
		}
	}
}

#  #  ##  ### ###  ##  #  #  ##  #   ###  ## ###     #  # ###  ###  ###  ## ### #  #  ##   ## 
## # #  #  #   #  #  # ## # #  # #    #  #    #      #  # #  # #  #  #  #    #  ## # #    #   
# ## ####  #   #  #  # # ## #### #    #   #   #      #  # ###  ###   #   #   #  # ## # ##  #  
#  # #  #  #   #  #  # #  # #  # #    #    #  #      #  # #    #  #  #    #  #  #  # #  #   # 
#  # #  #  #  ###  ##  #  # #  # ### ### ##   #       ##  #    #  # ### ##  ### #  #  ##  ##  
# Dispatcher event for uprisings 
country_event = {
	id = NSB_soviet_nationalist.000
	title = NSB_soviet_nationalist.000.t
	desc = NSB_soviet_nationalist.000.desc
	picture = GFX_report_event_SOV_purge_navy
	hidden = yes
	is_triggered_only = yes
	option = {
		name = NSB_soviet_nationalist.000.a
		IF = {
			limit = {
				has_global_flag = SOV_soviet_civil_war
			}			# No point in kicking off if war has ended already
			random_list = {
				35 = {
				}				# Nothing happens 
				# the "Western" Front
				6 = {
					# Ukrainian uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 1.5						# To keep a ukrainian uprising always slightly more likely than the others
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = ukr_uprising_flag
							UKR = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = UKR
					}
					set_country_flag = ukr_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				2 = {
					# Belarussan uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = blr_uprising_flag
							BLR = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = BLR
					}
					set_country_flag = blr_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# CRI uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = CRI
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = CRI_uprising_flag
							CRI = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = CRI
					}
					set_country_flag = CRI_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# KAR uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KAR
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = KAR_uprising_flag
							KAR = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = KAR
					}
					set_country_flag = KAR_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
					IF = {
						limit = {
							FIN = {
								exists = yes
								NOT = {
									has_government = communism
								}
							}
						}
						FIN = {
							country_event = AAT_finland_kinship_war.06
						}
					}
					hidden_effect = {
						#Add Repola and Uhtua VPs
						add_victory_points = {
							province = 6098							#Repola
							value = 1
						}
						add_victory_points = {
							province = 3067							#Uhtua
							value = 1
						}
						#Add Porajärvi VP
						add_victory_points = {
							province = 6094							#Porajärvi
							value = 1
						}
						KAR = {
							set_capital = {
								state = 215
							}
							division_template = {
								name = "Karjalan Metsäsissit"
								is_locked = yes
								priority = 1
								template_counter = 27
								regiments = {
									infantry = {
										x = 0
										y = 0
									}
									infantry = {
										x = 0
										y = 1
									}
									infantry = {
										x = 0
										y = 2
									}
									infantry = {
										x = 1
										y = 0
									}
									infantry = {
										x = 1
										y = 1
									}
								}
							}
							every_owned_state = {
								limit = {
									is_core_of = KAR
								}
								create_unit = {
									division = "name = \"Karjalan Metsäsissit\" division_template = \"Karjalan Metsäsissit\" start_experience_factor = 0.05 start_equipment_factor = 0.95"
									owner = KAR
									count = 1
								}
							}
							# Add extra country leader trait to the possible leaders (fascist & non-aligned)
							KAR_ukki_vainamoinen = {
								add_country_leader_trait = {
									ideology = fascism_ideology
									trait = veteran_guerrilla_fighter
								}
							}
							KAR_jalmari_takkinen = {
								add_country_leader_trait = veteran_guerrilla_fighter
							}
						}
					}
				}
				# The Caucasus 
				3 = {
					# Georgian uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 1.5						# To keep a georgian uprising always slightly more likely than the others
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = geo_uprising_flag
							GEO = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = GEO
					}
					set_country_flag = geo_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				2 = {
					# Armenian uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = arm_uprising_flag
							ARM = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = ARM
					}
					set_country_flag = arm_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				2 = {
					# Azer uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = azr_uprising_flag
							AZR = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = AZR
					}
					set_country_flag = azr_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				2 = {
					# Kalmyk uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = KAL_uprising_flag
							KAL = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = KAL
					}
					set_country_flag = KAL_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# DAG uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = DAG
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = DAG_uprising_flag
							DAG = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = DAG
					}
					set_country_flag = DAG_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# CIN uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = CIN
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = CIN_uprising_flag
							CIN = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = CIN
					}
					set_country_flag = CIN_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# ABK uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = ABK
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = ABK_uprising_flag
							ABK = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = ABK
					}
					set_country_flag = ABK_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				# The Urals
				1 = {
					# KOM uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KOM
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = KOM_uprising_flag
							KOM = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = KOM
					}
					set_country_flag = KOM_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# NEN uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = NEN
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = NEN_uprising_flag
							NEN = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = NEN
					}
					set_country_flag = NEN_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				# Central Asia
				1 = {
					# Khivan uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KHI
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = khi_uprising_flag
							KHI = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = KHI
					}
					set_country_flag = khi_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# Bukharan uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = BUK
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = buk_uprising_flag
							BUK = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = BUK
					}
					set_country_flag = buk_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# Kazakh uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						any_state = {
							is_core_of = KAZ
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = kaz_uprising_flag
							KAZ = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = KAZ
					}
					set_country_flag = kaz_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# UZB uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0
						any_state = {
							is_core_of = UZB
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = uzb_uprising_flag
							UZB = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = UZB
					}
					set_country_flag = uzb_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# KKP uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KKP
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = kkp_uprising_flag
							KKP = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = KKP
					}
					set_country_flag = kkp_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# TMS uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = TMS
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = tms_uprising_flag
							TMS = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = TMS
					}
					set_country_flag = tms_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# KYR uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = KYR
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = KYR_uprising_flag
							KYR = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = KYR
					}
					set_country_flag = KYR_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
				1 = {
					# TAJ uprising
					modifier = {
						add = SOV_civil_war_months
						always = yes
					}
					modifier = {
						factor = 0.25
						any_state = {
							is_core_of = TAJ
							is_controlled_by = SOV
						}
					}
					modifier = {
						factor = 0
						OR = {
							has_country_flag = TAJ_uprising_flag
							TAJ = {
								exists = yes
							}
						}
					}
					set_variable = {
						SOV_nationalist_country = TAJ
					}
					set_country_flag = TAJ_uprising_flag
					SOV = {
						country_event = NSB_soviet_nationalist.001
					}
				}
			}
		}
	}
}

# Nationalist Revolt
country_event = {
	id = NSB_soviet_nationalist.001
	title = NSB_soviet_nationalist.001.t
	desc = NSB_soviet_nationalist.001.desc
	picture = GFX_report_event_generic_rally2
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					original_tag = SOV
				}
				every_owned_state = {
					limit = {
						is_core_of = var:SOV.SOV_nationalist_country
					}
					var:SOV.SOV_nationalist_country = {
						transfer_state = PREV
					}
				}
			}
			# Capture any Stalinist soldiers in our territory
			every_state = {
				limit = {
					is_owned_by = var:SOV.SOV_nationalist_country
				}
				SOS = {
					delete_unit = {
						state = PREV
						disband = no
					}
				}
			}
			var:SOV.SOV_nationalist_country = {
				division_template = {
					name = "Resistance Fighters"
					is_locked = yes
					priority = 1
					template_counter = 3
					regiments = {
						infantry = {
							x = 0
							y = 0
						}
						infantry = {
							x = 0
							y = 1
						}
						infantry = {
							x = 0
							y = 2
						}
						infantry = {
							x = 1
							y = 0
						}
						infantry = {
							x = 1
							y = 1
						}
					}
					is_locked = yes
				}
				every_owned_state = {
					limit = {
						is_core_of = var:SOV.SOV_nationalist_country
					}
					create_unit = {
						division = "name = \"Resistance Fighters\" division_template = \"Resistance Fighters\" start_experience_factor = 0.05 start_equipment_factor = 0.95"
						owner = var:SOV.SOV_nationalist_country
						count = 2
					}
				}
				random_owned_state = {
					limit = {
						is_core_of = var:SOV.SOV_nationalist_country
						is_capital = yes
					}
					create_unit = {
						division = "name = \"Resistance Fighters\" division_template = \"Resistance Fighters\" start_experience_factor = 0.05 start_equipment_factor = 0.95"
						owner = var:SOV.SOV_nationalist_country
						count = 2
					}
				}
			}
			var:SOV.SOV_nationalist_country = {
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.4
				}
				add_popularity = {
					ideology = fascism
					popularity = 0.2
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.2
				}
				set_country_flag = SOV_breakaway_country_flag
				set_country_flag = SOV_unrecognized_country_flag
				set_rule = {
					can_join_factions = no
				}
			}
			# Renaming of cities where apropriate 
			IF = {
				limit = {
					var:SOV.SOV_nationalist_country = {
						tag = KYR
					}
				}
				set_province_name = {
					id = 12583
					name = SOV_Bishkek
				}
			}
			ELSE_IF = {
				limit = {
					var:SOV.SOV_nationalist_country = {
						tag = MEL
					}
				}
				set_province_name = {
					id = 9402
					name = SOV_Krasnokokshaysk
				}
			}
		}
	}
	option = {
		name = NSB_soviet_nationalist.001.a
		ai_chance = {
			base = 5			# The AI needs all the help it can get
		}
		var:SOV.SOV_nationalist_country = {
			add_named_threat = {
				threat = -1
				name = indepence_war_threat
			}
			declare_war_on = {
				target = SOS
				type = independence_wargoal
			}
		}
		var:SOV.SOV_nationalist_country = {
			give_military_access = ROOT
		}
		ROOT = {
			give_military_access = var:SOV.SOV_nationalist_country
		}
	}
	option = {
		name = NSB_soviet_nationalist.001.b
		ai_chance = {
			base = 1
		}
		var:SOV.SOV_nationalist_country = {
			declare_war_on = {
				target = SOS
				type = independence_wargoal
			}
		}
		var:SOV.SOV_nationalist_country = {
			add_named_threat = {
				threat = -1
				name = indepence_war_threat
			}
			declare_war_on = {
				target = ROOT
				type = independence_wargoal
			}
		}
	}
}

# Nationalists offered autonomy
country_event = {
	id = NSB_soviet_nationalist.002
	title = NSB_soviet_nationalist.002.t
	desc = NSB_soviet_nationalist.002.desc
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	# Nah
	option = {
		name = NSB_soviet_nationalist.002.a
		ai_chance = {
			base = 1
			modifier = {
				factor = 5
				is_in_faction = yes				# Don't surrender so easily if already have friends
			}
			modifier = {
				factor = 2
				check_variable = {
					ROOT.num_owned_states > 5
				}				# We're big enough to defend ourselves
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_nationalist.004
				days = 3
				random_days = 3
			}
		}
	}
	# We have to accept, I suppose
	option = {
		name = NSB_soviet_nationalist.002.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 2
				check_variable = {
					ROOT.num_owned_states < 3
				}
			}
		}
		FROM = {
			country_event = {
				id = NSB_soviet_nationalist.003
				days = 3
				random_days = 3
			}
		}
	}
}

# Nationalists accept puppet status
country_event = {
	id = NSB_soviet_nationalist.003
	title = NSB_soviet_nationalist.003.t
	desc = NSB_soviet_nationalist.003.desc
	picture = GFX_report_event_generic_sign_treaty2
	is_triggered_only = yes
	option = {
		name = NSB_soviet_nationalist.003.a
		ai_chance = {
			base = 1
		}
		ROOT = {
			puppet = FROM
		}
	}
}

# Nationalists reject puppet status
country_event = {
	id = NSB_soviet_nationalist.004
	title = NSB_soviet_nationalist.004.t
	desc = NSB_soviet_nationalist.004.desc
	picture = GFX_report_event_generic_parliament
	is_triggered_only = yes
	# War it is
	option = {
		name = NSB_soviet_nationalist.004.a
		ai_chance = {
			base = 3
		}
		declare_war_on = {
			target = FROM
			type = puppet_wargoal_focus
		}
	}
	# Ah well, it was a nice try
	option = {
		name = NSB_soviet_nationalist.004.b
		ai_chance = {
			base = 1
			modifier = {
				factor = 10
				FROM = {
					is_in_faction = yes					# Let's not start a world war over this - yet
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					has_war = yes					# We should be slightly more careful if already at war.
				}
			}
		}
	}
}

###  ##   ##  ##  ###  ## ###    ###  ##  ##  ###  ###  ## ### 
#   #  # #   #  #  #  #    #      #  #   #  # #  #  #  #    #  
##  ####  #  #     #   #   #      #   #  #### ###   #   #   #  
#   #  #   # #  #  #    #  #      #    # #  # #  #  #    #  #  
#   #  # ##   ##  ### ##   #      #  ##  #  # #  # ### ##   #  
# Events for minor Slavic powers: "Join or die"
country_event = {
	id = NSB_soviet_fascist_tsarist.1
	title = NSB_soviet_fascist_tsarist.1.t
	desc = NSB_soviet_fascist_tsarist.1.desc
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Accept
	option = {
		name = NSB_soviet_fascist_tsarist.1.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio > 0.8
				}
			}
			modifier = {
				factor = 1.2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
			modifier = {
				factor = 1.5
				has_opinion = {
					target = FROM
					value > 75
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 95
				}
			}
			modifier = {
				factor = 2
				is_in_faction_with = FROM
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
		effect_tooltip = {
			FROM = {
				annex_country = {
					target = ROOT
					transfer_troops = yes
				}
			}
		}
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.2
		}
	}
	# Reject
	option = {
		name = NSB_soviet_fascist_tsarist.1.b
		ai_chance = {
			base = 90
			modifier = {
				factor = 0
				is_subject_of = FROM
			}
			modifier = {
				factor = 0.2
				any_country = {
					is_major = yes
					OR = {
						has_wargoal_against = ROOT
						has_war_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				surrender_progress > 0
			}
			modifier = {
				factor = 0.8
				strength_ratio = {
					tag = FROM
					ratio < 0.05
				}
			}
			modifier = {
				factor = 0.8
				has_war = yes
			}
			modifier = {
				factor = 1.2
				has_opinion = {
					target = FROM
					value < 0
				}
			}
			modifier = {
				factor = 1.5
				has_opinion = {
					target = FROM
					value < -50
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value < -75
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value < -90
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio > 0.5
				}
			}
		}
		effect_tooltip = {
			FROM = {
				create_wargoal = {
					type = annex_everything
					target = ROOT
				}
			}
		}
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.3
		}
	}
}

# Events for Russia: Slavic country accepted "Join or die"
country_event = {
	id = NSB_soviet_fascist_tsarist.2
	title = NSB_soviet_fascist_tsarist.2.t
	desc = NSB_soviet_fascist_tsarist.2.desc
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	# Excellent!
	option = {
		name = NSB_soviet_fascist_tsarist.2.a
		annex_country = {
			target = FROM
			transfer_troops = yes
		}
	}
}

# Events for Russia: Slavic country rejected "Join or die"
country_event = {
	id = NSB_soviet_fascist_tsarist.3
	title = NSB_soviet_fascist_tsarist.3.t
	desc = NSB_soviet_fascist_tsarist.3.desc
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	# Excellent!
	option = {
		name = NSB_soviet_fascist_tsarist.3.a
		create_wargoal = {
			type = annex_everything
			target = FROM
		}
	}
}

# Event for Central American nations (excluding Mexico): Russia influencing our politics!
country_event = {
	id = NSB_soviet_fascist_tsarist.4
	title = NSB_soviet_fascist_tsarist.4.t
	desc = NSB_soviet_fascist_tsarist.4.desc
	picture = GFX_report_event_generic_worker_protests
	is_triggered_only = yes
	# Bastards!
	option = {
		name = NSB_soviet_fascist_tsarist.4.a
		effect_tooltip = {
			add_timed_idea = {
				idea = SOV_russian_political_influence
				days = 730
			}
		}
	}
}

# Event for American Fascist nations: Wanna join the party?
country_event = {
	id = NSB_soviet_fascist_tsarist.5
	title = NSB_soviet_fascist_tsarist.5.t
	desc = NSB_soviet_fascist_tsarist.5.desc
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Sounds good!
	option = {
		name = NSB_soviet_fascist_tsarist.5.a
		FROM = {
			add_to_faction = ROOT
			hidden_effect = {
				country_event = {
					id = NSB_soviet_fascist_tsarist.6
				}
			}
		}
	}
	# No thanks!
	option = {
		name = NSB_soviet_fascist_tsarist.5.b
		hidden_effect = {
			country_event = {
				id = NSB_soviet_fascist_tsarist.7
			}
		}
	}
}

# Events for Russia: American country joins faction
country_event = {
	id = NSB_soviet_fascist_tsarist.6
	title = NSB_soviet_fascist_tsarist.6.t
	desc = NSB_soviet_fascist_tsarist.6.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Excellent!
	option = {
		name = NSB_soviet_fascist_tsarist.6.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

# Events for Russia: American country refuses to join faction
country_event = {
	id = NSB_soviet_fascist_tsarist.7
	title = NSB_soviet_fascist_tsarist.7.t
	desc = NSB_soviet_fascist_tsarist.7.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Bummer
	option = {
		name = NSB_soviet_fascist_tsarist.7.a
	}
}

# Event for American Fascist nations that have switched fascist later on: Wanna join the party?
country_event = {
	id = NSB_soviet_fascist_tsarist.8
	title = NSB_soviet_fascist_tsarist.7.t
	desc = NSB_soviet_fascist_tsarist.8.desc
	picture = GFX_report_event_generic_sign_treaty3
	is_triggered_only = yes
	# Sounds good!
	option = {
		name = NSB_soviet_fascist_tsarist.7.a
		FROM = {
			add_to_faction = ROOT
			hidden_effect = {
				country_event = {
					id = NSB_soviet_fascist_tsarist.9
				}
			}
		}
	}
	# No thanks!
	option = {
		name = NSB_soviet_fascist_tsarist.7.b
		hidden_effect = {
			country_event = {
				id = NSB_soviet_fascist_tsarist.10
			}
		}
	}
}

# Events for Russia: American country joins faction
country_event = {
	id = NSB_soviet_fascist_tsarist.9
	title = NSB_soviet_fascist_tsarist.6.t
	desc = NSB_soviet_fascist_tsarist.9.desc
	picture = GFX_report_event_generic_sign_treaty2
	is_triggered_only = yes
	# Excellent!
	option = {
		name = NSB_soviet_fascist_tsarist.6.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

# Events for Russia: American country refuses to join faction
country_event = {
	id = NSB_soviet_fascist_tsarist.10
	title = NSB_soviet_fascist_tsarist.6.t
	desc = NSB_soviet_fascist_tsarist.10.desc
	picture = GFX_report_event_generic_sign_treaty2
	is_triggered_only = yes
	# Bummer
	option = {
		name = NSB_soviet_fascist_tsarist.6.a
	}
}

# Event for Japan: Russia's rebuilding Far Eastern Fleet infrastructure
country_event = {
	id = NSB_soviet_fascist_tsarist.11
	title = NSB_soviet_fascist_tsarist.11.t
	desc = NSB_soviet_fascist_tsarist.11.desc
	picture = GFX_report_event_usa_heavy_cruiser
	trigger = {
		original_tag = JAP
		NOT = {
			SOV = {
				has_completed_focus = SOV_rebuild_the_far_eastern_fleet
			}
		}
		SOV = {
			focus_progress = {
				focus = SOV_rebuild_the_far_eastern_fleet
				progress > 0.33
			}
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	# Concerning!
	option = {
		name = NSB_soviet_fascist_tsarist.11.a
	}
}

# Event for Japan: Russia's digging up the past
country_event = {
	id = NSB_soviet_fascist_tsarist.12
	title = NSB_soviet_fascist_tsarist.12.t
	desc = NSB_soviet_fascist_tsarist.12.desc
	picture = GFX_report_event_fascist_speech
	trigger = {
		original_tag = SOV
		NOT = {
			has_completed_focus = SOV_memories_of_1905
		}
		focus_progress = {
			focus = SOV_memories_of_1905
			progress > 0.33
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	# They're coming for us!
	option = {
		name = NSB_soviet_fascist_tsarist.12.a
	}
}

# Event for USA: Russia's building military infrastructure facing Alaska
country_event = {
	id = NSB_soviet_fascist_tsarist.13
	title = NSB_soviet_fascist_tsarist.13.t
	desc = NSB_soviet_fascist_tsarist.13.desc
	picture = GFX_report_event_soviet_tanks
	trigger = {
		original_tag = USA
		NOT = {
			SOV = {
				has_completed_focus = SOV_eastern_expansion
			}
		}
		SOV = {
			focus_progress = {
				focus = SOV_eastern_expansion
				progress > 0.33
			}
		}
	}
	mean_time_to_happen = {
		days = 2
	}
	# They're coming for us!
	option = {
		name = NSB_soviet_fascist_tsarist.13.a
	}
}

# Event for Russia: coronation of Tsar Vladimir I
country_event = {
	id = NSB_soviet_fascist_tsarist.14
	title = NSB_soviet_fascist_tsarist.14.t
	desc = NSB_soviet_fascist_tsarist.14.desc
	picture = GFX_report_event_generic_military_parade
	is_triggered_only = yes
	# Glorious!
	option = {
		name = NSB_soviet_fascist_tsarist.14.a
		promote_character = SOV_tsar_vladimir_kirillovich
		news_event = {
			id = nsb_news.400
			hours = 12
		}
		hidden_effect = {
			ROOT = {
				drop_cosmetic_tag = yes
			}
			set_cosmetic_tag = russian_empire
		}
	}
}

# Event for Russia: coronation of Patriarch Meletius
country_event = {
	id = NSB_soviet_fascist_tsarist.15
	title = NSB_soviet_fascist_tsarist.15.t
	desc = NSB_soviet_fascist_tsarist.15.desc
	picture = GFX_report_event_generic_military_parade
	is_triggered_only = yes
	# And there was much rejoicing!
	option = {
		name = NSB_soviet_fascist_tsarist.15.a
		effect_tooltip = {
			promote_character = SOV_patriarch_meletius
		}
		news_event = {
			id = nsb_news.404
			hours = 12
		}
	}
}

# Event for ENG/FRA: Russia proposes recreation of Triple Entente
country_event = {
	id = NSB_soviet_fascist_tsarist.16
	title = NSB_soviet_fascist_tsarist.16.t
	desc = NSB_soviet_fascist_tsarist.16.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.16.a
		set_faction_name = TRIPLE_ENTENTE
		add_to_faction = FROM
		FROM = {
			country_event = {
				id = NSB_soviet_fascist_tsarist.17
			}
		}
		if = {
			limit = {
				tag = ENG
				FRA = {
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
					}
					NOT = {
						has_war_with = FROM
					}
				}
			}
			FRA = {
				country_event = {
					id = NSB_soviet_fascist_tsarist.19
					hours = 12
					random = 60
				}
			}
		}
		if = {
			limit = {
				tag = FRA
				ENG = {
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
					}
					NOT = {
						has_war_with = FROM
					}
				}
			}
			ENG = {
				country_event = {
					id = NSB_soviet_fascist_tsarist.19
					hours = 12
					random = 60
				}
			}
		}
	}
	# No
	option = {
		name = NSB_soviet_fascist_tsarist.16.b
		FROM = {
			country_event = {
				id = NSB_soviet_fascist_tsarist.18
				hours = 6
			}
		}
	}
}

# Event for SOV: Proposal for Triple Entente Accepted
country_event = {
	id = NSB_soviet_fascist_tsarist.17
	title = NSB_soviet_fascist_tsarist.17.t
	desc = NSB_soviet_fascist_tsarist.17.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Good
	option = {
		name = NSB_soviet_fascist_tsarist.17.a
		effect_tooltip = {
			FROM = {
				set_faction_name = TRIPLE_ENTENTE
				add_to_faction = ROOT
			}
			if = {
				limit = {
					FROM = {
						tag = ENG
					}
					FRA = {
						is_in_faction = no
					}
				}
				FRA = {
					country_event = {
						id = NSB_soviet_fascist_tsarist.19
						hours = 12
						random = 60
					}
				}
			}
			if = {
				limit = {
					FROM = {
						tag = FRA
					}
					ENG = {
						is_in_faction = no
					}
				}
				ENG = {
					country_event = {
						id = NSB_soviet_fascist_tsarist.19
						hours = 12
						random = 60
					}
				}
			}
		}
		news_event = {
			id = nsb_news.407
			hours = 12
		}
	}
}

# Event for SOV: Proposal for Triple Entente Rejected
country_event = {
	id = NSB_soviet_fascist_tsarist.18
	title = NSB_soviet_fascist_tsarist.18.t
	desc = NSB_soviet_fascist_tsarist.18.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.18.a
	}
}

# Event for ENG/FRA: Invitation to Triple Entente
country_event = {
	id = NSB_soviet_fascist_tsarist.19
	title = NSB_soviet_fascist_tsarist.16.t
	desc = NSB_soviet_fascist_tsarist.19.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.19.a
		FROM = {
			add_to_faction = ROOT
			country_event = NSB_soviet_fascist_tsarist.20
		}
	}
	# No
	option = {
		name = NSB_soviet_fascist_tsarist.19.b
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.21
		}
	}
}

# Event for FROM: Invitation to Triple Entente Accepted
country_event = {
	id = NSB_soviet_fascist_tsarist.20
	title = NSB_soviet_fascist_tsarist.17.t
	desc = NSB_soviet_fascist_tsarist.17.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Good
	option = {
		name = NSB_soviet_fascist_tsarist.20.a
		effect_tooltip = {
			add_to_faction = FROM
		}
		news_event = {
			id = nsb_news.408
			hours = 12
		}
	}
}

# Event for FROM: Invitation to Triple Entente Rejected
country_event = {
	id = NSB_soviet_fascist_tsarist.21
	title = NSB_soviet_fascist_tsarist.18.t
	desc = NSB_soviet_fascist_tsarist.18.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.21.a
	}
}

# Event for GER: Russia wants to join Axis
country_event = {
	id = NSB_soviet_fascist_tsarist.22
	title = NSB_soviet_fascist_tsarist.22.t
	desc = NSB_soviet_fascist_tsarist.22.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.22.a
		add_to_faction = FROM
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.23
		}
	}
	# No
	option = {
		name = NSB_soviet_fascist_tsarist.22.b
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.24
		}
	}
}

# Event for Russia: Germany accepts
country_event = {
	id = NSB_soviet_fascist_tsarist.23
	title = NSB_soviet_fascist_tsarist.23.t
	desc = NSB_soviet_fascist_tsarist.23.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Good
	option = {
		name = NSB_soviet_fascist_tsarist.22.a
		effect_tooltip = {
			FROM = {
				add_to_faction = ROOT
			}
		}
		news_event = {
			id = nsb_news.402
			hours = 12
		}
	}
}

# Event for Russia: Germany rejects
country_event = {
	id = NSB_soviet_fascist_tsarist.24
	title = NSB_soviet_fascist_tsarist.24.t
	desc = NSB_soviet_fascist_tsarist.24.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.24.a
	}
}

# Event for GER: Russia wants Japan to be invited
country_event = {
	id = NSB_soviet_fascist_tsarist.25
	title = NSB_soviet_fascist_tsarist.25.t
	desc = NSB_soviet_fascist_tsarist.25.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.25.a
		JAP = {
			country_event = NSB_soviet_fascist_tsarist.29
		}
	}
	# No
	option = {
		name = NSB_soviet_fascist_tsarist.25.b
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.28
		}
	}
}

# Event for Russia: Germany accepted proposal, Japan accepted invitation
country_event = {
	id = NSB_soviet_fascist_tsarist.26
	title = NSB_soviet_fascist_tsarist.26.t
	desc = NSB_soviet_fascist_tsarist.26.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Good
	option = {
		name = NSB_soviet_fascist_tsarist.26.a
		effect_tooltip = {
			FROM = {
				add_to_faction = JAP
			}
		}
		news_event = {
			id = nsb_news.409
			hours = 12
		}
	}
}

# Event for Russia: Germany accepted proposal, Japan rejected invitation
country_event = {
	id = NSB_soviet_fascist_tsarist.27
	title = NSB_soviet_fascist_tsarist.27.t
	desc = NSB_soviet_fascist_tsarist.27.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.27.a
	}
}

# Event for Russia: Germany rejected proposal
country_event = {
	id = NSB_soviet_fascist_tsarist.28
	title = NSB_soviet_fascist_tsarist.28.t
	desc = NSB_soviet_fascist_tsarist.28.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.28.a
	}
}

# Event for JAP: Germany and Russia invite Japan to faction
country_event = {
	id = NSB_soviet_fascist_tsarist.29
	title = NSB_soviet_fascist_tsarist.25.t
	desc = NSB_soviet_fascist_tsarist.29.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Yes
	option = {
		name = NSB_soviet_fascist_tsarist.29.a
		FROM = {
			effect_tooltip = {
				add_to_faction = ROOT
			}
			country_event = NSB_soviet_fascist_tsarist.30
		}
	}
	# No
	option = {
		name = NSB_soviet_fascist_tsarist.29.b
		FROM = {
			country_event = NSB_soviet_fascist_tsarist.31
		}
	}
}

# Event for GER: Japan accepted invitation
country_event = {
	id = NSB_soviet_fascist_tsarist.30
	title = NSB_soviet_fascist_tsarist.26.t
	desc = NSB_soviet_fascist_tsarist.30.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Great!
	option = {
		name = NSB_soviet_fascist_tsarist.30.a
		add_to_faction = FROM
		SOV = {
			country_event = NSB_soviet_fascist_tsarist.26
		}
	}
}

# Event for GER: Japan rejected invitation
country_event = {
	id = NSB_soviet_fascist_tsarist.31
	title = NSB_soviet_fascist_tsarist.27.t
	desc = NSB_soviet_fascist_tsarist.31.desc
	picture = GFX_report_event_generic_sign_treaty1
	is_triggered_only = yes
	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.31.a
		SOV = {
			country_event = NSB_soviet_fascist_tsarist.27
		}
	}
}

# Event for GER: Vlasov captured/collaborates
country_event = {
	id = NSB_soviet_fascist_tsarist.32
	title = NSB_soviet_fascist_tsarist.32.t
	desc = NSB_soviet_fascist_tsarist.32.desc
	picture = GFX_report_event_soviet_soldiers
	fire_only_once = yes
	trigger = {
		original_tag = GER
		has_war_with = SOV
		SOV = {
			has_government = communism
			has_country_leader = {
				character = SOV_iosif_stalin
				ruling_only = yes
			}
			surrender_progress > 0.25
		}
		has_dlc = "No Step Back"
	}
	mean_time_to_happen = {
		days = 14
	}
	# A great idea!
	option = {
		name = NSB_soviet_fascist_tsarist.32.a
		SOV = {
			SOV_andrey_vlasov = {
				set_nationality = GER
			}
		}
		division_template = {
			name = "Russische Freiwilligendivision"
			template_counter = 4
			division_names_group = GER_Inf_01
			regiments = {
				infantry = {
					x = 0
					y = 0
				}
				infantry = {
					x = 0
					y = 1
				}
				infantry = {
					x = 0
					y = 2
				}
				infantry = {
					x = 1
					y = 0
				}
				infantry = {
					x = 1
					y = 1
				}
				infantry = {
					x = 1
					y = 2
				}
				infantry = {
					x = 2
					y = 0
				}
				artillery_brigade = {
					x = 2
					y = 1
				}
				artillery_brigade = {
					x = 2
					y = 2
				}
			}
			support = {
				recon = {
					x = 0
					y = 0
				}
				engineer = {
					x = 0
					y = 1
				}
			}
		}
		random_controlled_state = {
			limit = {
				is_core_of = SOV
			}
			create_unit = {
				division = "name = \"600. (russ.) Infanterie-Division\" division_template = \"Russische Freiwilligendivision\" start_experience_factor = 0.3"
				owner = GER
			}
			create_unit = {
				division = "name = \"650. (russ.) Infanterie-Division\" division_template = \"Russische Freiwilligendivision\" start_experience_factor = 0.3"
				owner = GER
			}
			create_unit = {
				division = "name = \"700. (russ.) Infanterie-Division\" division_template = \"Russische Freiwilligendivision\" start_experience_factor = 0.3"
				owner = GER
			}
		}
		SOV = {
			clr_country_flag = vlasov_owner_flag
			country_event = {
				id = NSB_soviet_fascist_tsarist.33
				hours = 12
			}
		}
		set_country_flag = vlasov_owner_flag
	}
	# Let's not
	option = {
		name = NSB_soviet_fascist_tsarist.32.b
		SOV = {
			SOV_andrey_vlasov = {
				set_nationality = GER
				set_character_flag = vlasov_imprisoned_flag
			}
		}
		SOV = {
			clr_country_flag = vlasov_owner_flag
			country_event = {
				id = NSB_soviet_fascist_tsarist.33
				hours = 12
			}
		}
		set_country_flag = vlasov_owner_flag
	}
}

# Event for SOV: Vlasov captured
country_event = {
	id = NSB_soviet_fascist_tsarist.33
	title = NSB_soviet_fascist_tsarist.32.t
	desc = NSB_soviet_fascist_tsarist.33.desc
	picture = GFX_report_event_soviet_soldiers
	is_triggered_only = yes
	# Unfortunate
	option = {
		name = NSB_soviet_fascist_tsarist.33.a
		effect_tooltip = {
			SOV_andrey_vlasov = {
				set_nationality = GER
			}
		}
	}
}
